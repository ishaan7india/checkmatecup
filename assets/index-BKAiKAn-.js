var _E=Object.defineProperty;var Ym=t=>{throw TypeError(t)};var SE=(t,e,r)=>e in t?_E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Qe=(t,e,r)=>SE(t,typeof e!="symbol"?e+"":e,r),Yu=(t,e,r)=>e.has(t)||Ym("Cannot "+r);var B=(t,e,r)=>(Yu(t,e,"read from private field"),r?r.call(t):e.get(t)),Pe=(t,e,r)=>e.has(t)?Ym("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),xe=(t,e,r,n)=>(Yu(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Dt=(t,e,r)=>(Yu(t,e,"access private method"),r);var vl=(t,e,r,n)=>({set _(s){xe(t,e,s,r)},get _(){return B(t,e,n)}});function EE(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function py(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var my={exports:{}},iu={},gy={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=Symbol.for("react.element"),CE=Symbol.for("react.portal"),kE=Symbol.for("react.fragment"),TE=Symbol.for("react.strict_mode"),jE=Symbol.for("react.profiler"),NE=Symbol.for("react.provider"),OE=Symbol.for("react.context"),PE=Symbol.for("react.forward_ref"),RE=Symbol.for("react.suspense"),AE=Symbol.for("react.memo"),IE=Symbol.for("react.lazy"),Jm=Symbol.iterator;function DE(t){return t===null||typeof t!="object"?null:(t=Jm&&t[Jm]||t["@@iterator"],typeof t=="function"?t:null)}var vy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yy=Object.assign,wy={};function No(t,e,r){this.props=t,this.context=e,this.refs=wy,this.updater=r||vy}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xy(){}xy.prototype=No.prototype;function rp(t,e,r){this.props=t,this.context=e,this.refs=wy,this.updater=r||vy}var np=rp.prototype=new xy;np.constructor=rp;yy(np,No.prototype);np.isPureReactComponent=!0;var Xm=Array.isArray,by=Object.prototype.hasOwnProperty,sp={current:null},_y={key:!0,ref:!0,__self:!0,__source:!0};function Sy(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)by.call(e,n)&&!_y.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:rl,type:t,key:i,ref:o,props:s,_owner:sp.current}}function LE(t,e){return{$$typeof:rl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===rl}function ME(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Zm=/\/+/g;function Ju(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ME(""+t.key):e.toString(36)}function Xl(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rl:case CE:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Ju(o,0):n,Xm(s)?(r="",t!=null&&(r=t.replace(Zm,"$&/")+"/"),Xl(s,e,r,"",function(u){return u})):s!=null&&(ip(s)&&(s=LE(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Xm(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+Ju(i,a);o+=Xl(i,e,r,l,s)}else if(l=DE(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+Ju(i,a++),o+=Xl(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yl(t,e,r){if(t==null)return t;var n=[],s=0;return Xl(t,n,"","",function(i){return e.call(r,i,s++)}),n}function $E(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Zl={transition:null},UE={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:sp};function Ey(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:yl,forEach:function(t,e,r){yl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return yl(t,function(){e++}),e},toArray:function(t){return yl(t,function(e){return e})||[]},only:function(t){if(!ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=No;Te.Fragment=kE;Te.Profiler=jE;Te.PureComponent=rp;Te.StrictMode=TE;Te.Suspense=RE;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;Te.act=Ey;Te.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=yy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)by.call(e,l)&&!_y.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:rl,type:t.type,key:s,ref:i,props:n,_owner:o}};Te.createContext=function(t){return t={$$typeof:OE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NE,_context:t},t.Consumer=t};Te.createElement=Sy;Te.createFactory=function(t){var e=Sy.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:PE,render:t}};Te.isValidElement=ip;Te.lazy=function(t){return{$$typeof:IE,_payload:{_status:-1,_result:t},_init:$E}};Te.memo=function(t,e){return{$$typeof:AE,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};Te.unstable_act=Ey;Te.useCallback=function(t,e){return Jt.current.useCallback(t,e)};Te.useContext=function(t){return Jt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Jt.current.useEffect(t,e)};Te.useId=function(){return Jt.current.useId()};Te.useImperativeHandle=function(t,e,r){return Jt.current.useImperativeHandle(t,e,r)};Te.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Jt.current.useMemo(t,e)};Te.useReducer=function(t,e,r){return Jt.current.useReducer(t,e,r)};Te.useRef=function(t){return Jt.current.useRef(t)};Te.useState=function(t){return Jt.current.useState(t)};Te.useSyncExternalStore=function(t,e,r){return Jt.current.useSyncExternalStore(t,e,r)};Te.useTransition=function(){return Jt.current.useTransition()};Te.version="18.3.1";gy.exports=Te;var p=gy.exports;const Y=py(p),op=EE({__proto__:null,default:Y},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE=p,BE=Symbol.for("react.element"),zE=Symbol.for("react.fragment"),WE=Object.prototype.hasOwnProperty,HE=FE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VE={key:!0,ref:!0,__self:!0,__source:!0};function Cy(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)WE.call(e,n)&&!VE.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:BE,type:t,key:i,ref:o,props:s,_owner:HE.current}}iu.Fragment=zE;iu.jsx=Cy;iu.jsxs=Cy;my.exports=iu;var c=my.exports,ky={exports:{}},_r={},Ty={exports:{}},jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,C){var F=T.length;T.push(C);e:for(;0<F;){var K=F-1>>>1,R=T[K];if(0<s(R,C))T[K]=C,T[F]=R,F=K;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var C=T[0],F=T.pop();if(F!==C){T[0]=F;e:for(var K=0,R=T.length,G=R>>>1;K<G;){var J=2*(K+1)-1,oe=T[J],de=J+1,D=T[de];if(0>s(oe,F))de<R&&0>s(D,oe)?(T[K]=D,T[de]=F,K=de):(T[K]=oe,T[J]=F,K=J);else if(de<R&&0>s(D,F))T[K]=D,T[de]=F,K=de;else break e}}return C}function s(T,C){var F=T.sortIndex-C.sortIndex;return F!==0?F:T.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,m=!1,w=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var C=r(u);C!==null;){if(C.callback===null)n(u);else if(C.startTime<=T)n(u),C.sortIndex=C.expirationTime,e(l,C);else break;C=r(u)}}function _(T){if(g=!1,x(T),!w)if(r(l)!==null)w=!0,$(S);else{var C=r(u);C!==null&&q(_,C.startTime-T)}}function S(T,C){w=!1,g&&(g=!1,y(j),j=-1),m=!0;var F=f;try{for(x(C),h=r(l);h!==null&&(!(h.expirationTime>C)||T&&!X());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var R=K(h.expirationTime<=C);C=t.unstable_now(),typeof R=="function"?h.callback=R:h===r(l)&&n(l),x(C)}else n(l);h=r(l)}if(h!==null)var G=!0;else{var J=r(u);J!==null&&q(_,J.startTime-C),G=!1}return G}finally{h=null,f=F,m=!1}}var E=!1,k=null,j=-1,L=5,M=-1;function X(){return!(t.unstable_now()-M<L)}function U(){if(k!==null){var T=t.unstable_now();M=T;var C=!0;try{C=k(!0,T)}finally{C?V():(E=!1,k=null)}}else E=!1}var V;if(typeof v=="function")V=function(){v(U)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,W=O.port2;O.port1.onmessage=U,V=function(){W.postMessage(null)}}else V=function(){b(U,0)};function $(T){k=T,E||(E=!0,V())}function q(T,C){j=b(function(){T(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,$(S))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(T){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var F=f;f=C;try{return T()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,C){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var F=f;f=T;try{return C()}finally{f=F}},t.unstable_scheduleCallback=function(T,C,F){var K=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?K+F:K):F=K,T){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=F+R,T={id:d++,callback:C,priorityLevel:T,startTime:F,expirationTime:R,sortIndex:-1},F>K?(T.sortIndex=F,e(u,T),r(l)===null&&T===r(u)&&(g?(y(j),j=-1):g=!0,q(_,F-K))):(T.sortIndex=R,e(l,T),w||m||(w=!0,$(S))),T},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(T){var C=f;return function(){var F=f;f=C;try{return T.apply(this,arguments)}finally{f=F}}}})(jy);Ty.exports=jy;var qE=Ty.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE=p,br=qE;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ny=new Set,xa={};function mi(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(xa[t]=e,t=0;t<e.length;t++)Ny.add(e[t])}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cf=Object.prototype.hasOwnProperty,GE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eg={},tg={};function QE(t){return cf.call(tg,t)?!0:cf.call(eg,t)?!1:GE.test(t)?tg[t]=!0:(eg[t]=!0,!1)}function YE(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JE(t,e,r,n){if(e===null||typeof e>"u"||YE(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ap=/[\-:]([a-z])/g;function lp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ap,lp);Rt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ap,lp);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ap,lp);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function cp(t,e,r,n){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JE(e,r,s,n)&&(r=null),n||s===null?QE(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Bn=KE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wl=Symbol.for("react.element"),$i=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),up=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),Oy=Symbol.for("react.provider"),Py=Symbol.for("react.context"),dp=Symbol.for("react.forward_ref"),df=Symbol.for("react.suspense"),ff=Symbol.for("react.suspense_list"),fp=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),Ry=Symbol.for("react.offscreen"),rg=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=rg&&t[rg]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Xu;function Zo(t){if(Xu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Xu=e&&e[1]||""}return`
`+Xu+t}var Zu=!1;function ed(t,e){if(!t||Zu)return"";Zu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zu=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Zo(t):""}function XE(t){switch(t.tag){case 5:return Zo(t.type);case 16:return Zo("Lazy");case 13:return Zo("Suspense");case 19:return Zo("SuspenseList");case 0:case 2:case 15:return t=ed(t.type,!1),t;case 11:return t=ed(t.type.render,!1),t;case 1:return t=ed(t.type,!0),t;default:return""}}function hf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case $i:return"Portal";case uf:return"Profiler";case up:return"StrictMode";case df:return"Suspense";case ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Py:return(t.displayName||"Context")+".Consumer";case Oy:return(t._context.displayName||"Context")+".Provider";case dp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fp:return e=t.displayName||null,e!==null?e:hf(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return hf(t(e))}catch{}}return null}function ZE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hf(e);case 8:return e===up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ay(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eC(t){var e=Ay(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=eC(t))}function Iy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Ay(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pf(t,e){var r=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ng(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ks(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dy(t,e){e=e.checked,e!=null&&cp(t,"checked",e,!1)}function mf(t,e){Dy(t,e);var r=ks(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gf(t,e.type,r):e.hasOwnProperty("defaultValue")&&gf(t,e.type,ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function gf(t,e,r){(e!=="number"||wc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ea=Array.isArray;function Ji(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ks(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ig(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(H(92));if(ea(r)){if(1<r.length)throw Error(H(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ks(r)}}function Ly(t,e){var r=ks(e.value),n=ks(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function og(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function My(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?My(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bl,$y=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bl=bl||document.createElement("div"),bl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tC=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){tC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oa[e]=oa[t]})});function Uy(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||oa.hasOwnProperty(t)&&oa[t]?(""+e).trim():e+"px"}function Fy(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Uy(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var rC=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wf(t,e){if(e){if(rC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function xf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=null;function hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _f=null,Xi=null,Zi=null;function ag(t){if(t=il(t)){if(typeof _f!="function")throw Error(H(280));var e=t.stateNode;e&&(e=uu(e),_f(t.stateNode,t.type,e))}}function By(t){Xi?Zi?Zi.push(t):Zi=[t]:Xi=t}function zy(){if(Xi){var t=Xi,e=Zi;if(Zi=Xi=null,ag(t),e)for(t=0;t<e.length;t++)ag(e[t])}}function Wy(t,e){return t(e)}function Hy(){}var td=!1;function Vy(t,e,r){if(td)return t(e,r);td=!0;try{return Wy(t,e,r)}finally{td=!1,(Xi!==null||Zi!==null)&&(Hy(),zy())}}function _a(t,e){var r=t.stateNode;if(r===null)return null;var n=uu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(H(231,e,typeof r));return r}var Sf=!1;if(In)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{Sf=!1}function nC(t,e,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var aa=!1,xc=null,bc=!1,Ef=null,sC={onError:function(t){aa=!0,xc=t}};function iC(t,e,r,n,s,i,o,a,l){aa=!1,xc=null,nC.apply(sC,arguments)}function oC(t,e,r,n,s,i,o,a,l){if(iC.apply(this,arguments),aa){if(aa){var u=xc;aa=!1,xc=null}else throw Error(H(198));bc||(bc=!0,Ef=u)}}function gi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function qy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lg(t){if(gi(t)!==t)throw Error(H(188))}function aC(t){var e=t.alternate;if(!e){if(e=gi(t),e===null)throw Error(H(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return lg(s),t;if(i===n)return lg(s),e;i=i.sibling}throw Error(H(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?t:e}function Ky(t){return t=aC(t),t!==null?Gy(t):null}function Gy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gy(t);if(e!==null)return e;t=t.sibling}return null}var Qy=br.unstable_scheduleCallback,cg=br.unstable_cancelCallback,lC=br.unstable_shouldYield,cC=br.unstable_requestPaint,ot=br.unstable_now,uC=br.unstable_getCurrentPriorityLevel,pp=br.unstable_ImmediatePriority,Yy=br.unstable_UserBlockingPriority,_c=br.unstable_NormalPriority,dC=br.unstable_LowPriority,Jy=br.unstable_IdlePriority,ou=null,yn=null;function fC(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ou,t,void 0,(t.current.flags&128)===128)}catch{}}var Xr=Math.clz32?Math.clz32:mC,hC=Math.log,pC=Math.LN2;function mC(t){return t>>>=0,t===0?32:31-(hC(t)/pC|0)|0}var _l=64,Sl=4194304;function ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=ta(a):(i&=o,i!==0&&(n=ta(i)))}else o=r&~s,o!==0?n=ta(o):i!==0&&(n=ta(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Xr(e),s=1<<r,n|=t[r],e&=~s;return n}function gC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vC(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Xr(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=gC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xy(){var t=_l;return _l<<=1,!(_l&4194240)&&(_l=64),t}function rd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function nl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xr(e),t[e]=r}function yC(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Xr(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function mp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Xr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Le=0;function Zy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ew,gp,tw,rw,nw,kf=!1,El=[],ms=null,gs=null,vs=null,Sa=new Map,Ea=new Map,ss=[],wC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ug(t,e){switch(t){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":Sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function Wo(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=il(e),e!==null&&gp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xC(t,e,r,n,s){switch(e){case"focusin":return ms=Wo(ms,t,e,r,n,s),!0;case"dragenter":return gs=Wo(gs,t,e,r,n,s),!0;case"mouseover":return vs=Wo(vs,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Sa.set(i,Wo(Sa.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ea.set(i,Wo(Ea.get(i)||null,t,e,r,n,s)),!0}return!1}function sw(t){var e=qs(t.target);if(e!==null){var r=gi(e);if(r!==null){if(e=r.tag,e===13){if(e=qy(r),e!==null){t.blockedOn=e,nw(t.priority,function(){tw(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Tf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);bf=n,r.target.dispatchEvent(n),bf=null}else return e=il(r),e!==null&&gp(e),t.blockedOn=r,!1;e.shift()}return!0}function dg(t,e,r){ec(t)&&r.delete(e)}function bC(){kf=!1,ms!==null&&ec(ms)&&(ms=null),gs!==null&&ec(gs)&&(gs=null),vs!==null&&ec(vs)&&(vs=null),Sa.forEach(dg),Ea.forEach(dg)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,kf||(kf=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,bC)))}function Ca(t){function e(s){return Ho(s,t)}if(0<El.length){Ho(El[0],t);for(var r=1;r<El.length;r++){var n=El[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ms!==null&&Ho(ms,t),gs!==null&&Ho(gs,t),vs!==null&&Ho(vs,t),Sa.forEach(e),Ea.forEach(e),r=0;r<ss.length;r++)n=ss[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ss.length&&(r=ss[0],r.blockedOn===null);)sw(r),r.blockedOn===null&&ss.shift()}var eo=Bn.ReactCurrentBatchConfig,Ec=!0;function _C(t,e,r,n){var s=Le,i=eo.transition;eo.transition=null;try{Le=1,vp(t,e,r,n)}finally{Le=s,eo.transition=i}}function SC(t,e,r,n){var s=Le,i=eo.transition;eo.transition=null;try{Le=4,vp(t,e,r,n)}finally{Le=s,eo.transition=i}}function vp(t,e,r,n){if(Ec){var s=Tf(t,e,r,n);if(s===null)fd(t,e,n,Cc,r),ug(t,n);else if(xC(s,t,e,r,n))n.stopPropagation();else if(ug(t,n),e&4&&-1<wC.indexOf(t)){for(;s!==null;){var i=il(s);if(i!==null&&ew(i),i=Tf(t,e,r,n),i===null&&fd(t,e,n,Cc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else fd(t,e,n,null,r)}}var Cc=null;function Tf(t,e,r,n){if(Cc=null,t=hp(n),t=qs(t),t!==null)if(e=gi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=qy(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cc=t,null}function iw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uC()){case pp:return 1;case Yy:return 4;case _c:case dC:return 16;case Jy:return 536870912;default:return 16}default:return 16}}var fs=null,yp=null,tc=null;function ow(){if(tc)return tc;var t,e=yp,r=e.length,n,s="value"in fs?fs.value:fs.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return tc=s.slice(t,1<n?1-n:void 0)}function rc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function fg(){return!1}function Sr(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cl:fg,this.isPropagationStopped=fg,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wp=Sr(Oo),sl=tt({},Oo,{view:0,detail:0}),EC=Sr(sl),nd,sd,Vo,au=tt({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(nd=t.screenX-Vo.screenX,sd=t.screenY-Vo.screenY):sd=nd=0,Vo=t),nd)},movementY:function(t){return"movementY"in t?t.movementY:sd}}),hg=Sr(au),CC=tt({},au,{dataTransfer:0}),kC=Sr(CC),TC=tt({},sl,{relatedTarget:0}),id=Sr(TC),jC=tt({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),NC=Sr(jC),OC=tt({},Oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PC=Sr(OC),RC=tt({},Oo,{data:0}),pg=Sr(RC),AC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DC[t])?!!e[t]:!1}function xp(){return LC}var MC=tt({},sl,{key:function(t){if(t.key){var e=AC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(t){return t.type==="keypress"?rc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$C=Sr(MC),UC=tt({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=Sr(UC),FC=tt({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),BC=Sr(FC),zC=tt({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),WC=Sr(zC),HC=tt({},au,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VC=Sr(HC),qC=[9,13,27,32],bp=In&&"CompositionEvent"in window,la=null;In&&"documentMode"in document&&(la=document.documentMode);var KC=In&&"TextEvent"in window&&!la,aw=In&&(!bp||la&&8<la&&11>=la),gg=" ",vg=!1;function lw(t,e){switch(t){case"keyup":return qC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function GC(t,e){switch(t){case"compositionend":return cw(e);case"keypress":return e.which!==32?null:(vg=!0,gg);case"textInput":return t=e.data,t===gg&&vg?null:t;default:return null}}function QC(t,e){if(Fi)return t==="compositionend"||!bp&&lw(t,e)?(t=ow(),tc=yp=fs=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aw&&e.locale!=="ko"?null:e.data;default:return null}}var YC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YC[t.type]:e==="textarea"}function uw(t,e,r,n){By(n),e=kc(e,"onChange"),0<e.length&&(r=new wp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ca=null,ka=null;function JC(t){bw(t,0)}function lu(t){var e=Wi(t);if(Iy(e))return t}function XC(t,e){if(t==="change")return e}var dw=!1;if(In){var od;if(In){var ad="oninput"in document;if(!ad){var wg=document.createElement("div");wg.setAttribute("oninput","return;"),ad=typeof wg.oninput=="function"}od=ad}else od=!1;dw=od&&(!document.documentMode||9<document.documentMode)}function xg(){ca&&(ca.detachEvent("onpropertychange",fw),ka=ca=null)}function fw(t){if(t.propertyName==="value"&&lu(ka)){var e=[];uw(e,ka,t,hp(t)),Vy(JC,e)}}function ZC(t,e,r){t==="focusin"?(xg(),ca=e,ka=r,ca.attachEvent("onpropertychange",fw)):t==="focusout"&&xg()}function ek(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lu(ka)}function tk(t,e){if(t==="click")return lu(e)}function rk(t,e){if(t==="input"||t==="change")return lu(e)}function nk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:nk;function Ta(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!cf.call(e,s)||!tn(t[s],e[s]))return!1}return!0}function bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _g(t,e){var r=bg(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bg(r)}}function hw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pw(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=wc(t.document)}return e}function _p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sk(t){var e=pw(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&hw(r.ownerDocument.documentElement,r)){if(n!==null&&_p(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=_g(r,i);var o=_g(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ik=In&&"documentMode"in document&&11>=document.documentMode,Bi=null,jf=null,ua=null,Nf=!1;function Sg(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Nf||Bi==null||Bi!==wc(n)||(n=Bi,"selectionStart"in n&&_p(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ua&&Ta(ua,n)||(ua=n,n=kc(jf,"onSelect"),0<n.length&&(e=new wp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bi)))}function kl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var zi={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},ld={},mw={};In&&(mw=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function cu(t){if(ld[t])return ld[t];if(!zi[t])return t;var e=zi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in mw)return ld[t]=e[r];return t}var gw=cu("animationend"),vw=cu("animationiteration"),yw=cu("animationstart"),ww=cu("transitionend"),xw=new Map,Eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){xw.set(t,e),mi(e,[t])}for(var cd=0;cd<Eg.length;cd++){var ud=Eg[cd],ok=ud.toLowerCase(),ak=ud[0].toUpperCase()+ud.slice(1);Os(ok,"on"+ak)}Os(gw,"onAnimationEnd");Os(vw,"onAnimationIteration");Os(yw,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(ww,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function Cg(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,oC(n,e,void 0,t),t.currentTarget=null}function bw(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Cg(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Cg(s,a,u),i=l}}}if(bc)throw t=Ef,bc=!1,Ef=null,t}function qe(t,e){var r=e[If];r===void 0&&(r=e[If]=new Set);var n=t+"__bubble";r.has(n)||(_w(e,t,2,!1),r.add(n))}function dd(t,e,r){var n=0;e&&(n|=4),_w(r,t,n,e)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function ja(t){if(!t[Tl]){t[Tl]=!0,Ny.forEach(function(r){r!=="selectionchange"&&(lk.has(r)||dd(r,!1,t),dd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tl]||(e[Tl]=!0,dd("selectionchange",!1,e))}}function _w(t,e,r,n){switch(iw(e)){case 1:var s=_C;break;case 4:s=SC;break;default:s=vp}r=s.bind(null,e,r,t),s=void 0,!Sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function fd(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qs(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}Vy(function(){var u=i,d=hp(r),h=[];e:{var f=xw.get(t);if(f!==void 0){var m=wp,w=t;switch(t){case"keypress":if(rc(r)===0)break e;case"keydown":case"keyup":m=$C;break;case"focusin":w="focus",m=id;break;case"focusout":w="blur",m=id;break;case"beforeblur":case"afterblur":m=id;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=kC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=BC;break;case gw:case vw:case yw:m=NC;break;case ww:m=WC;break;case"scroll":m=EC;break;case"wheel":m=VC;break;case"copy":case"cut":case"paste":m=PC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=mg}var g=(e&4)!==0,b=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,x;v!==null;){x=v;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=_a(v,y),_!=null&&g.push(Na(v,_,x)))),b)break;v=v.return}0<g.length&&(f=new m(f,w,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==bf&&(w=r.relatedTarget||r.fromElement)&&(qs(w)||w[Dn]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(w=r.relatedTarget||r.toElement,m=u,w=w?qs(w):null,w!==null&&(b=gi(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(g=hg,_="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=mg,_="onPointerLeave",y="onPointerEnter",v="pointer"),b=m==null?f:Wi(m),x=w==null?f:Wi(w),f=new g(_,v+"leave",m,r,d),f.target=b,f.relatedTarget=x,_=null,qs(d)===u&&(g=new g(y,v+"enter",w,r,d),g.target=x,g.relatedTarget=b,_=g),b=_,m&&w)t:{for(g=m,y=w,v=0,x=g;x;x=Ei(x))v++;for(x=0,_=y;_;_=Ei(_))x++;for(;0<v-x;)g=Ei(g),v--;for(;0<x-v;)y=Ei(y),x--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Ei(g),y=Ei(y)}g=null}else g=null;m!==null&&kg(h,f,m,g,!1),w!==null&&b!==null&&kg(h,b,w,g,!0)}}e:{if(f=u?Wi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=XC;else if(yg(f))if(dw)S=rk;else{S=ek;var E=ZC}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=tk);if(S&&(S=S(t,u))){uw(h,S,r,d);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&gf(f,"number",f.value)}switch(E=u?Wi(u):window,t){case"focusin":(yg(E)||E.contentEditable==="true")&&(Bi=E,jf=u,ua=null);break;case"focusout":ua=jf=Bi=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Sg(h,r,d);break;case"selectionchange":if(ik)break;case"keydown":case"keyup":Sg(h,r,d)}var k;if(bp)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Fi?lw(t,r)&&(j="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(aw&&r.locale!=="ko"&&(Fi||j!=="onCompositionStart"?j==="onCompositionEnd"&&Fi&&(k=ow()):(fs=d,yp="value"in fs?fs.value:fs.textContent,Fi=!0)),E=kc(u,j),0<E.length&&(j=new pg(j,t,null,r,d),h.push({event:j,listeners:E}),k?j.data=k:(k=cw(r),k!==null&&(j.data=k)))),(k=KC?GC(t,r):QC(t,r))&&(u=kc(u,"onBeforeInput"),0<u.length&&(d=new pg("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=k))}bw(h,e)})}function Na(t,e,r){return{instance:t,listener:e,currentTarget:r}}function kc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_a(t,r),i!=null&&n.unshift(Na(t,i,s)),i=_a(t,e),i!=null&&n.push(Na(t,i,s))),t=t.return}return n}function Ei(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kg(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=_a(r,i),l!=null&&o.unshift(Na(r,l,a))):s||(l=_a(r,i),l!=null&&o.push(Na(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var ck=/\r\n?/g,uk=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(ck,`
`).replace(uk,"")}function jl(t,e,r){if(e=Tg(e),Tg(t)!==e&&r)throw Error(H(425))}function Tc(){}var Of=null,Pf=null;function Rf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Af=typeof setTimeout=="function"?setTimeout:void 0,dk=typeof clearTimeout=="function"?clearTimeout:void 0,jg=typeof Promise=="function"?Promise:void 0,fk=typeof queueMicrotask=="function"?queueMicrotask:typeof jg<"u"?function(t){return jg.resolve(null).then(t).catch(hk)}:Af;function hk(t){setTimeout(function(){throw t})}function hd(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Ca(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ca(e)}function ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ng(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Po=Math.random().toString(36).slice(2),mn="__reactFiber$"+Po,Oa="__reactProps$"+Po,Dn="__reactContainer$"+Po,If="__reactEvents$"+Po,pk="__reactListeners$"+Po,mk="__reactHandles$"+Po;function qs(t){var e=t[mn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Dn]||r[mn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Ng(t);t!==null;){if(r=t[mn])return r;t=Ng(t)}return e}t=r,r=t.parentNode}return null}function il(t){return t=t[mn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function uu(t){return t[Oa]||null}var Df=[],Hi=-1;function Ps(t){return{current:t}}function Ke(t){0>Hi||(t.current=Df[Hi],Df[Hi]=null,Hi--)}function He(t,e){Hi++,Df[Hi]=t.current,t.current=e}var Ts={},Wt=Ps(Ts),or=Ps(!1),ii=Ts;function yo(t,e){var r=t.type.contextTypes;if(!r)return Ts;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ar(t){return t=t.childContextTypes,t!=null}function jc(){Ke(or),Ke(Wt)}function Og(t,e,r){if(Wt.current!==Ts)throw Error(H(168));He(Wt,e),He(or,r)}function Sw(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(H(108,ZE(t)||"Unknown",s));return tt({},r,n)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,ii=Wt.current,He(Wt,t),He(or,or.current),!0}function Pg(t,e,r){var n=t.stateNode;if(!n)throw Error(H(169));r?(t=Sw(t,e,ii),n.__reactInternalMemoizedMergedChildContext=t,Ke(or),Ke(Wt),He(Wt,t)):Ke(or),He(or,r)}var jn=null,du=!1,pd=!1;function Ew(t){jn===null?jn=[t]:jn.push(t)}function gk(t){du=!0,Ew(t)}function Rs(){if(!pd&&jn!==null){pd=!0;var t=0,e=Le;try{var r=jn;for(Le=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}jn=null,du=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),Qy(pp,Rs),s}finally{Le=e,pd=!1}}return null}var Vi=[],qi=0,Oc=null,Pc=0,jr=[],Nr=0,oi=null,On=1,Pn="";function Bs(t,e){Vi[qi++]=Pc,Vi[qi++]=Oc,Oc=t,Pc=e}function Cw(t,e,r){jr[Nr++]=On,jr[Nr++]=Pn,jr[Nr++]=oi,oi=t;var n=On;t=Pn;var s=32-Xr(n)-1;n&=~(1<<s),r+=1;var i=32-Xr(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,On=1<<32-Xr(e)+s|r<<s|n,Pn=i+t}else On=1<<i|r<<s|n,Pn=t}function Sp(t){t.return!==null&&(Bs(t,1),Cw(t,1,0))}function Ep(t){for(;t===Oc;)Oc=Vi[--qi],Vi[qi]=null,Pc=Vi[--qi],Vi[qi]=null;for(;t===oi;)oi=jr[--Nr],jr[Nr]=null,Pn=jr[--Nr],jr[Nr]=null,On=jr[--Nr],jr[Nr]=null}var wr=null,yr=null,Ye=!1,Qr=null;function kw(t,e){var r=Pr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Rg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wr=t,yr=ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wr=t,yr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=oi!==null?{id:On,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Pr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,wr=t,yr=null,!0):!1;default:return!1}}function Lf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mf(t){if(Ye){var e=yr;if(e){var r=e;if(!Rg(t,e)){if(Lf(t))throw Error(H(418));e=ys(r.nextSibling);var n=wr;e&&Rg(t,e)?kw(n,r):(t.flags=t.flags&-4097|2,Ye=!1,wr=t)}}else{if(Lf(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ye=!1,wr=t}}}function Ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wr=t}function Nl(t){if(t!==wr)return!1;if(!Ye)return Ag(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rf(t.type,t.memoizedProps)),e&&(e=yr)){if(Lf(t))throw Tw(),Error(H(418));for(;e;)kw(t,e),e=ys(e.nextSibling)}if(Ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){yr=ys(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}yr=null}}else yr=wr?ys(t.stateNode.nextSibling):null;return!0}function Tw(){for(var t=yr;t;)t=ys(t.nextSibling)}function wo(){yr=wr=null,Ye=!1}function Cp(t){Qr===null?Qr=[t]:Qr.push(t)}var vk=Bn.ReactCurrentBatchConfig;function qo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,t))}return t}function Ol(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ig(t){var e=t._init;return e(t._payload)}function jw(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=_s(y,v),y.index=0,y.sibling=null,y}function i(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,_){return v===null||v.tag!==6?(v=bd(x,y.mode,_),v.return=y,v):(v=s(v,x),v.return=y,v)}function l(y,v,x,_){var S=x.type;return S===Ui?d(y,v,x.props.children,_,x.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===es&&Ig(S)===v.type)?(_=s(v,x.props),_.ref=qo(y,v,x),_.return=y,_):(_=cc(x.type,x.key,x.props,null,y.mode,_),_.ref=qo(y,v,x),_.return=y,_)}function u(y,v,x,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=_d(x,y.mode,_),v.return=y,v):(v=s(v,x.children||[]),v.return=y,v)}function d(y,v,x,_,S){return v===null||v.tag!==7?(v=ni(x,y.mode,_,S),v.return=y,v):(v=s(v,x),v.return=y,v)}function h(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bd(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wl:return x=cc(v.type,v.key,v.props,null,y.mode,x),x.ref=qo(y,null,v),x.return=y,x;case $i:return v=_d(v,y.mode,x),v.return=y,v;case es:var _=v._init;return h(y,_(v._payload),x)}if(ea(v)||Bo(v))return v=ni(v,y.mode,x,null),v.return=y,v;Ol(y,v)}return null}function f(y,v,x,_){var S=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(y,v,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wl:return x.key===S?l(y,v,x,_):null;case $i:return x.key===S?u(y,v,x,_):null;case es:return S=x._init,f(y,v,S(x._payload),_)}if(ea(x)||Bo(x))return S!==null?null:d(y,v,x,_,null);Ol(y,x)}return null}function m(y,v,x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,a(v,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case wl:return y=y.get(_.key===null?x:_.key)||null,l(v,y,_,S);case $i:return y=y.get(_.key===null?x:_.key)||null,u(v,y,_,S);case es:var E=_._init;return m(y,v,x,E(_._payload),S)}if(ea(_)||Bo(_))return y=y.get(x)||null,d(v,y,_,S,null);Ol(v,_)}return null}function w(y,v,x,_){for(var S=null,E=null,k=v,j=v=0,L=null;k!==null&&j<x.length;j++){k.index>j?(L=k,k=null):L=k.sibling;var M=f(y,k,x[j],_);if(M===null){k===null&&(k=L);break}t&&k&&M.alternate===null&&e(y,k),v=i(M,v,j),E===null?S=M:E.sibling=M,E=M,k=L}if(j===x.length)return r(y,k),Ye&&Bs(y,j),S;if(k===null){for(;j<x.length;j++)k=h(y,x[j],_),k!==null&&(v=i(k,v,j),E===null?S=k:E.sibling=k,E=k);return Ye&&Bs(y,j),S}for(k=n(y,k);j<x.length;j++)L=m(k,y,j,x[j],_),L!==null&&(t&&L.alternate!==null&&k.delete(L.key===null?j:L.key),v=i(L,v,j),E===null?S=L:E.sibling=L,E=L);return t&&k.forEach(function(X){return e(y,X)}),Ye&&Bs(y,j),S}function g(y,v,x,_){var S=Bo(x);if(typeof S!="function")throw Error(H(150));if(x=S.call(x),x==null)throw Error(H(151));for(var E=S=null,k=v,j=v=0,L=null,M=x.next();k!==null&&!M.done;j++,M=x.next()){k.index>j?(L=k,k=null):L=k.sibling;var X=f(y,k,M.value,_);if(X===null){k===null&&(k=L);break}t&&k&&X.alternate===null&&e(y,k),v=i(X,v,j),E===null?S=X:E.sibling=X,E=X,k=L}if(M.done)return r(y,k),Ye&&Bs(y,j),S;if(k===null){for(;!M.done;j++,M=x.next())M=h(y,M.value,_),M!==null&&(v=i(M,v,j),E===null?S=M:E.sibling=M,E=M);return Ye&&Bs(y,j),S}for(k=n(y,k);!M.done;j++,M=x.next())M=m(k,y,j,M.value,_),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?j:M.key),v=i(M,v,j),E===null?S=M:E.sibling=M,E=M);return t&&k.forEach(function(U){return e(y,U)}),Ye&&Bs(y,j),S}function b(y,v,x,_){if(typeof x=="object"&&x!==null&&x.type===Ui&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case wl:e:{for(var S=x.key,E=v;E!==null;){if(E.key===S){if(S=x.type,S===Ui){if(E.tag===7){r(y,E.sibling),v=s(E,x.props.children),v.return=y,y=v;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===es&&Ig(S)===E.type){r(y,E.sibling),v=s(E,x.props),v.ref=qo(y,E,x),v.return=y,y=v;break e}r(y,E);break}else e(y,E);E=E.sibling}x.type===Ui?(v=ni(x.props.children,y.mode,_,x.key),v.return=y,y=v):(_=cc(x.type,x.key,x.props,null,y.mode,_),_.ref=qo(y,v,x),_.return=y,y=_)}return o(y);case $i:e:{for(E=x.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(y,v.sibling),v=s(v,x.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=_d(x,y.mode,_),v.return=y,y=v}return o(y);case es:return E=x._init,b(y,v,E(x._payload),_)}if(ea(x))return w(y,v,x,_);if(Bo(x))return g(y,v,x,_);Ol(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(y,v.sibling),v=s(v,x),v.return=y,y=v):(r(y,v),v=bd(x,y.mode,_),v.return=y,y=v),o(y)):r(y,v)}return b}var xo=jw(!0),Nw=jw(!1),Rc=Ps(null),Ac=null,Ki=null,kp=null;function Tp(){kp=Ki=Ac=null}function jp(t){var e=Rc.current;Ke(Rc),t._currentValue=e}function $f(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function to(t,e){Ac=t,kp=Ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ir=!0),t.firstContext=null)}function Ar(t){var e=t._currentValue;if(kp!==t)if(t={context:t,memoizedValue:e,next:null},Ki===null){if(Ac===null)throw Error(H(308));Ki=t,Ac.dependencies={lanes:0,firstContext:t}}else Ki=Ki.next=t;return e}var Ks=null;function Np(t){Ks===null?Ks=[t]:Ks.push(t)}function Ow(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Np(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ln(t,n)}function Ln(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ts=!1;function Op(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ws(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ne&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ln(t,r)}return s=n.interleaved,s===null?(e.next=e,Np(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ln(t,r)}function nc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,mp(t,r)}}function Dg(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ic(t,e,r,n){var s=t.updateQueue;ts=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,g=a;switch(f=e,m=r,g.tag){case 1:if(w=g.payload,typeof w=="function"){h=w.call(m,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,f=typeof w=="function"?w.call(m,h,f):w,f==null)break e;h=tt({},h,f);break e;case 2:ts=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);li|=o,t.lanes=o,t.memoizedState=h}}function Lg(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(H(191,s));s.call(n)}}}var ol={},wn=Ps(ol),Pa=Ps(ol),Ra=Ps(ol);function Gs(t){if(t===ol)throw Error(H(174));return t}function Pp(t,e){switch(He(Ra,e),He(Pa,t),He(wn,ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yf(e,t)}Ke(wn),He(wn,e)}function bo(){Ke(wn),Ke(Pa),Ke(Ra)}function Rw(t){Gs(Ra.current);var e=Gs(wn.current),r=yf(e,t.type);e!==r&&(He(Pa,t),He(wn,r))}function Rp(t){Pa.current===t&&(Ke(wn),Ke(Pa))}var Ze=Ps(0);function Dc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var md=[];function Ap(){for(var t=0;t<md.length;t++)md[t]._workInProgressVersionPrimary=null;md.length=0}var sc=Bn.ReactCurrentDispatcher,gd=Bn.ReactCurrentBatchConfig,ai=0,et=null,gt=null,_t=null,Lc=!1,da=!1,Aa=0,yk=0;function Lt(){throw Error(H(321))}function Ip(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!tn(t[r],e[r]))return!1;return!0}function Dp(t,e,r,n,s,i){if(ai=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sc.current=t===null||t.memoizedState===null?_k:Sk,t=r(n,s),da){i=0;do{if(da=!1,Aa=0,25<=i)throw Error(H(301));i+=1,_t=gt=null,e.updateQueue=null,sc.current=Ek,t=r(n,s)}while(da)}if(sc.current=Mc,e=gt!==null&&gt.next!==null,ai=0,_t=gt=et=null,Lc=!1,e)throw Error(H(300));return t}function Lp(){var t=Aa!==0;return Aa=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?et.memoizedState=_t=t:_t=_t.next=t,_t}function Ir(){if(gt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=_t===null?et.memoizedState:_t.next;if(e!==null)_t=e,gt=t;else{if(t===null)throw Error(H(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},_t===null?et.memoizedState=_t=t:_t=_t.next=t}return _t}function Ia(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=Ir(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=gt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ai&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,et.lanes|=d,li|=d}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,tn(n,e.memoizedState)||(ir=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,et.lanes|=i,li|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function yd(t){var e=Ir(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);tn(i,e.memoizedState)||(ir=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Aw(){}function Iw(t,e){var r=et,n=Ir(),s=e(),i=!tn(n.memoizedState,s);if(i&&(n.memoizedState=s,ir=!0),n=n.queue,Mp(Mw.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||_t!==null&&_t.memoizedState.tag&1){if(r.flags|=2048,Da(9,Lw.bind(null,r,n,s,e),void 0,null),St===null)throw Error(H(349));ai&30||Dw(r,e,s)}return s}function Dw(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Lw(t,e,r,n){e.value=r,e.getSnapshot=n,$w(e)&&Uw(t)}function Mw(t,e,r){return r(function(){$w(e)&&Uw(t)})}function $w(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!tn(t,r)}catch{return!0}}function Uw(t){var e=Ln(t,1);e!==null&&Zr(e,t,1,-1)}function Mg(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=bk.bind(null,et,t),[e.memoizedState,t]}function Da(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Fw(){return Ir().memoizedState}function ic(t,e,r,n){var s=un();et.flags|=t,s.memoizedState=Da(1|e,r,void 0,n===void 0?null:n)}function fu(t,e,r,n){var s=Ir();n=n===void 0?null:n;var i=void 0;if(gt!==null){var o=gt.memoizedState;if(i=o.destroy,n!==null&&Ip(n,o.deps)){s.memoizedState=Da(e,r,i,n);return}}et.flags|=t,s.memoizedState=Da(1|e,r,i,n)}function $g(t,e){return ic(8390656,8,t,e)}function Mp(t,e){return fu(2048,8,t,e)}function Bw(t,e){return fu(4,2,t,e)}function zw(t,e){return fu(4,4,t,e)}function Ww(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hw(t,e,r){return r=r!=null?r.concat([t]):null,fu(4,4,Ww.bind(null,e,t),r)}function $p(){}function Vw(t,e){var r=Ir();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ip(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function qw(t,e){var r=Ir();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ip(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Kw(t,e,r){return ai&21?(tn(r,e)||(r=Xy(),et.lanes|=r,li|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ir=!0),t.memoizedState=r)}function wk(t,e){var r=Le;Le=r!==0&&4>r?r:4,t(!0);var n=gd.transition;gd.transition={};try{t(!1),e()}finally{Le=r,gd.transition=n}}function Gw(){return Ir().memoizedState}function xk(t,e,r){var n=bs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Qw(t))Yw(e,r);else if(r=Ow(t,e,r,n),r!==null){var s=Yt();Zr(r,t,n,s),Jw(r,e,n)}}function bk(t,e,r){var n=bs(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qw(t))Yw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,tn(a,o)){var l=e.interleaved;l===null?(s.next=s,Np(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=Ow(t,e,s,n),r!==null&&(s=Yt(),Zr(r,t,n,s),Jw(r,e,n))}}function Qw(t){var e=t.alternate;return t===et||e!==null&&e===et}function Yw(t,e){da=Lc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Jw(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,mp(t,r)}}var Mc={readContext:Ar,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},_k={readContext:Ar,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Ar,useEffect:$g,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ic(4194308,4,Ww.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ic(4194308,4,t,e)},useInsertionEffect:function(t,e){return ic(4,2,t,e)},useMemo:function(t,e){var r=un();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=un();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=xk.bind(null,et,t),[n.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:Mg,useDebugValue:$p,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=Mg(!1),e=t[0];return t=wk.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=et,s=un();if(Ye){if(r===void 0)throw Error(H(407));r=r()}else{if(r=e(),St===null)throw Error(H(349));ai&30||Dw(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,$g(Mw.bind(null,n,i,t),[t]),n.flags|=2048,Da(9,Lw.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=un(),e=St.identifierPrefix;if(Ye){var r=Pn,n=On;r=(n&~(1<<32-Xr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Aa++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=yk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sk={readContext:Ar,useCallback:Vw,useContext:Ar,useEffect:Mp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:qw,useReducer:vd,useRef:Fw,useState:function(){return vd(Ia)},useDebugValue:$p,useDeferredValue:function(t){var e=Ir();return Kw(e,gt.memoizedState,t)},useTransition:function(){var t=vd(Ia)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:Aw,useSyncExternalStore:Iw,useId:Gw,unstable_isNewReconciler:!1},Ek={readContext:Ar,useCallback:Vw,useContext:Ar,useEffect:Mp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:qw,useReducer:yd,useRef:Fw,useState:function(){return yd(Ia)},useDebugValue:$p,useDeferredValue:function(t){var e=Ir();return gt===null?e.memoizedState=t:Kw(e,gt.memoizedState,t)},useTransition:function(){var t=yd(Ia)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:Aw,useSyncExternalStore:Iw,useId:Gw,unstable_isNewReconciler:!1};function zr(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Uf(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:tt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var hu={isMounted:function(t){return(t=t._reactInternals)?gi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Yt(),s=bs(t),i=Rn(n,s);i.payload=e,r!=null&&(i.callback=r),e=ws(t,i,s),e!==null&&(Zr(e,t,s,n),nc(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Yt(),s=bs(t),i=Rn(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ws(t,i,s),e!==null&&(Zr(e,t,s,n),nc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Yt(),n=bs(t),s=Rn(r,n);s.tag=2,e!=null&&(s.callback=e),e=ws(t,s,n),e!==null&&(Zr(e,t,n,r),nc(e,t,n))}};function Ug(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(r,n)||!Ta(s,i):!0}function Xw(t,e,r){var n=!1,s=Ts,i=e.contextType;return typeof i=="object"&&i!==null?i=Ar(i):(s=ar(e)?ii:Wt.current,n=e.contextTypes,i=(n=n!=null)?yo(t,s):Ts),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Fg(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&hu.enqueueReplaceState(e,e.state,null)}function Ff(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Op(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ar(i):(i=ar(e)?ii:Wt.current,s.context=yo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Uf(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hu.enqueueReplaceState(s,s.state,null),Ic(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _o(t,e){try{var r="",n=e;do r+=XE(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function wd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Bf(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Ck=typeof WeakMap=="function"?WeakMap:Map;function Zw(t,e,r){r=Rn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Uc||(Uc=!0,Jf=n),Bf(t,e)},r}function ex(t,e,r){r=Rn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Bf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Bf(t,e),typeof n!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Bg(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Ck;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Uk.bind(null,t,e,r),e.then(t,t))}function zg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wg(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Rn(-1,1),e.tag=2,ws(r,e,1))),r.lanes|=1),t)}var kk=Bn.ReactCurrentOwner,ir=!1;function Gt(t,e,r,n){e.child=t===null?Nw(e,null,r,n):xo(e,t.child,r,n)}function Hg(t,e,r,n,s){r=r.render;var i=e.ref;return to(e,s),n=Dp(t,e,r,n,i,s),r=Lp(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Ye&&r&&Sp(e),e.flags|=1,Gt(t,e,n,s),e.child)}function Vg(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!qp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,tx(t,e,i,n,s)):(t=cc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ta,r(o,n)&&t.ref===e.ref)return Mn(t,e,s)}return e.flags|=1,t=_s(i,n),t.ref=e.ref,t.return=e,e.child=t}function tx(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Ta(i,n)&&t.ref===e.ref)if(ir=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(ir=!0);else return e.lanes=t.lanes,Mn(t,e,s)}return zf(t,e,r,n,s)}function rx(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Qi,hr),hr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Qi,hr),hr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,He(Qi,hr),hr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,He(Qi,hr),hr|=n;return Gt(t,e,s,r),e.child}function nx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zf(t,e,r,n,s){var i=ar(r)?ii:Wt.current;return i=yo(e,i),to(e,s),r=Dp(t,e,r,n,i,s),n=Lp(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Ye&&n&&Sp(e),e.flags|=1,Gt(t,e,r,s),e.child)}function qg(t,e,r,n,s){if(ar(r)){var i=!0;Nc(e)}else i=!1;if(to(e,s),e.stateNode===null)oc(t,e),Xw(e,r,n),Ff(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ar(u):(u=ar(r)?ii:Wt.current,u=yo(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Fg(e,o,n,u),ts=!1;var f=e.memoizedState;o.state=f,Ic(e,n,o,s),l=e.memoizedState,a!==n||f!==l||or.current||ts?(typeof d=="function"&&(Uf(e,r,d,n),l=e.memoizedState),(a=ts||Ug(e,r,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Pw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:zr(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ar(l):(l=ar(r)?ii:Wt.current,l=yo(e,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Fg(e,o,n,l),ts=!1,f=e.memoizedState,o.state=f,Ic(e,n,o,s);var w=e.memoizedState;a!==h||f!==w||or.current||ts?(typeof m=="function"&&(Uf(e,r,m,n),w=e.memoizedState),(u=ts||Ug(e,r,u,n,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=w),o.props=n,o.state=w,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Wf(t,e,r,n,i,s)}function Wf(t,e,r,n,s,i){nx(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Pg(e,r,!1),Mn(t,e,i);n=e.stateNode,kk.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=xo(e,t.child,null,i),e.child=xo(e,null,a,i)):Gt(t,e,a,i),e.memoizedState=n.state,s&&Pg(e,r,!0),e.child}function sx(t){var e=t.stateNode;e.pendingContext?Og(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Og(t,e.context,!1),Pp(t,e.containerInfo)}function Kg(t,e,r,n,s){return wo(),Cp(s),e.flags|=256,Gt(t,e,r,n),e.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function Vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function ix(t,e,r){var n=e.pendingProps,s=Ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(Ze,s&1),t===null)return Mf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gu(o,n,0,null),t=ni(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vf(r),e.memoizedState=Hf,t):Up(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Tk(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=_s(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=_s(a,i):(i=ni(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Vf(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Hf,n}return i=t.child,t=i.sibling,n=_s(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Up(t,e){return e=gu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,r,n){return n!==null&&Cp(n),xo(e,t.child,null,r),t=Up(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tk(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=wd(Error(H(422))),Pl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=gu({mode:"visible",children:n.children},s,0,null),i=ni(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&xo(e,t.child,null,o),e.child.memoizedState=Vf(o),e.memoizedState=Hf,i);if(!(e.mode&1))return Pl(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(H(419)),n=wd(i,n,void 0),Pl(t,e,o,n)}if(a=(o&t.childLanes)!==0,ir||a){if(n=St,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ln(t,s),Zr(n,t,s,-1))}return Vp(),n=wd(Error(H(421))),Pl(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Fk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,yr=ys(s.nextSibling),wr=e,Ye=!0,Qr=null,t!==null&&(jr[Nr++]=On,jr[Nr++]=Pn,jr[Nr++]=oi,On=t.id,Pn=t.overflow,oi=e),e=Up(e,n.children),e.flags|=4096,e)}function Gg(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),$f(t.return,e,r)}function xd(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ox(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Gt(t,e,n.children,r),n=Ze.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gg(t,r,e);else if(t.tag===19)Gg(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(He(Ze,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Dc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),xd(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Dc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}xd(e,!0,r,null,i);break;case"together":xd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),li|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,r=_s(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=_s(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function jk(t,e,r){switch(e.tag){case 3:sx(e),wo();break;case 5:Rw(e);break;case 1:ar(e.type)&&Nc(e);break;case 4:Pp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;He(Rc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(He(Ze,Ze.current&1),e.flags|=128,null):r&e.child.childLanes?ix(t,e,r):(He(Ze,Ze.current&1),t=Mn(t,e,r),t!==null?t.sibling:null);He(Ze,Ze.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ox(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(Ze,Ze.current),n)break;return null;case 22:case 23:return e.lanes=0,rx(t,e,r)}return Mn(t,e,r)}var ax,qf,lx,cx;ax=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};qf=function(){};lx=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Gs(wn.current);var i=null;switch(r){case"input":s=pf(t,s),n=pf(t,n),i=[];break;case"select":s=tt({},s,{value:void 0}),n=tt({},n,{value:void 0}),i=[];break;case"textarea":s=vf(t,s),n=vf(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Tc)}wf(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};cx=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ko(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Nk(t,e,r){var n=e.pendingProps;switch(Ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return ar(e.type)&&jc(),Mt(e),null;case 3:return n=e.stateNode,bo(),Ke(or),Ke(Wt),Ap(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Nl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qr!==null&&(eh(Qr),Qr=null))),qf(t,e),Mt(e),null;case 5:Rp(e);var s=Gs(Ra.current);if(r=e.type,t!==null&&e.stateNode!=null)lx(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(H(166));return Mt(e),null}if(t=Gs(wn.current),Nl(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[mn]=e,n[Oa]=i,t=(e.mode&1)!==0,r){case"dialog":qe("cancel",n),qe("close",n);break;case"iframe":case"object":case"embed":qe("load",n);break;case"video":case"audio":for(s=0;s<ra.length;s++)qe(ra[s],n);break;case"source":qe("error",n);break;case"img":case"image":case"link":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"input":ng(n,i),qe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},qe("invalid",n);break;case"textarea":ig(n,i),qe("invalid",n)}wf(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&jl(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jl(n.textContent,a,t),s=["children",""+a]):xa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",n)}switch(r){case"input":xl(n),sg(n,i,!0);break;case"textarea":xl(n),og(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Tc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=My(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[mn]=e,t[Oa]=n,ax(t,e,!1,!1),e.stateNode=t;e:{switch(o=xf(r,n),r){case"dialog":qe("cancel",t),qe("close",t),s=n;break;case"iframe":case"object":case"embed":qe("load",t),s=n;break;case"video":case"audio":for(s=0;s<ra.length;s++)qe(ra[s],t);s=n;break;case"source":qe("error",t),s=n;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=n;break;case"details":qe("toggle",t),s=n;break;case"input":ng(t,n),s=pf(t,n),qe("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=tt({},n,{value:void 0}),qe("invalid",t);break;case"textarea":ig(t,n),s=vf(t,n),qe("invalid",t);break;default:s=n}wf(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Fy(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$y(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&ba(t,l):typeof l=="number"&&ba(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&qe("scroll",t):l!=null&&cp(t,i,l,o))}switch(r){case"input":xl(t),sg(t,n,!1);break;case"textarea":xl(t),og(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ks(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Ji(t,!!n.multiple,i,!1):n.defaultValue!=null&&Ji(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Tc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)cx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(H(166));if(r=Gs(Ra.current),Gs(wn.current),Nl(e)){if(n=e.stateNode,r=e.memoizedProps,n[mn]=e,(i=n.nodeValue!==r)&&(t=wr,t!==null))switch(t.tag){case 3:jl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jl(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[mn]=e,e.stateNode=n}return Mt(e),null;case 13:if(Ke(Ze),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&yr!==null&&e.mode&1&&!(e.flags&128))Tw(),wo(),e.flags|=98560,i=!1;else if(i=Nl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[mn]=e}else wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Qr!==null&&(eh(Qr),Qr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?vt===0&&(vt=3):Vp())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return bo(),qf(t,e),t===null&&ja(e.stateNode.containerInfo),Mt(e),null;case 10:return jp(e.type._context),Mt(e),null;case 17:return ar(e.type)&&jc(),Mt(e),null;case 19:if(Ke(Ze),i=e.memoizedState,i===null)return Mt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Ko(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dc(t),o!==null){for(e.flags|=128,Ko(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return He(Ze,Ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&ot()>So&&(e.flags|=128,n=!0,Ko(i,!1),e.lanes=4194304)}else{if(!n)if(t=Dc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ye)return Mt(e),null}else 2*ot()-i.renderingStartTime>So&&r!==1073741824&&(e.flags|=128,n=!0,Ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ot(),e.sibling=null,r=Ze.current,He(Ze,n?r&1|2:r&1),e):(Mt(e),null);case 22:case 23:return Hp(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?hr&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function Ok(t,e){switch(Ep(e),e.tag){case 1:return ar(e.type)&&jc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bo(),Ke(or),Ke(Wt),Ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rp(e),null;case 13:if(Ke(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(Ze),null;case 4:return bo(),null;case 10:return jp(e.type._context),null;case 22:case 23:return Hp(),null;case 24:return null;default:return null}}var Rl=!1,Ft=!1,Pk=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Gi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){st(t,e,n)}else r.current=null}function Kf(t,e,r){try{r()}catch(n){st(t,e,n)}}var Qg=!1;function Rk(t,e){if(Of=Ec,t=pw(),_p(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(a=o+s),h!==i||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++u===s&&(a=o),f===i&&++d===n&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pf={focusedElem:t,selectionRange:r},Ec=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,b=w.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:zr(e.type,g),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(_){st(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return w=Qg,Qg=!1,w}function fa(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Kf(e,r,i)}s=s.next}while(s!==n)}}function pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Gf(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ux(t){var e=t.alternate;e!==null&&(t.alternate=null,ux(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[Oa],delete e[If],delete e[pk],delete e[mk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dx(t){return t.tag===5||t.tag===3||t.tag===4}function Yg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Tc));else if(n!==4&&(t=t.child,t!==null))for(Qf(t,e,r),t=t.sibling;t!==null;)Qf(t,e,r),t=t.sibling}function Yf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Yf(t,e,r),t=t.sibling;t!==null;)Yf(t,e,r),t=t.sibling}var Nt=null,Kr=!1;function Kn(t,e,r){for(r=r.child;r!==null;)fx(t,e,r),r=r.sibling}function fx(t,e,r){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ou,r)}catch{}switch(r.tag){case 5:Ft||Gi(r,e);case 6:var n=Nt,s=Kr;Nt=null,Kn(t,e,r),Nt=n,Kr=s,Nt!==null&&(Kr?(t=Nt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Nt.removeChild(r.stateNode));break;case 18:Nt!==null&&(Kr?(t=Nt,r=r.stateNode,t.nodeType===8?hd(t.parentNode,r):t.nodeType===1&&hd(t,r),Ca(t)):hd(Nt,r.stateNode));break;case 4:n=Nt,s=Kr,Nt=r.stateNode.containerInfo,Kr=!0,Kn(t,e,r),Nt=n,Kr=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kf(r,e,o),s=s.next}while(s!==n)}Kn(t,e,r);break;case 1:if(!Ft&&(Gi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){st(r,e,a)}Kn(t,e,r);break;case 21:Kn(t,e,r);break;case 22:r.mode&1?(Ft=(n=Ft)||r.memoizedState!==null,Kn(t,e,r),Ft=n):Kn(t,e,r);break;default:Kn(t,e,r)}}function Jg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Pk),e.forEach(function(n){var s=Bk.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function $r(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Nt=a.stateNode,Kr=!1;break e;case 3:Nt=a.stateNode.containerInfo,Kr=!0;break e;case 4:Nt=a.stateNode.containerInfo,Kr=!0;break e}a=a.return}if(Nt===null)throw Error(H(160));fx(i,o,s),Nt=null,Kr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){st(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hx(e,t),e=e.sibling}function hx(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($r(e,t),cn(t),n&4){try{fa(3,t,t.return),pu(3,t)}catch(g){st(t,t.return,g)}try{fa(5,t,t.return)}catch(g){st(t,t.return,g)}}break;case 1:$r(e,t),cn(t),n&512&&r!==null&&Gi(r,r.return);break;case 5:if($r(e,t),cn(t),n&512&&r!==null&&Gi(r,r.return),t.flags&32){var s=t.stateNode;try{ba(s,"")}catch(g){st(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Dy(s,i),xf(a,o);var u=xf(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Fy(s,h):d==="dangerouslySetInnerHTML"?$y(s,h):d==="children"?ba(s,h):cp(s,d,h,u)}switch(a){case"input":mf(s,i);break;case"textarea":Ly(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ji(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ji(s,!!i.multiple,i.defaultValue,!0):Ji(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oa]=i}catch(g){st(t,t.return,g)}}break;case 6:if($r(e,t),cn(t),n&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){st(t,t.return,g)}}break;case 3:if($r(e,t),cn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ca(e.containerInfo)}catch(g){st(t,t.return,g)}break;case 4:$r(e,t),cn(t);break;case 13:$r(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zp=ot())),n&4&&Jg(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ft=(u=Ft)||d,$r(e,t),Ft=u):$r(e,t),cn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Z=t,d=t.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,m=f.child,f.tag){case 0:case 11:case 14:case 15:fa(4,f,f.return);break;case 1:Gi(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(g){st(n,r,g)}}break;case 5:Gi(f,f.return);break;case 22:if(f.memoizedState!==null){Zg(h);continue}}m!==null?(m.return=f,Z=m):Zg(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Uy("display",o))}catch(g){st(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){st(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$r(e,t),cn(t),n&4&&Jg(t);break;case 21:break;default:$r(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(dx(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ba(s,""),n.flags&=-33);var i=Yg(t);Yf(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Yg(t);Qf(t,a,o);break;default:throw Error(H(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ak(t,e,r){Z=t,px(t)}function px(t,e,r){for(var n=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Rl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=Rl;var u=Ft;if(Rl=o,(Ft=l)&&!u)for(Z=s;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?ev(s):l!==null?(l.return=o,Z=l):ev(s);for(;i!==null;)Z=i,px(i),i=i.sibling;Z=s,Rl=a,Ft=u}Xg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):Xg(t)}}function Xg(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||pu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ft)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:zr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lg(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Lg(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ca(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ft||e.flags&512&&Gf(e)}catch(f){st(e,e.return,f)}}if(e===t){Z=null;break}if(r=e.sibling,r!==null){r.return=e.return,Z=r;break}Z=e.return}}function Zg(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Z=r;break}Z=e.return}}function ev(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{pu(4,e)}catch(l){st(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){st(e,s,l)}}var i=e.return;try{Gf(e)}catch(l){st(e,i,l)}break;case 5:var o=e.return;try{Gf(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var Ik=Math.ceil,$c=Bn.ReactCurrentDispatcher,Fp=Bn.ReactCurrentOwner,Rr=Bn.ReactCurrentBatchConfig,Ne=0,St=null,dt=null,Pt=0,hr=0,Qi=Ps(0),vt=0,La=null,li=0,mu=0,Bp=0,ha=null,nr=null,zp=0,So=1/0,kn=null,Uc=!1,Jf=null,xs=null,Al=!1,hs=null,Fc=0,pa=0,Xf=null,ac=-1,lc=0;function Yt(){return Ne&6?ot():ac!==-1?ac:ac=ot()}function bs(t){return t.mode&1?Ne&2&&Pt!==0?Pt&-Pt:vk.transition!==null?(lc===0&&(lc=Xy()),lc):(t=Le,t!==0||(t=window.event,t=t===void 0?16:iw(t.type)),t):1}function Zr(t,e,r,n){if(50<pa)throw pa=0,Xf=null,Error(H(185));nl(t,r,n),(!(Ne&2)||t!==St)&&(t===St&&(!(Ne&2)&&(mu|=r),vt===4&&is(t,Pt)),lr(t,n),r===1&&Ne===0&&!(e.mode&1)&&(So=ot()+500,du&&Rs()))}function lr(t,e){var r=t.callbackNode;vC(t,e);var n=Sc(t,t===St?Pt:0);if(n===0)r!==null&&cg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&cg(r),e===1)t.tag===0?gk(tv.bind(null,t)):Ew(tv.bind(null,t)),fk(function(){!(Ne&6)&&Rs()}),r=null;else{switch(Zy(n)){case 1:r=pp;break;case 4:r=Yy;break;case 16:r=_c;break;case 536870912:r=Jy;break;default:r=_c}r=_x(r,mx.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function mx(t,e){if(ac=-1,lc=0,Ne&6)throw Error(H(327));var r=t.callbackNode;if(ro()&&t.callbackNode!==r)return null;var n=Sc(t,t===St?Pt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Bc(t,n);else{e=n;var s=Ne;Ne|=2;var i=vx();(St!==t||Pt!==e)&&(kn=null,So=ot()+500,ri(t,e));do try{Mk();break}catch(a){gx(t,a)}while(!0);Tp(),$c.current=i,Ne=s,dt!==null?e=0:(St=null,Pt=0,e=vt)}if(e!==0){if(e===2&&(s=Cf(t),s!==0&&(n=s,e=Zf(t,s))),e===1)throw r=La,ri(t,0),is(t,n),lr(t,ot()),r;if(e===6)is(t,n);else{if(s=t.current.alternate,!(n&30)&&!Dk(s)&&(e=Bc(t,n),e===2&&(i=Cf(t),i!==0&&(n=i,e=Zf(t,i))),e===1))throw r=La,ri(t,0),is(t,n),lr(t,ot()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(H(345));case 2:zs(t,nr,kn);break;case 3:if(is(t,n),(n&130023424)===n&&(e=zp+500-ot(),10<e)){if(Sc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Af(zs.bind(null,t,nr,kn),e);break}zs(t,nr,kn);break;case 4:if(is(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Xr(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ik(n/1960))-n,10<n){t.timeoutHandle=Af(zs.bind(null,t,nr,kn),n);break}zs(t,nr,kn);break;case 5:zs(t,nr,kn);break;default:throw Error(H(329))}}}return lr(t,ot()),t.callbackNode===r?mx.bind(null,t):null}function Zf(t,e){var r=ha;return t.current.memoizedState.isDehydrated&&(ri(t,e).flags|=256),t=Bc(t,e),t!==2&&(e=nr,nr=r,e!==null&&eh(e)),t}function eh(t){nr===null?nr=t:nr.push.apply(nr,t)}function Dk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!tn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~Bp,e&=~mu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Xr(e),n=1<<r;t[r]=-1,e&=~n}}function tv(t){if(Ne&6)throw Error(H(327));ro();var e=Sc(t,0);if(!(e&1))return lr(t,ot()),null;var r=Bc(t,e);if(t.tag!==0&&r===2){var n=Cf(t);n!==0&&(e=n,r=Zf(t,n))}if(r===1)throw r=La,ri(t,0),is(t,e),lr(t,ot()),r;if(r===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zs(t,nr,kn),lr(t,ot()),null}function Wp(t,e){var r=Ne;Ne|=1;try{return t(e)}finally{Ne=r,Ne===0&&(So=ot()+500,du&&Rs())}}function ci(t){hs!==null&&hs.tag===0&&!(Ne&6)&&ro();var e=Ne;Ne|=1;var r=Rr.transition,n=Le;try{if(Rr.transition=null,Le=1,t)return t()}finally{Le=n,Rr.transition=r,Ne=e,!(Ne&6)&&Rs()}}function Hp(){hr=Qi.current,Ke(Qi)}function ri(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,dk(r)),dt!==null)for(r=dt.return;r!==null;){var n=r;switch(Ep(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&jc();break;case 3:bo(),Ke(or),Ke(Wt),Ap();break;case 5:Rp(n);break;case 4:bo();break;case 13:Ke(Ze);break;case 19:Ke(Ze);break;case 10:jp(n.type._context);break;case 22:case 23:Hp()}r=r.return}if(St=t,dt=t=_s(t.current,null),Pt=hr=e,vt=0,La=null,Bp=mu=li=0,nr=ha=null,Ks!==null){for(e=0;e<Ks.length;e++)if(r=Ks[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ks=null}return t}function gx(t,e){do{var r=dt;try{if(Tp(),sc.current=Mc,Lc){for(var n=et.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Lc=!1}if(ai=0,_t=gt=et=null,da=!1,Aa=0,Fp.current=null,r===null||r.return===null){vt=1,La=e,dt=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=zg(o);if(m!==null){m.flags&=-257,Wg(m,o,a,i,e),m.mode&1&&Bg(i,u,e),e=m,l=u;var w=e.updateQueue;if(w===null){var g=new Set;g.add(l),e.updateQueue=g}else w.add(l);break e}else{if(!(e&1)){Bg(i,u,e),Vp();break e}l=Error(H(426))}}else if(Ye&&a.mode&1){var b=zg(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Wg(b,o,a,i,e),Cp(_o(l,a));break e}}i=l=_o(l,a),vt!==4&&(vt=2),ha===null?ha=[i]:ha.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Zw(i,l,e);Dg(i,y);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xs===null||!xs.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=ex(i,a,e);Dg(i,_);break e}}i=i.return}while(i!==null)}wx(r)}catch(S){e=S,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function vx(){var t=$c.current;return $c.current=Mc,t===null?Mc:t}function Vp(){(vt===0||vt===3||vt===2)&&(vt=4),St===null||!(li&268435455)&&!(mu&268435455)||is(St,Pt)}function Bc(t,e){var r=Ne;Ne|=2;var n=vx();(St!==t||Pt!==e)&&(kn=null,ri(t,e));do try{Lk();break}catch(s){gx(t,s)}while(!0);if(Tp(),Ne=r,$c.current=n,dt!==null)throw Error(H(261));return St=null,Pt=0,vt}function Lk(){for(;dt!==null;)yx(dt)}function Mk(){for(;dt!==null&&!lC();)yx(dt)}function yx(t){var e=bx(t.alternate,t,hr);t.memoizedProps=t.pendingProps,e===null?wx(t):dt=e,Fp.current=null}function wx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ok(r,e),r!==null){r.flags&=32767,dt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,dt=null;return}}else if(r=Nk(r,e,hr),r!==null){dt=r;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);vt===0&&(vt=5)}function zs(t,e,r){var n=Le,s=Rr.transition;try{Rr.transition=null,Le=1,$k(t,e,r,n)}finally{Rr.transition=s,Le=n}return null}function $k(t,e,r,n){do ro();while(hs!==null);if(Ne&6)throw Error(H(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(yC(t,i),t===St&&(dt=St=null,Pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Al||(Al=!0,_x(_c,function(){return ro(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Rr.transition,Rr.transition=null;var o=Le;Le=1;var a=Ne;Ne|=4,Fp.current=null,Rk(t,r),hx(r,t),sk(Pf),Ec=!!Of,Pf=Of=null,t.current=r,Ak(r),cC(),Ne=a,Le=o,Rr.transition=i}else t.current=r;if(Al&&(Al=!1,hs=t,Fc=s),i=t.pendingLanes,i===0&&(xs=null),fC(r.stateNode),lr(t,ot()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,t=Jf,Jf=null,t;return Fc&1&&t.tag!==0&&ro(),i=t.pendingLanes,i&1?t===Xf?pa++:(pa=0,Xf=t):pa=0,Rs(),null}function ro(){if(hs!==null){var t=Zy(Fc),e=Rr.transition,r=Le;try{if(Rr.transition=null,Le=16>t?16:t,hs===null)var n=!1;else{if(t=hs,hs=null,Fc=0,Ne&6)throw Error(H(331));var s=Ne;for(Ne|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:fa(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,m=d.return;if(ux(d),d===u){Z=null;break}if(f!==null){f.return=m,Z=f;break}Z=m}}}var w=i.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fa(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Z=y;break e}Z=i.return}}var v=t.current;for(Z=v;Z!==null;){o=Z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Z=x;else e:for(o=v;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pu(9,a)}}catch(S){st(a,a.return,S)}if(a===o){Z=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Z=_;break e}Z=a.return}}if(Ne=s,Rs(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ou,t)}catch{}n=!0}return n}finally{Le=r,Rr.transition=e}}return!1}function rv(t,e,r){e=_o(r,e),e=Zw(t,e,1),t=ws(t,e,1),e=Yt(),t!==null&&(nl(t,1,e),lr(t,e))}function st(t,e,r){if(t.tag===3)rv(t,t,r);else for(;e!==null;){if(e.tag===3){rv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xs===null||!xs.has(n))){t=_o(r,t),t=ex(e,t,1),e=ws(e,t,1),t=Yt(),e!==null&&(nl(e,1,t),lr(e,t));break}}e=e.return}}function Uk(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&r,St===t&&(Pt&r)===r&&(vt===4||vt===3&&(Pt&130023424)===Pt&&500>ot()-zp?ri(t,0):Bp|=r),lr(t,e)}function xx(t,e){e===0&&(t.mode&1?(e=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):e=1);var r=Yt();t=Ln(t,e),t!==null&&(nl(t,e,r),lr(t,r))}function Fk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),xx(t,r)}function Bk(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(e),xx(t,r)}var bx;bx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||or.current)ir=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ir=!1,jk(t,e,r);ir=!!(t.flags&131072)}else ir=!1,Ye&&e.flags&1048576&&Cw(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;oc(t,e),t=e.pendingProps;var s=yo(e,Wt.current);to(e,r),s=Dp(null,e,n,t,s,r);var i=Lp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ar(n)?(i=!0,Nc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Op(e),s.updater=hu,e.stateNode=s,s._reactInternals=e,Ff(e,n,t,r),e=Wf(null,e,n,!0,i,r)):(e.tag=0,Ye&&i&&Sp(e),Gt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(oc(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Wk(n),t=zr(n,t),s){case 0:e=zf(null,e,n,t,r);break e;case 1:e=qg(null,e,n,t,r);break e;case 11:e=Hg(null,e,n,t,r);break e;case 14:e=Vg(null,e,n,zr(n.type,t),r);break e}throw Error(H(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zr(n,s),zf(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zr(n,s),qg(t,e,n,s,r);case 3:e:{if(sx(e),t===null)throw Error(H(387));n=e.pendingProps,i=e.memoizedState,s=i.element,Pw(t,e),Ic(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_o(Error(H(423)),e),e=Kg(t,e,n,r,s);break e}else if(n!==s){s=_o(Error(H(424)),e),e=Kg(t,e,n,r,s);break e}else for(yr=ys(e.stateNode.containerInfo.firstChild),wr=e,Ye=!0,Qr=null,r=Nw(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wo(),n===s){e=Mn(t,e,r);break e}Gt(t,e,n,r)}e=e.child}return e;case 5:return Rw(e),t===null&&Mf(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Rf(n,s)?o=null:i!==null&&Rf(n,i)&&(e.flags|=32),nx(t,e),Gt(t,e,o,r),e.child;case 6:return t===null&&Mf(e),null;case 13:return ix(t,e,r);case 4:return Pp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=xo(e,null,n,r):Gt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zr(n,s),Hg(t,e,n,s,r);case 7:return Gt(t,e,e.pendingProps,r),e.child;case 8:return Gt(t,e,e.pendingProps.children,r),e.child;case 12:return Gt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,He(Rc,n._currentValue),n._currentValue=o,i!==null)if(tn(i.value,o)){if(i.children===s.children&&!or.current){e=Mn(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Rn(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),$f(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),$f(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,to(e,r),s=Ar(s),n=n(s),e.flags|=1,Gt(t,e,n,r),e.child;case 14:return n=e.type,s=zr(n,e.pendingProps),s=zr(n.type,s),Vg(t,e,n,s,r);case 15:return tx(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zr(n,s),oc(t,e),e.tag=1,ar(n)?(t=!0,Nc(e)):t=!1,to(e,r),Xw(e,n,s),Ff(e,n,s,r),Wf(null,e,n,!0,t,r);case 19:return ox(t,e,r);case 22:return rx(t,e,r)}throw Error(H(156,e.tag))};function _x(t,e){return Qy(t,e)}function zk(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(t,e,r,n){return new zk(t,e,r,n)}function qp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wk(t){if(typeof t=="function")return qp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dp)return 11;if(t===fp)return 14}return 2}function _s(t,e){var r=t.alternate;return r===null?(r=Pr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function cc(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")qp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ui:return ni(r.children,s,i,e);case up:o=8,s|=8;break;case uf:return t=Pr(12,r,e,s|2),t.elementType=uf,t.lanes=i,t;case df:return t=Pr(13,r,e,s),t.elementType=df,t.lanes=i,t;case ff:return t=Pr(19,r,e,s),t.elementType=ff,t.lanes=i,t;case Ry:return gu(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Oy:o=10;break e;case Py:o=9;break e;case dp:o=11;break e;case fp:o=14;break e;case es:o=16,n=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Pr(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function ni(t,e,r,n){return t=Pr(7,t,n,e),t.lanes=r,t}function gu(t,e,r,n){return t=Pr(22,t,n,e),t.elementType=Ry,t.lanes=r,t.stateNode={isHidden:!1},t}function bd(t,e,r){return t=Pr(6,t,null,e),t.lanes=r,t}function _d(t,e,r){return e=Pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hk(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kp(t,e,r,n,s,i,o,a,l){return t=new Hk(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Op(i),t}function Vk(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$i,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Sx(t){if(!t)return Ts;t=t._reactInternals;e:{if(gi(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var r=t.type;if(ar(r))return Sw(t,r,e)}return e}function Ex(t,e,r,n,s,i,o,a,l){return t=Kp(r,n,!0,t,s,i,o,a,l),t.context=Sx(null),r=t.current,n=Yt(),s=bs(r),i=Rn(n,s),i.callback=e??null,ws(r,i,s),t.current.lanes=s,nl(t,s,n),lr(t,n),t}function vu(t,e,r,n){var s=e.current,i=Yt(),o=bs(s);return r=Sx(r),e.context===null?e.context=r:e.pendingContext=r,e=Rn(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ws(s,e,o),t!==null&&(Zr(t,s,o,i),nc(t,s,o)),o}function zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Gp(t,e){nv(t,e),(t=t.alternate)&&nv(t,e)}function qk(){return null}var Cx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qp(t){this._internalRoot=t}yu.prototype.render=Qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));vu(t,e,null,null)};yu.prototype.unmount=Qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ci(function(){vu(null,t,null,null)}),e[Dn]=null}};function yu(t){this._internalRoot=t}yu.prototype.unstable_scheduleHydration=function(t){if(t){var e=rw();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ss.length&&e!==0&&e<ss[r].priority;r++);ss.splice(r,0,t),r===0&&sw(t)}};function Yp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sv(){}function Kk(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=zc(o);i.call(u)}}var o=Ex(e,n,t,0,null,!1,!1,"",sv);return t._reactRootContainer=o,t[Dn]=o.current,ja(t.nodeType===8?t.parentNode:t),ci(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=zc(l);a.call(u)}}var l=Kp(t,0,!1,null,null,!1,!1,"",sv);return t._reactRootContainer=l,t[Dn]=l.current,ja(t.nodeType===8?t.parentNode:t),ci(function(){vu(e,l,r,n)}),l}function xu(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=zc(o);a.call(l)}}vu(e,o,t,s)}else o=Kk(r,e,t,s,n);return zc(o)}ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ta(e.pendingLanes);r!==0&&(mp(e,r|1),lr(e,ot()),!(Ne&6)&&(So=ot()+500,Rs()))}break;case 13:ci(function(){var n=Ln(t,1);if(n!==null){var s=Yt();Zr(n,t,1,s)}}),Gp(t,1)}};gp=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var r=Yt();Zr(e,t,134217728,r)}Gp(t,134217728)}};tw=function(t){if(t.tag===13){var e=bs(t),r=Ln(t,e);if(r!==null){var n=Yt();Zr(r,t,e,n)}Gp(t,e)}};rw=function(){return Le};nw=function(t,e){var r=Le;try{return Le=t,e()}finally{Le=r}};_f=function(t,e,r){switch(e){case"input":if(mf(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=uu(n);if(!s)throw Error(H(90));Iy(n),mf(n,s)}}}break;case"textarea":Ly(t,r);break;case"select":e=r.value,e!=null&&Ji(t,!!r.multiple,e,!1)}};Wy=Wp;Hy=ci;var Gk={usingClientEntryPoint:!1,Events:[il,Wi,uu,By,zy,Wp]},Go={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qk={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ky(t),t===null?null:t.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{ou=Il.inject(Qk),yn=Il}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk;_r.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yp(e))throw Error(H(200));return Vk(t,e,null,r)};_r.createRoot=function(t,e){if(!Yp(t))throw Error(H(299));var r=!1,n="",s=Cx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kp(t,1,!1,null,null,r,!1,n,s),t[Dn]=e.current,ja(t.nodeType===8?t.parentNode:t),new Qp(e)};_r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Ky(e),t=t===null?null:t.stateNode,t};_r.flushSync=function(t){return ci(t)};_r.hydrate=function(t,e,r){if(!wu(e))throw Error(H(200));return xu(null,t,e,!0,r)};_r.hydrateRoot=function(t,e,r){if(!Yp(t))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Cx;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Ex(e,null,t,1,r??null,s,!1,i,o),t[Dn]=e.current,ja(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new yu(e)};_r.render=function(t,e,r){if(!wu(e))throw Error(H(200));return xu(null,t,e,!1,r)};_r.unmountComponentAtNode=function(t){if(!wu(t))throw Error(H(40));return t._reactRootContainer?(ci(function(){xu(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};_r.unstable_batchedUpdates=Wp;_r.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!wu(r))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return xu(t,e,r,!1,n)};_r.version="18.3.1-next-f1338f8080-20240426";function kx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kx)}catch(t){console.error(t)}}kx(),ky.exports=_r;var vi=ky.exports;const Tx=py(vi);var jx,iv=vi;jx=iv.createRoot,iv.hydrateRoot;const Yk=1,Jk=1e6;let Sd=0;function Xk(){return Sd=(Sd+1)%Number.MAX_SAFE_INTEGER,Sd.toString()}const Ed=new Map,ov=t=>{if(Ed.has(t))return;const e=setTimeout(()=>{Ed.delete(t),ma({type:"REMOVE_TOAST",toastId:t})},Jk);Ed.set(t,e)},Zk=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Yk)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?ov(r):t.toasts.forEach(n=>{ov(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},uc=[];let dc={toasts:[]};function ma(t){dc=Zk(dc,t),uc.forEach(e=>{e(dc)})}function e2({...t}){const e=Xk(),r=s=>ma({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>ma({type:"DISMISS_TOAST",toastId:e});return ma({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function yi(){const[t,e]=p.useState(dc);return p.useEffect(()=>(uc.push(e),()=>{const r=uc.indexOf(e);r>-1&&uc.splice(r,1)}),[t]),{...t,toast:e2,dismiss:r=>ma({type:"DISMISS_TOAST",toastId:r})}}function ue(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function av(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Nx(...t){return e=>{let r=!1;const n=t.map(s=>{const i=av(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():av(t[s],null)}}}}function Ue(...t){return p.useCallback(Nx(...t),t)}function t2(t,e){const r=p.createContext(e),n=i=>{const{children:o,...a}=i,l=p.useMemo(()=>a,Object.values(a));return c.jsx(r.Provider,{value:l,children:o})};n.displayName=t+"Provider";function s(i){const o=p.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,s]}function zn(t,e=[]){let r=[];function n(i,o){const a=p.createContext(o),l=r.length;r=[...r,o];const u=h=>{var y;const{scope:f,children:m,...w}=h,g=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,b=p.useMemo(()=>w,Object.values(w));return c.jsx(g.Provider,{value:b,children:m})};u.displayName=i+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,w=p.useContext(m);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[n,r2(s,...e)]}function r2(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...a,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Eo(t){const e=s2(t),r=p.forwardRef((n,s)=>{const{children:i,...o}=n,a=p.Children.toArray(i),l=a.find(i2);if(l){const u=l.props.children,d=a.map(h=>h===l?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}var n2=Eo("Slot");function s2(t){const e=p.forwardRef((r,n)=>{const{children:s,...i}=r;if(p.isValidElement(s)){const o=a2(s),a=o2(i,s.props);return s.type!==p.Fragment&&(a.ref=n?Nx(n,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ox=Symbol("radix.slottable");function Px(t){const e=({children:r})=>c.jsx(c.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=Ox,e}function i2(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ox}function o2(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function a2(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Jp(t){const e=t+"CollectionProvider",[r,n]=zn(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:y}=g,v=Y.useRef(null),x=Y.useRef(new Map).current;return c.jsx(s,{scope:b,itemMap:x,collectionRef:v,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Eo(a),u=Y.forwardRef((g,b)=>{const{scope:y,children:v}=g,x=i(a,y),_=Ue(b,x.collectionRef);return c.jsx(l,{ref:_,children:v})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Eo(d),m=Y.forwardRef((g,b)=>{const{scope:y,children:v,...x}=g,_=Y.useRef(null),S=Ue(b,_),E=i(d,y);return Y.useEffect(()=>(E.itemMap.set(_,{ref:_,...x}),()=>void E.itemMap.delete(_))),c.jsx(f,{[h]:"",ref:S,children:v})});m.displayName=d;function w(g){const b=i(t+"CollectionConsumer",g);return Y.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((E,k)=>x.indexOf(E.ref.current)-x.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},w,n]}var l2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ke=l2.reduce((t,e)=>{const r=Eo(`Primitive.${e}`),n=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Rx(t,e){t&&vi.flushSync(()=>t.dispatchEvent(e))}function Dr(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function c2(t,e=globalThis==null?void 0:globalThis.document){const r=Dr(t);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var u2="DismissableLayer",th="dismissableLayer.update",d2="dismissableLayer.pointerDownOutside",f2="dismissableLayer.focusOutside",lv,Ax=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),al=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,u=p.useContext(Ax),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),w=Ue(e,k=>h(k)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),v=d?g.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,_=v>=y,S=p2(k=>{const j=k.target,L=[...u.branches].some(M=>M.contains(j));!_||L||(s==null||s(k),o==null||o(k),k.defaultPrevented||a==null||a())},f),E=m2(k=>{const j=k.target;[...u.branches].some(M=>M.contains(j))||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},f);return c2(k=>{v===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},f),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lv=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),cv(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=lv)}},[d,f,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),cv())},[d,u]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(th,k),()=>document.removeEventListener(th,k)},[]),c.jsx(ke.div,{...l,ref:w,style:{pointerEvents:x?_?"auto":"none":void 0,...t.style},onFocusCapture:ue(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ue(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ue(t.onPointerDownCapture,S.onPointerDownCapture)})});al.displayName=u2;var h2="DismissableLayerBranch",Ix=p.forwardRef((t,e)=>{const r=p.useContext(Ax),n=p.useRef(null),s=Ue(e,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),c.jsx(ke.div,{...t,ref:s})});Ix.displayName=h2;function p2(t,e=globalThis==null?void 0:globalThis.document){const r=Dr(t),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){Dx(d2,r,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function m2(t,e=globalThis==null?void 0:globalThis.document){const r=Dr(t),n=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!n.current&&Dx(f2,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function cv(){const t=new CustomEvent(th);document.dispatchEvent(t)}function Dx(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Rx(s,i):s.dispatchEvent(i)}var g2=al,v2=Ix,At=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},y2="Portal",bu=p.forwardRef((t,e)=>{var a;const{container:r,...n}=t,[s,i]=p.useState(!1);At(()=>i(!0),[]);const o=r||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Tx.createPortal(c.jsx(ke.div,{...n,ref:e}),o):null});bu.displayName=y2;function w2(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var wi=t=>{const{present:e,children:r}=t,n=x2(e),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=Ue(n.ref,b2(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:i}):null};wi.displayName="Presence";function x2(t){const[e,r]=p.useState(),n=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,l]=w2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Dl(n.current);i.current=a==="mounted"?u:"none"},[a]),At(()=>{const u=n.current,d=s.current;if(d!==t){const f=i.current,m=Dl(u);t?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),At(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const g=Dl(n.current).includes(m.animationName);if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=m=>{m.target===e&&(i.current=Dl(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Dl(t){return(t==null?void 0:t.animationName)||"none"}function b2(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var _2=op[" useInsertionEffect ".trim().toString()]||At;function Co({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,i,o]=S2({defaultProp:e,onChange:r}),a=t!==void 0,l=a?t:s;{const d=p.useRef(t!==void 0);p.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,n])}const u=p.useCallback(d=>{var h;if(a){const f=E2(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,u]}function S2({defaultProp:t,onChange:e}){const[r,n]=p.useState(t),s=p.useRef(r),i=p.useRef(e);return _2(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function E2(t){return typeof t=="function"}var Lx=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),C2="VisuallyHidden",_u=p.forwardRef((t,e)=>c.jsx(ke.span,{...t,ref:e,style:{...Lx,...t.style}}));_u.displayName=C2;var k2=_u,Xp="ToastProvider",[Zp,T2,j2]=Jp("Toast"),[Mx,SM]=zn("Toast",[j2]),[N2,Su]=Mx(Xp),$x=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Xp}\`. Expected non-empty \`string\`.`),c.jsx(Zp.Provider,{scope:e,children:c.jsx(N2,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};$x.displayName=Xp;var Ux="ToastViewport",O2=["F8"],rh="toast.viewportPause",nh="toast.viewportResume",Fx=p.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=O2,label:s="Notifications ({hotkey})",...i}=t,o=Su(Ux,r),a=T2(r),l=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=Ue(e,h,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;p.useEffect(()=>{const b=y=>{var x;n.length!==0&&n.every(_=>y[_]||y.code===_)&&((x=h.current)==null||x.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),p.useEffect(()=>{const b=l.current,y=h.current;if(w&&b&&y){const v=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(rh);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(nh);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},_=E=>{!b.contains(E.relatedTarget)&&x()},S=()=>{b.contains(document.activeElement)||x()};return b.addEventListener("focusin",v),b.addEventListener("focusout",_),b.addEventListener("pointermove",v),b.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{b.removeEventListener("focusin",v),b.removeEventListener("focusout",_),b.removeEventListener("pointermove",v),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[w,o.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:b})=>{const v=a().map(x=>{const _=x.ref.current,S=[_,...W2(_)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?v.reverse():v).flat()},[a]);return p.useEffect(()=>{const b=h.current;if(b){const y=v=>{var S,E,k;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const j=document.activeElement,L=v.shiftKey;if(v.target===b&&L){(S=u.current)==null||S.focus();return}const U=g({tabbingDirection:L?"backwards":"forwards"}),V=U.findIndex(O=>O===j);Cd(U.slice(V+1))?v.preventDefault():L?(E=u.current)==null||E.focus():(k=d.current)==null||k.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[a,g]),c.jsxs(v2,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&c.jsx(sh,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});Cd(b)}}),c.jsx(Zp.Slot,{scope:r,children:c.jsx(ke.ol,{tabIndex:-1,...i,ref:f})}),w&&c.jsx(sh,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});Cd(b)}})]})});Fx.displayName=Ux;var Bx="ToastFocusProxy",sh=p.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=Su(Bx,r);return c.jsx(_u,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&n()}})});sh.displayName=Bx;var ll="Toast",P2="toast.swipeStart",R2="toast.swipeMove",A2="toast.swipeCancel",I2="toast.swipeEnd",zx=p.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=Co({prop:n,defaultProp:s??!0,onChange:i,caller:ll});return c.jsx(wi,{present:r||a,children:c.jsx(M2,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Dr(t.onPause),onResume:Dr(t.onResume),onSwipeStart:ue(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ue(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});zx.displayName=ll;var[D2,L2]=Mx(ll,{onClose(){}}),M2=p.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...w}=t,g=Su(ll,r),[b,y]=p.useState(null),v=Ue(e,O=>y(O)),x=p.useRef(null),_=p.useRef(null),S=s||g.duration,E=p.useRef(0),k=p.useRef(S),j=p.useRef(0),{onToastAdd:L,onToastRemove:M}=g,X=Dr(()=>{var W;(b==null?void 0:b.contains(document.activeElement))&&((W=g.viewport)==null||W.focus()),o()}),U=p.useCallback(O=>{!O||O===1/0||(window.clearTimeout(j.current),E.current=new Date().getTime(),j.current=window.setTimeout(X,O))},[X]);p.useEffect(()=>{const O=g.viewport;if(O){const W=()=>{U(k.current),u==null||u()},$=()=>{const q=new Date().getTime()-E.current;k.current=k.current-q,window.clearTimeout(j.current),l==null||l()};return O.addEventListener(rh,$),O.addEventListener(nh,W),()=>{O.removeEventListener(rh,$),O.removeEventListener(nh,W)}}},[g.viewport,S,l,u,U]),p.useEffect(()=>{i&&!g.isClosePausedRef.current&&U(S)},[i,S,g.isClosePausedRef,U]),p.useEffect(()=>(L(),()=>M()),[L,M]);const V=p.useMemo(()=>b?Qx(b):null,[b]);return g.viewport?c.jsxs(c.Fragment,{children:[V&&c.jsx($2,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),c.jsx(D2,{scope:r,onClose:X,children:vi.createPortal(c.jsx(Zp.ItemSlot,{scope:r,children:c.jsx(g2,{asChild:!0,onEscapeKeyDown:ue(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||X(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(ke.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ue(t.onKeyDown,O=>{O.key==="Escape"&&(a==null||a(O.nativeEvent),O.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:ue(t.onPointerDown,O=>{O.button===0&&(x.current={x:O.clientX,y:O.clientY})}),onPointerMove:ue(t.onPointerMove,O=>{if(!x.current)return;const W=O.clientX-x.current.x,$=O.clientY-x.current.y,q=!!_.current,T=["left","right"].includes(g.swipeDirection),C=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,F=T?C(0,W):0,K=T?0:C(0,$),R=O.pointerType==="touch"?10:2,G={x:F,y:K},J={originalEvent:O,delta:G};q?(_.current=G,Ll(R2,h,J,{discrete:!1})):uv(G,g.swipeDirection,R)?(_.current=G,Ll(P2,d,J,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(W)>R||Math.abs($)>R)&&(x.current=null)}),onPointerUp:ue(t.onPointerUp,O=>{const W=_.current,$=O.target;if($.hasPointerCapture(O.pointerId)&&$.releasePointerCapture(O.pointerId),_.current=null,x.current=null,W){const q=O.currentTarget,T={originalEvent:O,delta:W};uv(W,g.swipeDirection,g.swipeThreshold)?Ll(I2,m,T,{discrete:!0}):Ll(A2,f,T,{discrete:!0}),q.addEventListener("click",C=>C.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),$2=t=>{const{__scopeToast:e,children:r,...n}=t,s=Su(ll,e),[i,o]=p.useState(!1),[a,l]=p.useState(!1);return B2(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:c.jsx(bu,{asChild:!0,children:c.jsx(_u,{...n,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",r]})})})},U2="ToastTitle",Wx=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return c.jsx(ke.div,{...n,ref:e})});Wx.displayName=U2;var F2="ToastDescription",Hx=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return c.jsx(ke.div,{...n,ref:e})});Hx.displayName=F2;var Vx="ToastAction",qx=p.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?c.jsx(Gx,{altText:r,asChild:!0,children:c.jsx(em,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Vx}\`. Expected non-empty \`string\`.`),null)});qx.displayName=Vx;var Kx="ToastClose",em=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=L2(Kx,r);return c.jsx(Gx,{asChild:!0,children:c.jsx(ke.button,{type:"button",...n,ref:e,onClick:ue(t.onClick,s.onClose)})})});em.displayName=Kx;var Gx=p.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return c.jsx(ke.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function Qx(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),z2(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Qx(n))}}),e}function Ll(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Rx(s,i):s.dispatchEvent(i)}var uv=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function B2(t=()=>{}){const e=Dr(t);At(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function z2(t){return t.nodeType===t.ELEMENT_NODE}function W2(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Cd(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var H2=$x,Yx=Fx,Jx=zx,Xx=Wx,Zx=Hx,e1=qx,t1=em;function r1(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=r1(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function n1(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=r1(t))&&(n&&(n+=" "),n+=e);return n}const dv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,fv=n1,tm=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return fv(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=i==null?void 0:i[u];if(d===null)return null;const f=dv(d)||dv(h);return s[u][f]}),a=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(w=>{let[g,b]=w;return Array.isArray(b)?b.includes({...i,...a}[g]):{...i,...a}[g]===b})?[...u,h,f]:u},[]);return fv(t,o,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s1=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>p.createElement("svg",{ref:l,...q2,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:s1("lucide",s),...a},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const r=p.forwardRef(({className:n,...s},i)=>p.createElement(K2,{ref:i,iconNode:e,className:s1(`lucide-${V2(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Ee("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=Ee("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=Ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=Ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Ee("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=Ee("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Ee("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Ee("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ee("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=Ee("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=Ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=Ee("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=Ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=Ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=Ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=Ee("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Ee("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=Ee("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=Ee("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ee("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Ee("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=Ee("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Ee("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),nm="-",mT=t=>{const e=vT(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const a=o.split(nm);return a[0]===""&&a.length!==1&&a.shift(),d1(a,e)||gT(o)},getConflictingClassGroupIds:(o,a)=>{const l=r[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},d1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?d1(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(nm);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},gv=/^\[(.+)\]$/,gT=t=>{if(gv.test(t)){const e=gv.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},vT=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return wT(Object.entries(t.classGroups),r).forEach(([i,o])=>{lh(o,n,i,e)}),n},lh=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:vv(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(yT(s)){lh(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{lh(o,vv(e,i),r,n)})})},vv=(t,e)=>{let r=t;return e.split(nm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},yT=t=>t.isThemeGetter,wT=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[r,s]}):t,xT=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},f1="!",bT=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let u=0,d=0,h;for(let b=0;b<a.length;b++){let y=a[b];if(u===0){if(y===s&&(n||a.slice(b,b+i)===e)){l.push(a.slice(d,b)),d=b+i;continue}if(y==="/"){h=b;continue}}y==="["?u++:y==="]"&&u--}const f=l.length===0?a:a.substring(d),m=f.startsWith(f1),w=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:g}};return r?a=>r({className:a,parseClassName:o}):o},_T=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},ST=t=>({cache:xT(t.cacheSize),parseClassName:bT(t),...mT(t)}),ET=/\s+/,CT=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(ET);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let w=!!m,g=n(w?f.substring(0,m):f);if(!g){if(!w){a=u+(a.length>0?" "+a:a);continue}if(g=n(f),!g){a=u+(a.length>0?" "+a:a);continue}w=!1}const b=_T(d).join(":"),y=h?b+f1:b,v=y+g;if(i.includes(v))continue;i.push(v);const x=s(g,w);for(let _=0;_<x.length;++_){const S=x[_];i.push(y+S)}a=u+(a.length>0?" "+a:a)}return a};function kT(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=h1(e))&&(n&&(n+=" "),n+=r);return n}const h1=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=h1(t[n]))&&(r&&(r+=" "),r+=e);return r};function TT(t,...e){let r,n,s,i=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return r=ST(u),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const u=n(l);if(u)return u;const d=CT(l,r);return s(l,d),d}return function(){return i(kT.apply(null,arguments))}}const Ve=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},p1=/^\[(?:([a-z-]+):)?(.+)\]$/i,jT=/^\d+\/\d+$/,NT=new Set(["px","full","screen"]),OT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,En=t=>no(t)||NT.has(t)||jT.test(t),Gn=t=>Ro(t,"length",zT),no=t=>!!t&&!Number.isNaN(Number(t)),kd=t=>Ro(t,"number",no),Qo=t=>!!t&&Number.isInteger(Number(t)),DT=t=>t.endsWith("%")&&no(t.slice(0,-1)),Ce=t=>p1.test(t),Qn=t=>OT.test(t),LT=new Set(["length","size","percentage"]),MT=t=>Ro(t,LT,m1),$T=t=>Ro(t,"position",m1),UT=new Set(["image","url"]),FT=t=>Ro(t,UT,HT),BT=t=>Ro(t,"",WT),Yo=()=>!0,Ro=(t,e,r)=>{const n=p1.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},zT=t=>PT.test(t)&&!RT.test(t),m1=()=>!1,WT=t=>AT.test(t),HT=t=>IT.test(t),VT=()=>{const t=Ve("colors"),e=Ve("spacing"),r=Ve("blur"),n=Ve("brightness"),s=Ve("borderColor"),i=Ve("borderRadius"),o=Ve("borderSpacing"),a=Ve("borderWidth"),l=Ve("contrast"),u=Ve("grayscale"),d=Ve("hueRotate"),h=Ve("invert"),f=Ve("gap"),m=Ve("gradientColorStops"),w=Ve("gradientColorStopPositions"),g=Ve("inset"),b=Ve("margin"),y=Ve("opacity"),v=Ve("padding"),x=Ve("saturate"),_=Ve("scale"),S=Ve("sepia"),E=Ve("skew"),k=Ve("space"),j=Ve("translate"),L=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",Ce,e],U=()=>[Ce,e],V=()=>["",En,Gn],O=()=>["auto",no,Ce],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],C=()=>["","0",Ce],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[no,Ce];return{cacheSize:500,separator:":",theme:{colors:[Yo],spacing:[En,Gn],blur:["none","",Qn,Ce],brightness:K(),borderColor:[t],borderRadius:["none","","full",Qn,Ce],borderSpacing:U(),borderWidth:V(),contrast:K(),grayscale:C(),hueRotate:K(),invert:C(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[DT,Gn],inset:X(),margin:X(),opacity:K(),padding:U(),saturate:K(),scale:K(),sepia:C(),skew:K(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[Qn]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Ce]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qo,Ce]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:C()}],shrink:[{shrink:C()}],order:[{order:["first","last","none",Qo,Ce]}],"grid-cols":[{"grid-cols":[Yo]}],"col-start-end":[{col:["auto",{span:["full",Qo,Ce]},Ce]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Yo]}],"row-start-end":[{row:["auto",{span:[Qo,Ce]},Ce]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ce,e]}],"min-w":[{"min-w":[Ce,e,"min","max","fit"]}],"max-w":[{"max-w":[Ce,e,"none","full","min","max","fit","prose",{screen:[Qn]},Qn]}],h:[{h:[Ce,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ce,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qn,Gn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",kd]}],"font-family":[{font:[Yo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",no,kd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",En,Ce]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",En,Gn]}],"underline-offset":[{"underline-offset":["auto",En,Ce]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),$T]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",MT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FT]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[En,Ce]}],"outline-w":[{outline:[En,Gn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[En,Gn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Qn,BT]}],"shadow-color":[{shadow:[Yo]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Qn,Ce]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Qo,Ce]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[En,Gn,kd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qT=TT(VT);function Se(...t){return qT(n1(t))}const KT=H2,g1=p.forwardRef(({className:t,...e},r)=>c.jsx(Yx,{ref:r,className:Se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));g1.displayName=Yx.displayName;const GT=tm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),v1=p.forwardRef(({className:t,variant:e,...r},n)=>c.jsx(Jx,{ref:n,className:Se(GT({variant:e}),t),...r}));v1.displayName=Jx.displayName;const QT=p.forwardRef(({className:t,...e},r)=>c.jsx(e1,{ref:r,className:Se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));QT.displayName=e1.displayName;const y1=p.forwardRef(({className:t,...e},r)=>c.jsx(t1,{ref:r,className:Se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(Cu,{className:"h-4 w-4"})}));y1.displayName=t1.displayName;const w1=p.forwardRef(({className:t,...e},r)=>c.jsx(Xx,{ref:r,className:Se("text-sm font-semibold",t),...e}));w1.displayName=Xx.displayName;const x1=p.forwardRef(({className:t,...e},r)=>c.jsx(Zx,{ref:r,className:Se("text-sm opacity-90",t),...e}));x1.displayName=Zx.displayName;function YT(){const{toasts:t}=yi();return c.jsxs(KT,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return c.jsxs(v1,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[r&&c.jsx(w1,{children:r}),n&&c.jsx(x1,{children:n})]}),s,c.jsx(y1,{})]},e)}),c.jsx(g1,{})]})}var yv=["light","dark"],JT="(prefers-color-scheme: dark)",XT=p.createContext(void 0),ZT={setTheme:t=>{},themes:[]},ej=()=>{var t;return(t=p.useContext(XT))!=null?t:ZT};p.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?yv.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,g=!1,b=!0)=>{let y=o?o[w]:w,v=g?w+"|| ''":`'${y}'`,x="";return s&&b&&!g&&yv.includes(w)&&(x+=`d.style.colorScheme = '${w}';`),r==="class"?g||y?x+=`c.add(${v})`:x+="null":y&&(x+=`d[s](n,${v})`),x},m=t?`!function(){${d}${f(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${JT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var tj=t=>{switch(t){case"success":return sj;case"info":return oj;case"warning":return ij;case"error":return aj;default:return null}},rj=Array(12).fill(0),nj=({visible:t,className:e})=>Y.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Y.createElement("div",{className:"sonner-spinner"},rj.map((r,n)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),sj=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ij=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),oj=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),aj=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),lj=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),cj=()=>{let[t,e]=Y.useState(document.hidden);return Y.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},ch=1,uj=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:ch++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:r}),{...a,...t,id:s,dismissible:o,title:r}):a):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0,i,o=n.then(async l=>{if(i=["resolve",l],Y.isValidElement(l))s=!1,this.create({id:r,type:"default",message:l});else if(fj(l)&&!l.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:r,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var l;s&&(this.dismiss(r),r=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,u)=>o.then(()=>i[0]==="reject"?u(i[1]):l(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:a}:Object.assign(r,{unwrap:a})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||ch++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},rr=new uj,dj=(t,e)=>{let r=(e==null?void 0:e.id)||ch++;return rr.addToast({title:t,...e,id:r}),r},fj=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",hj=dj,pj=()=>rr.toasts,mj=()=>rr.getActiveToasts();Object.assign(hj,{success:rr.success,info:rr.info,warning:rr.warning,error:rr.error,custom:rr.custom,message:rr.message,promise:rr.promise,dismiss:rr.dismiss,loading:rr.loading},{getHistory:pj,getToasts:mj});function gj(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}gj(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ml(t){return t.label!==void 0}var vj=3,yj="32px",wj="16px",wv=4e3,xj=356,bj=14,_j=20,Sj=200;function Ur(...t){return t.filter(Boolean).join(" ")}function Ej(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var Cj=t=>{var e,r,n,s,i,o,a,l,u,d,h;let{invert:f,toast:m,unstyled:w,interacting:g,setHeights:b,visibleToasts:y,heights:v,index:x,toasts:_,expanded:S,removeToast:E,defaultRichColors:k,closeButton:j,style:L,cancelButtonStyle:M,actionButtonStyle:X,className:U="",descriptionClassName:V="",duration:O,position:W,gap:$,loadingIcon:q,expandByDefault:T,classNames:C,icons:F,closeButtonAriaLabel:K="Close toast",pauseWhenPageIsHidden:R}=t,[G,J]=Y.useState(null),[oe,de]=Y.useState(null),[D,ne]=Y.useState(!1),[we,ae]=Y.useState(!1),[re,le]=Y.useState(!1),[Be,yt]=Y.useState(!1),[It,ht]=Y.useState(!1),[cr,Ht]=Y.useState(0),[Q,fe]=Y.useState(0),he=Y.useRef(m.duration||O||wv),je=Y.useRef(null),Je=Y.useRef(null),Zt=x===0,at=x+1<=y,Ie=m.type,wt=m.dismissible!==!1,on=m.className||"",Sn=m.descriptionClassName||"",Vt=Y.useMemo(()=>v.findIndex(ge=>ge.toastId===m.id)||0,[v,m.id]),Lr=Y.useMemo(()=>{var ge;return(ge=m.closeButton)!=null?ge:j},[m.closeButton,j]),Mr=Y.useMemo(()=>m.duration||O||wv,[m.duration,O]),er=Y.useRef(0),lt=Y.useRef(0),ur=Y.useRef(0),tr=Y.useRef(null),[an,$o]=W.split("-"),Si=Y.useMemo(()=>v.reduce((ge,Oe,Re)=>Re>=Vt?ge:ge+Oe.height,0),[v,Vt]),qn=cj(),Uo=m.invert||f,Ls=Ie==="loading";lt.current=Y.useMemo(()=>Vt*$+Si,[Vt,Si]),Y.useEffect(()=>{he.current=Mr},[Mr]),Y.useEffect(()=>{ne(!0)},[]),Y.useEffect(()=>{let ge=Je.current;if(ge){let Oe=ge.getBoundingClientRect().height;return fe(Oe),b(Re=>[{toastId:m.id,height:Oe,position:m.position},...Re]),()=>b(Re=>Re.filter(Et=>Et.toastId!==m.id))}},[b,m.id]),Y.useLayoutEffect(()=>{if(!D)return;let ge=Je.current,Oe=ge.style.height;ge.style.height="auto";let Re=ge.getBoundingClientRect().height;ge.style.height=Oe,fe(Re),b(Et=>Et.find(P=>P.toastId===m.id)?Et.map(P=>P.toastId===m.id?{...P,height:Re}:P):[{toastId:m.id,height:Re,position:m.position},...Et])},[D,m.title,m.description,b,m.id]);let Er=Y.useCallback(()=>{ae(!0),Ht(lt.current),b(ge=>ge.filter(Oe=>Oe.toastId!==m.id)),setTimeout(()=>{E(m)},Sj)},[m,E,b,lt]);Y.useEffect(()=>{if(m.promise&&Ie==="loading"||m.duration===1/0||m.type==="loading")return;let ge;return S||g||R&&qn?(()=>{if(ur.current<er.current){let Oe=new Date().getTime()-er.current;he.current=he.current-Oe}ur.current=new Date().getTime()})():he.current!==1/0&&(er.current=new Date().getTime(),ge=setTimeout(()=>{var Oe;(Oe=m.onAutoClose)==null||Oe.call(m,m),Er()},he.current)),()=>clearTimeout(ge)},[S,g,m,Ie,R,qn,Er]),Y.useEffect(()=>{m.delete&&Er()},[Er,m.delete]);function Fo(){var ge,Oe,Re;return F!=null&&F.loading?Y.createElement("div",{className:Ur(C==null?void 0:C.loader,(ge=m==null?void 0:m.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":Ie==="loading"},F.loading):q?Y.createElement("div",{className:Ur(C==null?void 0:C.loader,(Oe=m==null?void 0:m.classNames)==null?void 0:Oe.loader,"sonner-loader"),"data-visible":Ie==="loading"},q):Y.createElement(nj,{className:Ur(C==null?void 0:C.loader,(Re=m==null?void 0:m.classNames)==null?void 0:Re.loader),visible:Ie==="loading"})}return Y.createElement("li",{tabIndex:0,ref:Je,className:Ur(U,on,C==null?void 0:C.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,C==null?void 0:C.default,C==null?void 0:C[Ie],(r=m==null?void 0:m.classNames)==null?void 0:r[Ie]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:k,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":D,"data-promise":!!m.promise,"data-swiped":It,"data-removed":we,"data-visible":at,"data-y-position":an,"data-x-position":$o,"data-index":x,"data-front":Zt,"data-swiping":re,"data-dismissible":wt,"data-type":Ie,"data-invert":Uo,"data-swipe-out":Be,"data-swipe-direction":oe,"data-expanded":!!(S||T&&D),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${we?cr:lt.current}px`,"--initial-height":T?"auto":`${Q}px`,...L,...m.style},onDragEnd:()=>{le(!1),J(null),tr.current=null},onPointerDown:ge=>{Ls||!wt||(je.current=new Date,Ht(lt.current),ge.target.setPointerCapture(ge.pointerId),ge.target.tagName!=="BUTTON"&&(le(!0),tr.current={x:ge.clientX,y:ge.clientY}))},onPointerUp:()=>{var ge,Oe,Re,Et;if(Be||!wt)return;tr.current=null;let P=Number(((ge=Je.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ct=Number(((Oe=Je.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),it=new Date().getTime()-((Re=je.current)==null?void 0:Re.getTime()),xt=G==="x"?P:Ct,z=Math.abs(xt)/it;if(Math.abs(xt)>=_j||z>.11){Ht(lt.current),(Et=m.onDismiss)==null||Et.call(m,m),de(G==="x"?P>0?"right":"left":Ct>0?"down":"up"),Er(),yt(!0),ht(!1);return}le(!1),J(null)},onPointerMove:ge=>{var Oe,Re,Et,P;if(!tr.current||!wt||((Oe=window.getSelection())==null?void 0:Oe.toString().length)>0)return;let Ct=ge.clientY-tr.current.y,it=ge.clientX-tr.current.x,xt=(Re=t.swipeDirections)!=null?Re:Ej(W);!G&&(Math.abs(it)>1||Math.abs(Ct)>1)&&J(Math.abs(it)>Math.abs(Ct)?"x":"y");let z={x:0,y:0};G==="y"?(xt.includes("top")||xt.includes("bottom"))&&(xt.includes("top")&&Ct<0||xt.includes("bottom")&&Ct>0)&&(z.y=Ct):G==="x"&&(xt.includes("left")||xt.includes("right"))&&(xt.includes("left")&&it<0||xt.includes("right")&&it>0)&&(z.x=it),(Math.abs(z.x)>0||Math.abs(z.y)>0)&&ht(!0),(Et=Je.current)==null||Et.style.setProperty("--swipe-amount-x",`${z.x}px`),(P=Je.current)==null||P.style.setProperty("--swipe-amount-y",`${z.y}px`)}},Lr&&!m.jsx?Y.createElement("button",{"aria-label":K,"data-disabled":Ls,"data-close-button":!0,onClick:Ls||!wt?()=>{}:()=>{var ge;Er(),(ge=m.onDismiss)==null||ge.call(m,m)},className:Ur(C==null?void 0:C.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=F==null?void 0:F.close)!=null?i:lj):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Y.createElement(Y.Fragment,null,Ie||m.icon||m.promise?Y.createElement("div",{"data-icon":"",className:Ur(C==null?void 0:C.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Fo():null,m.type!=="loading"?m.icon||(F==null?void 0:F[Ie])||tj(Ie):null):null,Y.createElement("div",{"data-content":"",className:Ur(C==null?void 0:C.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},Y.createElement("div",{"data-title":"",className:Ur(C==null?void 0:C.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?Y.createElement("div",{"data-description":"",className:Ur(V,Sn,C==null?void 0:C.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Ml(m.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||M,onClick:ge=>{var Oe,Re;Ml(m.cancel)&&wt&&((Re=(Oe=m.cancel).onClick)==null||Re.call(Oe,ge),Er())},className:Ur(C==null?void 0:C.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Ml(m.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||X,onClick:ge=>{var Oe,Re;Ml(m.action)&&((Re=(Oe=m.action).onClick)==null||Re.call(Oe,ge),!ge.defaultPrevented&&Er())},className:Ur(C==null?void 0:C.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function xv(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function kj(t,e){let r={};return[t,e].forEach((n,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?wj:yj;function l(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=a:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):l(a)}),r}var Tj=p.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:w=vj,toastOptions:g,dir:b=xv(),gap:y=bj,loadingIcon:v,icons:x,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=t,[E,k]=Y.useState([]),j=Y.useMemo(()=>Array.from(new Set([n].concat(E.filter(R=>R.position).map(R=>R.position)))),[E,n]),[L,M]=Y.useState([]),[X,U]=Y.useState(!1),[V,O]=Y.useState(!1),[W,$]=Y.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Y.useRef(null),T=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=Y.useRef(null),F=Y.useRef(!1),K=Y.useCallback(R=>{k(G=>{var J;return(J=G.find(oe=>oe.id===R.id))!=null&&J.delete||rr.dismiss(R.id),G.filter(({id:oe})=>oe!==R.id)})},[]);return Y.useEffect(()=>rr.subscribe(R=>{if(R.dismiss){k(G=>G.map(J=>J.id===R.id?{...J,delete:!0}:J));return}setTimeout(()=>{Tx.flushSync(()=>{k(G=>{let J=G.findIndex(oe=>oe.id===R.id);return J!==-1?[...G.slice(0,J),{...G[J],...R},...G.slice(J+1)]:[R,...G]})})})}),[]),Y.useEffect(()=>{if(d!=="system"){$(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:G})=>{$(G?"dark":"light")})}catch{R.addListener(({matches:J})=>{try{$(J?"dark":"light")}catch(oe){console.error(oe)}})}},[d]),Y.useEffect(()=>{E.length<=1&&U(!1)},[E]),Y.useEffect(()=>{let R=G=>{var J,oe;s.every(de=>G[de]||G.code===de)&&(U(!0),(J=q.current)==null||J.focus()),G.code==="Escape"&&(document.activeElement===q.current||(oe=q.current)!=null&&oe.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[s]),Y.useEffect(()=>{if(q.current)return()=>{C.current&&(C.current.focus({preventScroll:!0}),C.current=null,F.current=!1)}},[q.current]),Y.createElement("section",{ref:e,"aria-label":`${_} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((R,G)=>{var J;let[oe,de]=R.split("-");return E.length?Y.createElement("ol",{key:R,dir:b==="auto"?xv():b,tabIndex:-1,ref:q,className:a,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":oe,"data-lifted":X&&E.length>1&&!i,"data-x-position":de,style:{"--front-toast-height":`${((J=L[0])==null?void 0:J.height)||0}px`,"--width":`${xj}px`,"--gap":`${y}px`,...m,...kj(l,u)},onBlur:D=>{F.current&&!D.currentTarget.contains(D.relatedTarget)&&(F.current=!1,C.current&&(C.current.focus({preventScroll:!0}),C.current=null))},onFocus:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||F.current||(F.current=!0,C.current=D.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{V||U(!1)},onDragEnd:()=>U(!1),onPointerDown:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},E.filter(D=>!D.position&&G===0||D.position===R).map((D,ne)=>{var we,ae;return Y.createElement(Cj,{key:D.id,icons:x,index:ne,toast:D,defaultRichColors:h,duration:(we=g==null?void 0:g.duration)!=null?we:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:w,closeButton:(ae=g==null?void 0:g.closeButton)!=null?ae:o,interacting:V,position:R,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:K,toasts:E.filter(re=>re.position==D.position),heights:L.filter(re=>re.position==D.position),setHeights:M,expandByDefault:i,gap:y,loadingIcon:v,expanded:X,pauseWhenPageIsHidden:S,swipeDirections:t.swipeDirections})})):null}))});const jj=({...t})=>{const{theme:e="system"}=ej();return c.jsx(Tj,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Nj=op[" useId ".trim().toString()]||(()=>{}),Oj=0;function Ss(t){const[e,r]=p.useState(Nj());return At(()=>{t||r(n=>n??String(Oj++))},[t]),t||(e?`radix-${e}`:"")}const Pj=["top","right","bottom","left"],js=Math.min,pr=Math.max,Hc=Math.round,$l=Math.floor,xn=t=>({x:t,y:t}),Rj={left:"right",right:"left",bottom:"top",top:"bottom"},Aj={start:"end",end:"start"};function uh(t,e,r){return pr(t,js(e,r))}function Un(t,e){return typeof t=="function"?t(e):t}function Fn(t){return t.split("-")[0]}function Ao(t){return t.split("-")[1]}function sm(t){return t==="x"?"y":"x"}function im(t){return t==="y"?"height":"width"}const Ij=new Set(["top","bottom"]);function vn(t){return Ij.has(Fn(t))?"y":"x"}function om(t){return sm(vn(t))}function Dj(t,e,r){r===void 0&&(r=!1);const n=Ao(t),s=om(t),i=im(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Vc(o)),[o,Vc(o)]}function Lj(t){const e=Vc(t);return[dh(t),e,dh(e)]}function dh(t){return t.replace(/start|end/g,e=>Aj[e])}const bv=["left","right"],_v=["right","left"],Mj=["top","bottom"],$j=["bottom","top"];function Uj(t,e,r){switch(t){case"top":case"bottom":return r?e?_v:bv:e?bv:_v;case"left":case"right":return e?Mj:$j;default:return[]}}function Fj(t,e,r,n){const s=Ao(t);let i=Uj(Fn(t),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(dh)))),i}function Vc(t){return t.replace(/left|right|bottom|top/g,e=>Rj[e])}function Bj(t){return{top:0,right:0,bottom:0,left:0,...t}}function b1(t){return typeof t!="number"?Bj(t):{top:t,right:t,bottom:t,left:t}}function qc(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function Sv(t,e,r){let{reference:n,floating:s}=t;const i=vn(e),o=om(e),a=im(o),l=Fn(e),u=i==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(Ao(e)){case"start":m[o]-=f*(r&&u?-1:1);break;case"end":m[o]+=f*(r&&u?-1:1);break}return m}const zj=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Sv(u,n,l),f=n,m={},w=0;for(let g=0;g<a.length;g++){const{name:b,fn:y}=a[g],{x:v,y:x,data:_,reset:S}=await y({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,h=x??h,m={...m,[b]:{...m[b],..._}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=Sv(u,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Ua(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Un(e,t),w=b1(m),b=a[f?h==="floating"?"reference":"floating":h],y=qc(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),v=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},S=qc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(y.top-S.top+w.top)/_.y,bottom:(S.bottom-y.bottom+w.bottom)/_.y,left:(y.left-S.left+w.left)/_.x,right:(S.right-y.right+w.right)/_.x}}const Wj=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=Un(t,e)||{};if(u==null)return{};const h=b1(d),f={x:r,y:n},m=om(s),w=im(m),g=await o.getDimensions(u),b=m==="y",y=b?"top":"left",v=b?"bottom":"right",x=b?"clientHeight":"clientWidth",_=i.reference[w]+i.reference[m]-f[m]-i.floating[w],S=f[m]-i.reference[m],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=E?E[x]:0;(!k||!await(o.isElement==null?void 0:o.isElement(E)))&&(k=a.floating[x]||i.floating[w]);const j=_/2-S/2,L=k/2-g[w]/2-1,M=js(h[y],L),X=js(h[v],L),U=M,V=k-g[w]-X,O=k/2-g[w]/2+j,W=uh(U,O,V),$=!l.arrow&&Ao(s)!=null&&O!==W&&i.reference[w]/2-(O<U?M:X)-g[w]/2<0,q=$?O<U?O-U:O-V:0;return{[m]:f[m]+q,data:{[m]:W,centerOffset:O-W-q,...$&&{alignmentOffset:q}},reset:$}}}),Hj=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...b}=Un(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=Fn(s),v=vn(a),x=Fn(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=f||(x||!g?[Vc(a)]:Lj(a)),E=w!=="none";!f&&E&&S.push(...Fj(a,g,w,_));const k=[a,...S],j=await Ua(e,b),L=[];let M=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&L.push(j[y]),h){const O=Dj(s,o,_);L.push(j[O[0]],j[O[1]])}if(M=[...M,{placement:s,overflows:L}],!L.every(O=>O<=0)){var X,U;const O=(((X=i.flip)==null?void 0:X.index)||0)+1,W=k[O];if(W&&(!(h==="alignment"?v!==vn(W):!1)||M.every(T=>T.overflows[0]>0&&vn(T.placement)===v)))return{data:{index:O,overflows:M},reset:{placement:W}};let $=(U=M.filter(q=>q.overflows[0]<=0).sort((q,T)=>q.overflows[1]-T.overflows[1])[0])==null?void 0:U.placement;if(!$)switch(m){case"bestFit":{var V;const q=(V=M.filter(T=>{if(E){const C=vn(T.placement);return C===v||C==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(C=>C>0).reduce((C,F)=>C+F,0)]).sort((T,C)=>T[1]-C[1])[0])==null?void 0:V[0];q&&($=q);break}case"initialPlacement":$=a;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function Ev(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Cv(t){return Pj.some(e=>t[e]>=0)}const Vj=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Un(t,e);switch(n){case"referenceHidden":{const i=await Ua(e,{...s,elementContext:"reference"}),o=Ev(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Cv(o)}}}case"escaped":{const i=await Ua(e,{...s,altBoundary:!0}),o=Ev(i,r.floating);return{data:{escapedOffsets:o,escaped:Cv(o)}}}default:return{}}}}},_1=new Set(["left","top"]);async function qj(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Fn(r),a=Ao(r),l=vn(r)==="y",u=_1.has(o)?-1:1,d=i&&l?-1:1,h=Un(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(m=a==="end"?w*-1:w),l?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const Kj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await qj(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Gj=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:y,y:v}=b;return{x:y,y:v}}},...l}=Un(t,e),u={x:r,y:n},d=await Ua(e,l),h=vn(Fn(s)),f=sm(h);let m=u[f],w=u[h];if(i){const b=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=m+d[b],x=m-d[y];m=uh(v,m,x)}if(o){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=w+d[b],x=w-d[y];w=uh(v,w,x)}const g=a.fn({...e,[f]:m,[h]:w});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:i,[h]:o}}}}}},Qj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Un(t,e),d={x:r,y:n},h=vn(s),f=sm(h);let m=d[f],w=d[h];const g=Un(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const x=f==="y"?"height":"width",_=i.reference[f]-i.floating[x]+b.mainAxis,S=i.reference[f]+i.reference[x]-b.mainAxis;m<_?m=_:m>S&&(m=S)}if(u){var y,v;const x=f==="y"?"width":"height",_=_1.has(Fn(s)),S=i.reference[h]-i.floating[x]+(_&&((y=o.offset)==null?void 0:y[h])||0)+(_?0:b.crossAxis),E=i.reference[h]+i.reference[x]+(_?0:((v=o.offset)==null?void 0:v[h])||0)-(_?b.crossAxis:0);w<S?w=S:w>E&&(w=E)}return{[f]:m,[h]:w}}}},Yj=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Un(t,e),d=await Ua(e,u),h=Fn(s),f=Ao(s),m=vn(s)==="y",{width:w,height:g}=i.floating;let b,y;h==="top"||h==="bottom"?(b=h,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,b=f==="end"?"top":"bottom");const v=g-d.top-d.bottom,x=w-d.left-d.right,_=js(g-d[b],v),S=js(w-d[y],x),E=!e.middlewareData.shift;let k=_,j=S;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(j=x),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(k=v),E&&!f){const M=pr(d.left,0),X=pr(d.right,0),U=pr(d.top,0),V=pr(d.bottom,0);m?j=w-2*(M!==0||X!==0?M+X:pr(d.left,d.right)):k=g-2*(U!==0||V!==0?U+V:pr(d.top,d.bottom))}await l({...e,availableWidth:j,availableHeight:k});const L=await o.getDimensions(a.floating);return w!==L.width||g!==L.height?{reset:{rects:!0}}:{}}}};function ku(){return typeof window<"u"}function Io(t){return S1(t)?(t.nodeName||"").toLowerCase():"#document"}function xr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _n(t){var e;return(e=(S1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function S1(t){return ku()?t instanceof Node||t instanceof xr(t).Node:!1}function rn(t){return ku()?t instanceof Element||t instanceof xr(t).Element:!1}function bn(t){return ku()?t instanceof HTMLElement||t instanceof xr(t).HTMLElement:!1}function kv(t){return!ku()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xr(t).ShadowRoot}const Jj=new Set(["inline","contents"]);function cl(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=nn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Jj.has(s)}const Xj=new Set(["table","td","th"]);function Zj(t){return Xj.has(Io(t))}const eN=[":popover-open",":modal"];function Tu(t){return eN.some(e=>{try{return t.matches(e)}catch{return!1}})}const tN=["transform","translate","scale","rotate","perspective"],rN=["transform","translate","scale","rotate","perspective","filter"],nN=["paint","layout","strict","content"];function am(t){const e=lm(),r=rn(t)?nn(t):t;return tN.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||rN.some(n=>(r.willChange||"").includes(n))||nN.some(n=>(r.contain||"").includes(n))}function sN(t){let e=Ns(t);for(;bn(e)&&!ko(e);){if(am(e))return e;if(Tu(e))return null;e=Ns(e)}return null}function lm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const iN=new Set(["html","body","#document"]);function ko(t){return iN.has(Io(t))}function nn(t){return xr(t).getComputedStyle(t)}function ju(t){return rn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ns(t){if(Io(t)==="html")return t;const e=t.assignedSlot||t.parentNode||kv(t)&&t.host||_n(t);return kv(e)?e.host:e}function E1(t){const e=Ns(t);return ko(e)?t.ownerDocument?t.ownerDocument.body:t.body:bn(e)&&cl(e)?e:E1(e)}function Fa(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=E1(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),o=xr(s);if(i){const a=fh(o);return e.concat(o,o.visualViewport||[],cl(s)?s:[],a&&r?Fa(a):[])}return e.concat(s,Fa(s,[],r))}function fh(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function C1(t){const e=nn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=bn(t),i=s?t.offsetWidth:r,o=s?t.offsetHeight:n,a=Hc(r)!==i||Hc(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function cm(t){return rn(t)?t:t.contextElement}function so(t){const e=cm(t);if(!bn(e))return xn(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=C1(e);let o=(i?Hc(r.width):r.width)/n,a=(i?Hc(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const oN=xn(0);function k1(t){const e=xr(t);return!lm()||!e.visualViewport?oN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aN(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==xr(t)?!1:e}function ui(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=cm(t);let o=xn(1);e&&(n?rn(n)&&(o=so(n)):o=so(t));const a=aN(i,r,n)?k1(i):xn(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=xr(i),m=n&&rn(n)?xr(n):n;let w=f,g=fh(w);for(;g&&n&&m!==w;){const b=so(g),y=g.getBoundingClientRect(),v=nn(g),x=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*b.x,_=y.top+(g.clientTop+parseFloat(v.paddingTop))*b.y;l*=b.x,u*=b.y,d*=b.x,h*=b.y,l+=x,u+=_,w=xr(g),g=fh(w)}}return qc({width:d,height:h,x:l,y:u})}function um(t,e){const r=ju(t).scrollLeft;return e?e.left+r:ui(_n(t)).left+r}function T1(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:um(t,n)),i=n.top+e.scrollTop;return{x:s,y:i}}function lN(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",o=_n(n),a=e?Tu(e.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},u=xn(1);const d=xn(0),h=bn(n);if((h||!h&&!i)&&((Io(n)!=="body"||cl(o))&&(l=ju(n)),bn(n))){const m=ui(n);u=so(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const f=o&&!h&&!i?T1(o,l,!0):xn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-l.scrollTop*u.y+d.y+f.y}}function cN(t){return Array.from(t.getClientRects())}function uN(t){const e=_n(t),r=ju(t),n=t.ownerDocument.body,s=pr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=pr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+um(t);const a=-r.scrollTop;return nn(n).direction==="rtl"&&(o+=pr(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}function dN(t,e){const r=xr(t),n=_n(t),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=lm();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const fN=new Set(["absolute","fixed"]);function hN(t,e){const r=ui(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=bn(t)?so(t):xn(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,u=n*i.y;return{width:o,height:a,x:l,y:u}}function Tv(t,e,r){let n;if(e==="viewport")n=dN(t,r);else if(e==="document")n=uN(_n(t));else if(rn(e))n=hN(e,r);else{const s=k1(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return qc(n)}function j1(t,e){const r=Ns(t);return r===e||!rn(r)||ko(r)?!1:nn(r).position==="fixed"||j1(r,e)}function pN(t,e){const r=e.get(t);if(r)return r;let n=Fa(t,[],!1).filter(a=>rn(a)&&Io(a)!=="body"),s=null;const i=nn(t).position==="fixed";let o=i?Ns(t):t;for(;rn(o)&&!ko(o);){const a=nn(o),l=am(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&fN.has(s.position)||cl(o)&&!l&&j1(t,o))?n=n.filter(d=>d!==o):s=a,o=Ns(o)}return e.set(t,n),n}function mN(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?Tu(e)?[]:pN(e,this._c):[].concat(r),n],a=o[0],l=o.reduce((u,d)=>{const h=Tv(e,d,s);return u.top=pr(h.top,u.top),u.right=js(h.right,u.right),u.bottom=js(h.bottom,u.bottom),u.left=pr(h.left,u.left),u},Tv(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function gN(t){const{width:e,height:r}=C1(t);return{width:e,height:r}}function vN(t,e,r){const n=bn(e),s=_n(e),i=r==="fixed",o=ui(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=xn(0);function u(){l.x=um(s)}if(n||!n&&!i)if((Io(e)!=="body"||cl(s))&&(a=ju(e)),n){const m=ui(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&u();i&&!n&&s&&u();const d=s&&!n&&!i?T1(s,a):xn(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Td(t){return nn(t).position==="static"}function jv(t,e){if(!bn(t)||nn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return _n(t)===r&&(r=r.ownerDocument.body),r}function N1(t,e){const r=xr(t);if(Tu(t))return r;if(!bn(t)){let s=Ns(t);for(;s&&!ko(s);){if(rn(s)&&!Td(s))return s;s=Ns(s)}return r}let n=jv(t,e);for(;n&&Zj(n)&&Td(n);)n=jv(n,e);return n&&ko(n)&&Td(n)&&!am(n)?r:n||sN(t)||r}const yN=async function(t){const e=this.getOffsetParent||N1,r=this.getDimensions,n=await r(t.floating);return{reference:vN(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function wN(t){return nn(t).direction==="rtl"}const xN={convertOffsetParentRelativeRectToViewportRelativeRect:lN,getDocumentElement:_n,getClippingRect:mN,getOffsetParent:N1,getElementRects:yN,getClientRects:cN,getDimensions:gN,getScale:so,isElement:rn,isRTL:wN};function O1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function bN(t,e){let r=null,n;const s=_n(t);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(a||e(),!f||!m)return;const w=$l(h),g=$l(s.clientWidth-(d+f)),b=$l(s.clientHeight-(h+m)),y=$l(d),x={rootMargin:-w+"px "+-g+"px "+-b+"px "+-y+"px",threshold:pr(0,js(1,l))||1};let _=!0;function S(E){const k=E[0].intersectionRatio;if(k!==l){if(!_)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!O1(u,t.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(S,{...x,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,x)}r.observe(t)}return o(!0),i}function _N(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=cm(t),d=s||i?[...u?Fa(u):[],...Fa(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const h=u&&a?bN(u,r):null;let f=-1,m=null;o&&(m=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=m)==null||x.observe(e)})),r()}),u&&!l&&m.observe(u),m.observe(e));let w,g=l?ui(t):null;l&&b();function b(){const y=ui(t);g&&!O1(g,y)&&r(),g=y,w=requestAnimationFrame(b)}return r(),()=>{var y;d.forEach(v=>{s&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),h==null||h(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(w)}}const SN=Kj,EN=Gj,CN=Hj,kN=Yj,TN=Vj,Nv=Wj,jN=Qj,NN=(t,e,r)=>{const n=new Map,s={platform:xN,...r},i={...s.platform,_c:n};return zj(t,e,{...s,platform:i})};var ON=typeof document<"u",PN=function(){},fc=ON?p.useLayoutEffect:PN;function Kc(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Kc(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!Kc(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function P1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ov(t,e){const r=P1(t);return Math.round(e*r)/r}function jd(t){const e=p.useRef(t);return fc(()=>{e.current=t}),e}function RN(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=p.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(n);Kc(f,n)||m(n);const[w,g]=p.useState(null),[b,y]=p.useState(null),v=p.useCallback(T=>{T!==E.current&&(E.current=T,g(T))},[]),x=p.useCallback(T=>{T!==k.current&&(k.current=T,y(T))},[]),_=i||w,S=o||b,E=p.useRef(null),k=p.useRef(null),j=p.useRef(d),L=l!=null,M=jd(l),X=jd(s),U=jd(u),V=p.useCallback(()=>{if(!E.current||!k.current)return;const T={placement:e,strategy:r,middleware:f};X.current&&(T.platform=X.current),NN(E.current,k.current,T).then(C=>{const F={...C,isPositioned:U.current!==!1};O.current&&!Kc(j.current,F)&&(j.current=F,vi.flushSync(()=>{h(F)}))})},[f,e,r,X,U]);fc(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[u]);const O=p.useRef(!1);fc(()=>(O.current=!0,()=>{O.current=!1}),[]),fc(()=>{if(_&&(E.current=_),S&&(k.current=S),_&&S){if(M.current)return M.current(_,S,V);V()}},[_,S,V,M,L]);const W=p.useMemo(()=>({reference:E,floating:k,setReference:v,setFloating:x}),[v,x]),$=p.useMemo(()=>({reference:_,floating:S}),[_,S]),q=p.useMemo(()=>{const T={position:r,left:0,top:0};if(!$.floating)return T;const C=Ov($.floating,d.x),F=Ov($.floating,d.y);return a?{...T,transform:"translate("+C+"px, "+F+"px)",...P1($.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:C,top:F}},[r,a,$.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:V,refs:W,elements:$,floatingStyles:q}),[d,V,W,$,q])}const AN=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Nv({element:n.current,padding:s}).fn(r):{}:n?Nv({element:n,padding:s}).fn(r):{}}}},IN=(t,e)=>({...SN(t),options:[t,e]}),DN=(t,e)=>({...EN(t),options:[t,e]}),LN=(t,e)=>({...jN(t),options:[t,e]}),MN=(t,e)=>({...CN(t),options:[t,e]}),$N=(t,e)=>({...kN(t),options:[t,e]}),UN=(t,e)=>({...TN(t),options:[t,e]}),FN=(t,e)=>({...AN(t),options:[t,e]});var BN="Arrow",R1=p.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return c.jsx(ke.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});R1.displayName=BN;var zN=R1;function WN(t){const[e,r]=p.useState(void 0);return At(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;r({width:o,height:a})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var dm="Popper",[A1,Nu]=zn(dm),[HN,I1]=A1(dm),D1=t=>{const{__scopePopper:e,children:r}=t,[n,s]=p.useState(null);return c.jsx(HN,{scope:e,anchor:n,onAnchorChange:s,children:r})};D1.displayName=dm;var L1="PopperAnchor",M1=p.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=I1(L1,r),o=p.useRef(null),a=Ue(e,o);return p.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:c.jsx(ke.div,{...s,ref:a})});M1.displayName=L1;var fm="PopperContent",[VN,qN]=A1(fm),$1=p.forwardRef((t,e)=>{var D,ne,we,ae,re,le;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:w,...g}=t,b=I1(fm,r),[y,v]=p.useState(null),x=Ue(e,Be=>v(Be)),[_,S]=p.useState(null),E=WN(_),k=(E==null?void 0:E.width)??0,j=(E==null?void 0:E.height)??0,L=n+(i!=="center"?"-"+i:""),M=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},X=Array.isArray(u)?u:[u],U=X.length>0,V={padding:M,boundary:X.filter(GN),altBoundary:U},{refs:O,floatingStyles:W,placement:$,isPositioned:q,middlewareData:T}=RN({strategy:"fixed",placement:L,whileElementsMounted:(...Be)=>_N(...Be,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[IN({mainAxis:s+j,alignmentAxis:o}),l&&DN({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?LN():void 0,...V}),l&&MN({...V}),$N({...V,apply:({elements:Be,rects:yt,availableWidth:It,availableHeight:ht})=>{const{width:cr,height:Ht}=yt.reference,Q=Be.floating.style;Q.setProperty("--radix-popper-available-width",`${It}px`),Q.setProperty("--radix-popper-available-height",`${ht}px`),Q.setProperty("--radix-popper-anchor-width",`${cr}px`),Q.setProperty("--radix-popper-anchor-height",`${Ht}px`)}}),_&&FN({element:_,padding:a}),QN({arrowWidth:k,arrowHeight:j}),f&&UN({strategy:"referenceHidden",...V})]}),[C,F]=B1($),K=Dr(w);At(()=>{q&&(K==null||K())},[q,K]);const R=(D=T.arrow)==null?void 0:D.x,G=(ne=T.arrow)==null?void 0:ne.y,J=((we=T.arrow)==null?void 0:we.centerOffset)!==0,[oe,de]=p.useState();return At(()=>{y&&de(window.getComputedStyle(y).zIndex)},[y]),c.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:q?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(ae=T.transformOrigin)==null?void 0:ae.x,(re=T.transformOrigin)==null?void 0:re.y].join(" "),...((le=T.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(VN,{scope:r,placedSide:C,onArrowChange:S,arrowX:R,arrowY:G,shouldHideArrow:J,children:c.jsx(ke.div,{"data-side":C,"data-align":F,...g,ref:x,style:{...g.style,animation:q?void 0:"none"}})})})});$1.displayName=fm;var U1="PopperArrow",KN={top:"bottom",right:"left",bottom:"top",left:"right"},F1=p.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=qN(U1,n),o=KN[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(zN,{...s,ref:r,style:{...s.style,display:"block"}})})});F1.displayName=U1;function GN(t){return t!==null}var QN=t=>({name:"transformOrigin",options:t,fn(e){var b,y,v;const{placement:r,rects:n,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=B1(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((y=s.arrow)==null?void 0:y.x)??0)+a/2,m=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let w="",g="";return u==="bottom"?(w=o?h:`${f}px`,g=`${-l}px`):u==="top"?(w=o?h:`${f}px`,g=`${n.floating.height+l}px`):u==="right"?(w=`${-l}px`,g=o?h:`${m}px`):u==="left"&&(w=`${n.floating.width+l}px`,g=o?h:`${m}px`),{data:{x:w,y:g}}}});function B1(t){const[e,r="center"]=t.split("-");return[e,r]}var YN=D1,z1=M1,W1=$1,H1=F1,[Ou,EM]=zn("Tooltip",[Nu]),hm=Nu(),V1="TooltipProvider",JN=700,Pv="tooltip.open",[XN,q1]=Ou(V1),K1=t=>{const{__scopeTooltip:e,delayDuration:r=JN,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),a=p.useRef(!1),l=p.useRef(0);return p.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(XN,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};K1.displayName=V1;var G1="Tooltip",[CM,Pu]=Ou(G1),hh="TooltipTrigger",ZN=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Pu(hh,r),i=q1(hh,r),o=hm(r),a=p.useRef(null),l=Ue(e,a,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),c.jsx(z1,{asChild:!0,...o,children:c.jsx(ke.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:ue(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ue(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ue(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ue(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ue(t.onBlur,s.onClose),onClick:ue(t.onClick,s.onClose)})})});ZN.displayName=hh;var eO="TooltipPortal",[kM,tO]=Ou(eO,{forceMount:void 0}),To="TooltipContent",Q1=p.forwardRef((t,e)=>{const r=tO(To,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,o=Pu(To,t.__scopeTooltip);return c.jsx(wi,{present:n||o.open,children:o.disableHoverableContent?c.jsx(Y1,{side:s,...i,ref:e}):c.jsx(rO,{side:s,...i,ref:e})})}),rO=p.forwardRef((t,e)=>{const r=Pu(To,t.__scopeTooltip),n=q1(To,t.__scopeTooltip),s=p.useRef(null),i=Ue(e,s),[o,a]=p.useState(null),{trigger:l,onClose:u}=r,d=s.current,{onPointerInTransitChange:h}=n,f=p.useCallback(()=>{a(null),h(!1)},[h]),m=p.useCallback((w,g)=>{const b=w.currentTarget,y={x:w.clientX,y:w.clientY},v=aO(y,b.getBoundingClientRect()),x=lO(y,v),_=cO(g.getBoundingClientRect()),S=dO([...x,..._]);a(S),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(l&&d){const w=b=>m(b,d),g=b=>m(b,l);return l.addEventListener("pointerleave",w),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",g)}}},[l,d,m,f]),p.useEffect(()=>{if(o){const w=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},v=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),x=!uO(y,o);v?f():x&&(f(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,d,o,u,f]),c.jsx(Y1,{...t,ref:i})}),[nO,sO]=Ou(G1,{isInside:!1}),iO=Px("TooltipContent"),Y1=p.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Pu(To,r),u=hm(r),{onClose:d}=l;return p.useEffect(()=>(document.addEventListener(Pv,d),()=>document.removeEventListener(Pv,d)),[d]),p.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),c.jsx(al,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:c.jsxs(W1,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(iO,{children:n}),c.jsx(nO,{scope:r,isInside:!0,children:c.jsx(k2,{id:l.contentId,role:"tooltip",children:s||n})})]})})});Q1.displayName=To;var J1="TooltipArrow",oO=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=hm(r);return sO(J1,r).isInside?null:c.jsx(H1,{...s,...n,ref:e})});oO.displayName=J1;function aO(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function lO(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function cO(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function uO(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],u=a.x,d=a.y,h=l.x,f=l.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(s=!s)}return s}function dO(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),fO(e)}function fO(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var hO=K1,X1=Q1;const pO=hO,mO=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>c.jsx(X1,{ref:n,sideOffset:e,className:Se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));mO.displayName=X1.displayName;var Ru=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Au=typeof window>"u"||"Deno"in globalThis;function Wr(){}function gO(t,e){return typeof t=="function"?t(e):t}function vO(t){return typeof t=="number"&&t>=0&&t!==1/0}function yO(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ph(t,e){return typeof t=="function"?t(e):t}function wO(t,e){return typeof t=="function"?t(e):t}function Rv(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==pm(o,e.options))return!1}else if(!za(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Av(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Ba(e.options.mutationKey)!==Ba(i))return!1}else if(!za(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function pm(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ba)(t)}function Ba(t){return JSON.stringify(t,(e,r)=>mh(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function za(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>za(t[r],e[r])):!1}function Z1(t,e){if(t===e)return t;const r=Iv(t)&&Iv(e);if(r||mh(t)&&mh(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),o=i.length,a=r?[]:{},l=new Set(n);let u=0;for(let d=0;d<o;d++){const h=r?d:i[d];(!r&&l.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=Z1(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:a}return e}function Iv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function mh(t){if(!Dv(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Dv(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Dv(t){return Object.prototype.toString.call(t)==="[object Object]"}function xO(t){return new Promise(e=>{setTimeout(e,t)})}function bO(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Z1(t,e):e}function _O(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function SO(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var mm=Symbol();function eb(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===mm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ys,as,lo,oy,EO=(oy=class extends Ru{constructor(){super();Pe(this,Ys);Pe(this,as);Pe(this,lo);xe(this,lo,e=>{if(!Au&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){B(this,as)||this.setEventListener(B(this,lo))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,as))==null||e.call(this),xe(this,as,void 0))}setEventListener(e){var r;xe(this,lo,e),(r=B(this,as))==null||r.call(this),xe(this,as,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){B(this,Ys)!==e&&(xe(this,Ys,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof B(this,Ys)=="boolean"?B(this,Ys):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ys=new WeakMap,as=new WeakMap,lo=new WeakMap,oy),tb=new EO,co,ls,uo,ay,CO=(ay=class extends Ru{constructor(){super();Pe(this,co,!0);Pe(this,ls);Pe(this,uo);xe(this,uo,e=>{if(!Au&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){B(this,ls)||this.setEventListener(B(this,uo))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,ls))==null||e.call(this),xe(this,ls,void 0))}setEventListener(e){var r;xe(this,uo,e),(r=B(this,ls))==null||r.call(this),xe(this,ls,e(this.setOnline.bind(this)))}setOnline(e){B(this,co)!==e&&(xe(this,co,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return B(this,co)}},co=new WeakMap,ls=new WeakMap,uo=new WeakMap,ay),Gc=new CO;function kO(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function TO(t){return Math.min(1e3*2**t,3e4)}function rb(t){return(t??"online")==="online"?Gc.isOnline():!0}var nb=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Nd(t){return t instanceof nb}function sb(t){let e=!1,r=0,n=!1,s;const i=kO(),o=g=>{var b;n||(f(new nb(g)),(b=t.abort)==null||b.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>tb.isFocused()&&(t.networkMode==="always"||Gc.isOnline())&&t.canRun(),d=()=>rb(t.networkMode)&&t.canRun(),h=g=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,g),s==null||s(),i.resolve(g))},f=g=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var b;s=y=>{(n||u())&&g(y)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),w=()=>{if(n)return;let g;const b=r===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var E;if(n)return;const v=t.retry??(Au?0:3),x=t.retryDelay??TO,_=typeof x=="function"?x(r,y):x,S=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,y);if(e||!S){f(y);return}r++,(E=t.onFail)==null||E.call(t,r,y),xO(_).then(()=>u()?void 0:m()).then(()=>{e?f(y):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():m().then(w),i)}}var jO=t=>setTimeout(t,0);function NO(){let t=[],e=0,r=a=>{a()},n=a=>{a()},s=jO;const i=a=>{e?t.push(a):s(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var Qt=NO(),Js,ly,ib=(ly=class{constructor(){Pe(this,Js)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vO(this.gcTime)&&xe(this,Js,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Au?1/0:5*60*1e3))}clearGcTimeout(){B(this,Js)&&(clearTimeout(B(this,Js)),xe(this,Js,void 0))}},Js=new WeakMap,ly),fo,Xs,Tr,Zs,Ut,el,ei,Vr,Cn,cy,OO=(cy=class extends ib{constructor(e){super();Pe(this,Vr);Pe(this,fo);Pe(this,Xs);Pe(this,Tr);Pe(this,Zs);Pe(this,Ut);Pe(this,el);Pe(this,ei);xe(this,ei,!1),xe(this,el,e.defaultOptions),this.setOptions(e.options),this.observers=[],xe(this,Zs,e.client),xe(this,Tr,B(this,Zs).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,xe(this,fo,RO(this.options)),this.state=e.state??B(this,fo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=B(this,Ut))==null?void 0:e.promise}setOptions(e){this.options={...B(this,el),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Tr).remove(this)}setData(e,r){const n=bO(this.state.data,e,this.options);return Dt(this,Vr,Cn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Dt(this,Vr,Cn).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=B(this,Ut))==null?void 0:n.promise;return(s=B(this,Ut))==null||s.cancel(e),r?r.then(Wr).catch(Wr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,fo))}isActive(){return this.observers.some(e=>wO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ph(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!yO(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=B(this,Ut))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=B(this,Ut))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),B(this,Tr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(B(this,Ut)&&(B(this,ei)?B(this,Ut).cancel({revert:!0}):B(this,Ut).cancelRetry()),this.scheduleGc()),B(this,Tr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Dt(this,Vr,Cn).call(this,{type:"invalidate"})}fetch(e,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(B(this,Ut))return B(this,Ut).continueRetry(),B(this,Ut).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(xe(this,ei,!0),n.signal)})},i=()=>{const f=eb(this.options,r),w=(()=>{const g={client:B(this,Zs),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return xe(this,ei,!1),this.options.persister?this.options.persister(f,w,this):f(w)},a=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:B(this,Zs),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),xe(this,Xs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Dt(this,Vr,Cn).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=f=>{var m,w,g,b;Nd(f)&&f.silent||Dt(this,Vr,Cn).call(this,{type:"error",error:f}),Nd(f)||((w=(m=B(this,Tr).config).onError)==null||w.call(m,f,this),(b=(g=B(this,Tr).config).onSettled)==null||b.call(g,this.state.data,f,this)),this.scheduleGc()};return xe(this,Ut,sb({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,w,g,b;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){l(y);return}(w=(m=B(this,Tr).config).onSuccess)==null||w.call(m,f,this),(b=(g=B(this,Tr).config).onSettled)==null||b.call(g,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{Dt(this,Vr,Cn).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{Dt(this,Vr,Cn).call(this,{type:"pause"})},onContinue:()=>{Dt(this,Vr,Cn).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),B(this,Ut).start()}},fo=new WeakMap,Xs=new WeakMap,Tr=new WeakMap,Zs=new WeakMap,Ut=new WeakMap,el=new WeakMap,ei=new WeakMap,Vr=new WeakSet,Cn=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...PO(n.data,this.options),fetchMeta:e.meta??null};case"success":return xe(this,Xs,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Nd(s)&&s.revert&&B(this,Xs)?{...B(this,Xs),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Qt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),B(this,Tr).notify({query:this,type:"updated",action:e})})},cy);function PO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function RO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var dn,uy,AO=(uy=class extends Ru{constructor(e={}){super();Pe(this,dn);this.config=e,xe(this,dn,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??pm(s,r);let o=this.get(i);return o||(o=new OO({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){B(this,dn).has(e.queryHash)||(B(this,dn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=B(this,dn).get(e.queryHash);r&&(e.destroy(),r===e&&B(this,dn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Qt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return B(this,dn).get(e)}getAll(){return[...B(this,dn).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Rv(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Rv(e,n)):r}notify(e){Qt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Qt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Qt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},dn=new WeakMap,uy),fn,Kt,ti,hn,Xn,dy,IO=(dy=class extends ib{constructor(e){super();Pe(this,hn);Pe(this,fn);Pe(this,Kt);Pe(this,ti);this.mutationId=e.mutationId,xe(this,Kt,e.mutationCache),xe(this,fn,[]),this.state=e.state||DO(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){B(this,fn).includes(e)||(B(this,fn).push(e),this.clearGcTimeout(),B(this,Kt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){xe(this,fn,B(this,fn).filter(r=>r!==e)),this.scheduleGc(),B(this,Kt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){B(this,fn).length||(this.state.status==="pending"?this.scheduleGc():B(this,Kt).remove(this))}continue(){var e;return((e=B(this,ti))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,l,u,d,h,f,m,w,g,b,y,v,x,_,S,E,k,j;const r=()=>{Dt(this,hn,Xn).call(this,{type:"continue"})};xe(this,ti,sb({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(L,M)=>{Dt(this,hn,Xn).call(this,{type:"failed",failureCount:L,error:M})},onPause:()=>{Dt(this,hn,Xn).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,Kt).canRun(this)}));const n=this.state.status==="pending",s=!B(this,ti).canStart();try{if(n)r();else{Dt(this,hn,Xn).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=B(this,Kt).config).onMutate)==null?void 0:o.call(i,e,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));M!==this.state.context&&Dt(this,hn,Xn).call(this,{type:"pending",context:M,variables:e,isPaused:s})}const L=await B(this,ti).start();return await((d=(u=B(this,Kt).config).onSuccess)==null?void 0:d.call(u,L,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,L,e,this.state.context)),await((w=(m=B(this,Kt).config).onSettled)==null?void 0:w.call(m,L,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,L,null,e,this.state.context)),Dt(this,hn,Xn).call(this,{type:"success",data:L}),L}catch(L){try{throw await((v=(y=B(this,Kt).config).onError)==null?void 0:v.call(y,L,e,this.state.context,this)),await((_=(x=this.options).onError)==null?void 0:_.call(x,L,e,this.state.context)),await((E=(S=B(this,Kt).config).onSettled)==null?void 0:E.call(S,void 0,L,this.state.variables,this.state.context,this)),await((j=(k=this.options).onSettled)==null?void 0:j.call(k,void 0,L,e,this.state.context)),L}finally{Dt(this,hn,Xn).call(this,{type:"error",error:L})}}finally{B(this,Kt).runNext(this)}}},fn=new WeakMap,Kt=new WeakMap,ti=new WeakMap,hn=new WeakSet,Xn=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Qt.batch(()=>{B(this,fn).forEach(n=>{n.onMutationUpdate(e)}),B(this,Kt).notify({mutation:this,type:"updated",action:e})})},dy);function DO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Nn,qr,tl,fy,LO=(fy=class extends Ru{constructor(e={}){super();Pe(this,Nn);Pe(this,qr);Pe(this,tl);this.config=e,xe(this,Nn,new Set),xe(this,qr,new Map),xe(this,tl,0)}build(e,r,n){const s=new IO({mutationCache:this,mutationId:++vl(this,tl)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){B(this,Nn).add(e);const r=Ul(e);if(typeof r=="string"){const n=B(this,qr).get(r);n?n.push(e):B(this,qr).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(B(this,Nn).delete(e)){const r=Ul(e);if(typeof r=="string"){const n=B(this,qr).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&B(this,qr).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Ul(e);if(typeof r=="string"){const n=B(this,qr).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Ul(e);if(typeof r=="string"){const s=(n=B(this,qr).get(r))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Qt.batch(()=>{B(this,Nn).forEach(e=>{this.notify({type:"removed",mutation:e})}),B(this,Nn).clear(),B(this,qr).clear()})}getAll(){return Array.from(B(this,Nn))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Av(r,n))}findAll(e={}){return this.getAll().filter(r=>Av(e,r))}notify(e){Qt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Qt.batch(()=>Promise.all(e.map(r=>r.continue().catch(Wr))))}},Nn=new WeakMap,qr=new WeakMap,tl=new WeakMap,fy);function Ul(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Lv(t){return{onFetch:(e,r)=>{var d,h,f,m,w;const n=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const b=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=eb(e.options,e.fetchOptions),v=async(x,_,S)=>{if(g)return Promise.reject();if(_==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const X={client:e.client,queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};return b(X),X})(),j=await y(k),{maxPages:L}=e.options,M=S?SO:_O;return{pages:M(x.pages,j,L),pageParams:M(x.pageParams,_,L)}};if(s&&i.length){const x=s==="backward",_=x?MO:Mv,S={pages:i,pageParams:o},E=_(n,S);a=await v(S,E,x)}else{const x=t??i.length;do{const _=l===0?o[0]??n.initialPageParam:Mv(n,a);if(l>0&&_==null)break;a=await v(a,_),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Mv(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function MO(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var rt,cs,us,ho,po,ds,mo,go,hy,$O=(hy=class{constructor(t={}){Pe(this,rt);Pe(this,cs);Pe(this,us);Pe(this,ho);Pe(this,po);Pe(this,ds);Pe(this,mo);Pe(this,go);xe(this,rt,t.queryCache||new AO),xe(this,cs,t.mutationCache||new LO),xe(this,us,t.defaultOptions||{}),xe(this,ho,new Map),xe(this,po,new Map),xe(this,ds,0)}mount(){vl(this,ds)._++,B(this,ds)===1&&(xe(this,mo,tb.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,rt).onFocus())})),xe(this,go,Gc.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,rt).onOnline())})))}unmount(){var t,e;vl(this,ds)._--,B(this,ds)===0&&((t=B(this,mo))==null||t.call(this),xe(this,mo,void 0),(e=B(this,go))==null||e.call(this),xe(this,go,void 0))}isFetching(t){return B(this,rt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return B(this,cs).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=B(this,rt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=B(this,rt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(ph(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return B(this,rt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=B(this,rt).get(n.queryHash),i=s==null?void 0:s.state.data,o=gO(e,i);if(o!==void 0)return B(this,rt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return Qt.batch(()=>B(this,rt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=B(this,rt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=B(this,rt);Qt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=B(this,rt);return Qt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Qt.batch(()=>B(this,rt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Wr).catch(Wr)}invalidateQueries(t,e={}){return Qt.batch(()=>(B(this,rt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Qt.batch(()=>B(this,rt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Wr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Wr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=B(this,rt).build(this,e);return r.isStaleByTime(ph(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Wr).catch(Wr)}fetchInfiniteQuery(t){return t.behavior=Lv(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Wr).catch(Wr)}ensureInfiniteQueryData(t){return t.behavior=Lv(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gc.isOnline()?B(this,cs).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,rt)}getMutationCache(){return B(this,cs)}getDefaultOptions(){return B(this,us)}setDefaultOptions(t){xe(this,us,t)}setQueryDefaults(t,e){B(this,ho).set(Ba(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...B(this,ho).values()],r={};return e.forEach(n=>{za(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){B(this,po).set(Ba(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...B(this,po).values()],r={};return e.forEach(n=>{za(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...B(this,us).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=pm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===mm&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...B(this,us).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){B(this,rt).clear(),B(this,cs).clear()}},rt=new WeakMap,cs=new WeakMap,us=new WeakMap,ho=new WeakMap,po=new WeakMap,ds=new WeakMap,mo=new WeakMap,go=new WeakMap,hy),UO=p.createContext(void 0),FO=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(UO.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wa.apply(this,arguments)}var ps;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ps||(ps={}));const $v="popstate";function BO(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return gh("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Qc(s)}return WO(e,r,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ob(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zO(){return Math.random().toString(36).substr(2,8)}function Uv(t,e){return{usr:t.state,key:t.key,idx:e}}function gh(t,e,r,n){return r===void 0&&(r=null),Wa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Do(e):e,{state:r,key:e&&e.key||n||zO()})}function Qc(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Do(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function WO(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=ps.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Wa({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ps.Pop;let b=d(),y=b==null?null:b-u;u=b,l&&l({action:a,location:g.location,delta:y})}function f(b,y){a=ps.Push;let v=gh(g.location,b,y);u=d()+1;let x=Uv(v,u),_=g.createHref(v);try{o.pushState(x,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:g.location,delta:1})}function m(b,y){a=ps.Replace;let v=gh(g.location,b,y);u=d();let x=Uv(v,u),_=g.createHref(v);o.replaceState(x,"",_),i&&l&&l({action:a,location:g.location,delta:0})}function w(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:Qc(b);return v=v.replace(/ $/,"%20"),ft(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener($v,h),l=b,()=>{s.removeEventListener($v,h),l=null}},createHref(b){return e(s,b)},createURL:w,encodeLocation(b){let y=w(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(b){return o.go(b)}};return g}var Fv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fv||(Fv={}));function HO(t,e,r){return r===void 0&&(r="/"),VO(t,e,r,!1)}function VO(t,e,r,n){let s=typeof e=="string"?Do(e):e,i=gm(s.pathname||"/",r);if(i==null)return null;let o=ab(t);qO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=nP(i);a=tP(o[l],u,n)}return a}function ab(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Es([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(ft(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ab(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:ZO(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of lb(i.path))s(i,o,l)}),e}function lb(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=lb(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function qO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:eP(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const KO=/^:[\w-]+$/,GO=3,QO=2,YO=1,JO=10,XO=-2,Bv=t=>t==="*";function ZO(t,e){let r=t.split("/"),n=r.length;return r.some(Bv)&&(n+=XO),e&&(n+=QO),r.filter(s=>!Bv(s)).reduce((s,i)=>s+(KO.test(i)?GO:i===""?YO:JO),n)}function eP(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function tP(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=zv({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=zv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Es([i,h.pathname]),pathnameBase:aP(Es([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Es([i,h.pathnameBase]))}return o}function zv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=rP(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const w=a[h];return m&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function rP(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),ob(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function nP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ob(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function sP(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Do(t):t;return{pathname:r?r.startsWith("/")?r:iP(r,e):e,search:lP(n),hash:cP(s)}}function iP(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Od(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oP(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function cb(t,e){let r=oP(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ub(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Do(t):(s=Wa({},t),ft(!s.pathname||!s.pathname.includes("?"),Od("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),Od("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),Od("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=sP(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Es=t=>t.join("/").replace(/\/\/+/g,"/"),aP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const db=["post","put","patch","delete"];new Set(db);const dP=["get",...db];new Set(dP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ha(){return Ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ha.apply(this,arguments)}const vm=p.createContext(null),fP=p.createContext(null),xi=p.createContext(null),Iu=p.createContext(null),As=p.createContext({outlet:null,matches:[],isDataRoute:!1}),fb=p.createContext(null);function hP(t,e){let{relative:r}=e===void 0?{}:e;ul()||ft(!1);let{basename:n,navigator:s}=p.useContext(xi),{hash:i,pathname:o,search:a}=pb(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Es([n,o])),s.createHref({pathname:l,search:a,hash:i})}function ul(){return p.useContext(Iu)!=null}function dl(){return ul()||ft(!1),p.useContext(Iu).location}function hb(t){p.useContext(xi).static||p.useLayoutEffect(t)}function fl(){let{isDataRoute:t}=p.useContext(As);return t?TP():pP()}function pP(){ul()||ft(!1);let t=p.useContext(vm),{basename:e,future:r,navigator:n}=p.useContext(xi),{matches:s}=p.useContext(As),{pathname:i}=dl(),o=JSON.stringify(cb(s,r.v7_relativeSplatPath)),a=p.useRef(!1);return hb(()=>{a.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=ub(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Es([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,i,t])}function mP(){let{matches:t}=p.useContext(As),e=t[t.length-1];return e?e.params:{}}function pb(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=p.useContext(xi),{matches:s}=p.useContext(As),{pathname:i}=dl(),o=JSON.stringify(cb(s,n.v7_relativeSplatPath));return p.useMemo(()=>ub(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function gP(t,e){return vP(t,e)}function vP(t,e,r,n){ul()||ft(!1);let{navigator:s}=p.useContext(xi),{matches:i}=p.useContext(As),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=dl(),d;if(e){var h;let b=typeof e=="string"?Do(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||ft(!1),d=b}else d=u;let f=d.pathname||"/",m=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=HO(t,{pathname:m}),g=_P(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Es([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Es([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return e&&g?p.createElement(Iu.Provider,{value:{location:Ha({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ps.Pop}},g):g}function yP(){let t=kP(),e=uP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),r?p.createElement("pre",{style:s},r):null,null)}const wP=p.createElement(yP,null);class xP extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?p.createElement(As.Provider,{value:this.props.routeContext},p.createElement(fb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bP(t){let{routeContext:e,match:r,children:n}=t,s=p.useContext(vm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(As.Provider,{value:e},n)}function _P(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||ft(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=r,w=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||w){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,w=!1,g=null,b=null;r&&(m=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||wP,l&&(u<0&&f===0?(w=!0,b=null):u===f&&(w=!0,b=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let x;return m?x=g:w?x=b:h.route.Component?x=p.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,p.createElement(bP,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:x})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(xP,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var mb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mb||{}),Yc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Yc||{});function SP(t){let e=p.useContext(vm);return e||ft(!1),e}function EP(t){let e=p.useContext(fP);return e||ft(!1),e}function CP(t){let e=p.useContext(As);return e||ft(!1),e}function gb(t){let e=CP(),r=e.matches[e.matches.length-1];return r.route.id||ft(!1),r.route.id}function kP(){var t;let e=p.useContext(fb),r=EP(Yc.UseRouteError),n=gb(Yc.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function TP(){let{router:t}=SP(mb.UseNavigateStable),e=gb(Yc.UseNavigateStable),r=p.useRef(!1);return hb(()=>{r.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ha({fromRouteId:e},i)))},[t,e])}function jP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function kr(t){ft(!1)}function NP(t){let{basename:e="/",children:r=null,location:n,navigationType:s=ps.Pop,navigator:i,static:o=!1,future:a}=t;ul()&&ft(!1);let l=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:l,navigator:i,static:o,future:Ha({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=Do(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:w="default"}=n,g=p.useMemo(()=>{let b=gm(d,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:w},navigationType:s}},[l,d,h,f,m,w,s]);return g==null?null:p.createElement(xi.Provider,{value:u},p.createElement(Iu.Provider,{children:r,value:g}))}function Wv(t){let{children:e,location:r}=t;return gP(vh(e),r)}new Promise(()=>{});function vh(t,e){e===void 0&&(e=[]);let r=[];return p.Children.forEach(t,(n,s)=>{if(!p.isValidElement(n))return;let i=[...e,s];if(n.type===p.Fragment){r.push.apply(r,vh(n.props.children,i));return}n.type!==kr&&ft(!1),!n.props.index||!n.props.children||ft(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vh(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yh.apply(this,arguments)}function OP(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function PP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RP(t,e){return t.button===0&&(!e||e==="_self")&&!PP(t)}const AP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IP="6";try{window.__reactRouterVersion=IP}catch{}const DP="startTransition",Hv=op[DP];function LP(t){let{basename:e,children:r,future:n,window:s}=t,i=p.useRef();i.current==null&&(i.current=BO({window:s,v5Compat:!0}));let o=i.current,[a,l]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&Hv?Hv(()=>l(h)):l(h)},[l,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>jP(n),[n]),p.createElement(NP,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const MP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yr=p.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=OP(e,AP),{basename:m}=p.useContext(xi),w,g=!1;if(typeof u=="string"&&$P.test(u)&&(w=u,MP))try{let x=new URL(window.location.href),_=u.startsWith("//")?new URL(x.protocol+u):new URL(u),S=gm(_.pathname,m);_.origin===x.origin&&S!=null?u=S+_.search+_.hash:g=!0}catch{}let b=hP(u,{relative:s}),y=UP(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(x){n&&n(x),x.defaultPrevented||y(x)}return p.createElement("a",yh({},f,{href:w||b,onClick:g||i?n:v,ref:r,target:l}))});var Vv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Vv||(Vv={}));var qv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qv||(qv={}));function UP(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=fl(),u=dl(),d=pb(t,{relative:o});return p.useCallback(h=>{if(RP(h,r)){h.preventDefault();let f=n!==void 0?n:Qc(u)===Qc(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,d,n,s,r,t,i,o,a])}var gn=function(){return gn=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gn.apply(this,arguments)};function Lo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function FP(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(t,e||[])).next())})}function BP(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}const zP=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class ym extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class WP extends ym{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Kv extends ym{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gv extends ym{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(wh||(wh={}));class HP{constructor(e,{headers:r={},customFetch:n,region:s=wh.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=zP(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return FP(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const w=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,w.searchParams.set("forceFunctionRegion",m));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let b=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const y=yield this.fetch(w.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:g,signal:b}).catch(S=>{throw new WP(S)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new Kv(y);if(!y.ok)throw new Gv(y);let x=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield y.json():x==="application/octet-stream"||x==="application/pdf"?_=yield y.blob():x==="text/event-stream"?_=y:x==="multipart/form-data"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof Gv||a instanceof Kv?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var VP=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},qP=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var m;const y=await i.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?a=y:a=JSON.parse(y))}const g=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&b&&b.length>1&&(l=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var w;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&g===""?(u=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new VP(o)}return{error:o,data:a,count:l,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,d,h,f;const w=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",g=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${w}`,g&&(a+=` (${g})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var m;a=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},KP=class extends qP{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Qv=new RegExp("[,()]");var Di=class extends KP{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Qv.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Qv.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},GP=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Di({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Di({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Di({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Di({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Di({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},QP=class vb{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new GP(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new vb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Di({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class YP{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const JP="2.89.0",XP=`realtime-js/${JP}`,yb="1.0.0",ZP="2.0.0",Yv=yb,xh=1e4,eR=1e3,tR=100;var rs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(rs||(rs={}));var pt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pt||(pt={}));var Gr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Gr||(Gr={}));var bh;(function(t){t.websocket="websocket"})(bh||(bh={}));var Hs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Hs||(Hs={}));class rR{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let w=new DataView(m),g=0;w.setUint8(g++,this.KINDS.userBroadcastPush),w.setUint8(g++,l.length),w.setUint8(g++,a.length),w.setUint8(g++,o.length),w.setUint8(g++,u.length),w.setUint8(g++,h.length),w.setUint8(g++,r),Array.from(l,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(a,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(o,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(u,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(h,y=>w.setUint8(g++,y.charCodeAt(0)));var b=new Uint8Array(m.byteLength+n.byteLength);return b.set(new Uint8Array(m),0),b.set(new Uint8Array(n),m.byteLength),b.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(e.slice(l,l+s));l=l+s;const d=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,w={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(w.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class wb{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ze||(ze={}));const Jv=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=nR(o,t,e,s),i),{}):{}},nR=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?xb(i,o):_h(o)},xb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return aR(e,r)}switch(t){case ze.bool:return sR(e);case ze.float4:case ze.float8:case ze.int2:case ze.int4:case ze.int8:case ze.numeric:case ze.oid:return iR(e);case ze.json:case ze.jsonb:return oR(e);case ze.timestamp:return lR(e);case ze.abstime:case ze.date:case ze.daterange:case ze.int4range:case ze.int8range:case ze.money:case ze.reltime:case ze.text:case ze.time:case ze.timestamptz:case ze.timetz:case ze.tsrange:case ze.tstzrange:return _h(e);default:return _h(e)}},_h=t=>t,sR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},iR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},oR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},aR=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>xb(e,a))}return t},lR=t=>typeof t=="string"?t.replace(" ","T"):t,bb=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Pd{constructor(e,r,n={},s=xh){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Xv||(Xv={}));class ga{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ga.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ga.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ga.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),w=d.filter(b=>m.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);w.length>0&&(a[u]=w),g.length>0&&(l[u]=g)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...f)}n(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Zv||(Zv={}));var va;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(va||(va={}));var Tn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Tn||(Tn={}));class Yi{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Pd(this,Gr.join,this.params,this.timeout),this.rejoinTimer=new wb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new ga(this),this.broadcastEndpointURL=bb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[va.PRESENCE]&&this.bindings[va.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Tn.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Tn.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(Tn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(w=g==null?void 0:g.length)!==null&&w!==void 0?w:0,y=[];for(let v=0;v<b;v++){const x=g[v],{filter:{event:_,schema:S,table:E,filter:k}}=x,j=m&&m[v];if(j&&j.event===_&&Yi.isFilterValueEqual(j.schema,S)&&Yi.isFilterValueEqual(j.table,E)&&Yi.isFilterValueEqual(j.filter,k))y.push(Object.assign(Object.assign({},x),{id:j.id}));else{this.unsubscribe(),this.state=pt.errored,e==null||e(Tn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Tn.SUBSCRIBED);return}}).receive("error",m=>{this.state=pt.errored,e==null||e(Tn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Tn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===pt.joined&&e===va.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Pd(this,Gr.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Pd(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tR){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Gr;if(n&&[a,l,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var w,g,b;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(g=m.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var w,g,b,y,v,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,S=(w=m.filter)===null||w===void 0?void 0:w.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(v=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return _==="*"||_===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:g,table:b,commit_timestamp:y,type:v,errors:x}=w;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:y,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(w))}m.callback(f,n)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Yi.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gr.close,{},e)}_onError(e){this._on(Gr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Jv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Jv(e.columns,e.old_record)),r}}const Rd=()=>{},Fl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cR=[1e3,2e3,5e3,1e4],uR=1e4,dR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fR{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xh,this.transport=null,this.heartbeatIntervalMs=Fl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rd,this.ref=0,this.reconnectTimer=null,this.vsn=Yv,this.logger=Rd,this.conn=null,this.sendBuffer=[],this.serializer=new rR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${bh.websocket}`,this.httpEndpoint=bb(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YP.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case rs.connecting:return Hs.Connecting;case rs.open:return Hs.Open;case rs.closing:return Hs.Closing;default:return Hs.Closed}}isConnected(){return this.connectionState()===Hs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Yi(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(eR,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===rs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===rs.open||this.conn.readyState===rs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([dR],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:XP};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Gr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new wb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,l,u,d,h,f,m;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:xh,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Fl.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Rd,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Yv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:w=>cR[w-1]||uR,this.vsn){case yb:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(w,g)=>g(JSON.stringify(w)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(w,g)=>g(JSON.parse(w));break;case ZP:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Va=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hR(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function pR(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function mR(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=hR(t.baseUrl,n,s),l=await pR(t.auth),u=await e(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,w=m==null?void 0:m.error;throw new Va((w==null?void 0:w.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function Bl(t){return t.join("")}var gR=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Bl(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bl(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bl(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bl(t.namespace)}`}),!0}catch(e){if(e instanceof Va&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Va&&r.status===409)return;throw r}}};function Ci(t){return t.join("")}var vR=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ci(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ci(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ci(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ci(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ci(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ci(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Va&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Va&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},yR=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=mR({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new gR(this.client,e),this.tableOps=new vR(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Du=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var wR=class extends Du{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Sh=class extends Du{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const wm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xR=()=>Response,Eh=t=>{if(Array.isArray(t))return t.map(r=>Eh(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Eh(n)}),e},bR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_R=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function qa(t){"@babel/helpers - typeof";return qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(t)}function SR(t,e){if(qa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ER(t){var e=SR(t,"string");return qa(e)=="symbol"?e:e+""}function CR(t,e,r){return(e=ER(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function me(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e0(Object(r),!0).forEach(function(n){CR(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e0(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Ad=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},kR=async(t,e,r)=>{t instanceof await xR()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const s=t.status||500,i=(n==null?void 0:n.statusCode)||s+"";e(new wR(Ad(n),s,i))}).catch(n=>{e(new Sh(Ad(n),n))}):e(new Sh(Ad(t),t))},TR=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(bR(n)?(s.headers=me({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),me(me({},s),r))};async function hl(t,e,r,n,s,i){return new Promise((o,a)=>{t(r,TR(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>kR(l,a,n))})}async function Ka(t,e,r,n){return hl(t,"GET",e,r,n)}async function Hr(t,e,r,n,s){return hl(t,"POST",e,n,s,r)}async function Ch(t,e,r,n,s){return hl(t,"PUT",e,n,s,r)}async function jR(t,e,r,n){return hl(t,"HEAD",e,me(me({},r),{},{noResolveJson:!0}),n)}async function xm(t,e,r,n,s){return hl(t,"DELETE",e,n,s,r)}var NR=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}};let _b;_b=Symbol.toStringTag;var OR=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[_b]="BlobDownloadBuilder",this.promise=null}asStream(){return new NR(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}};const PR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},t0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var RR=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=wm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var s=this;try{let i;const o=me(me({},t0),n);let a=me(me({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=me(me({},a),n.headers));const u=s._removeEmptyFolders(e),d=s._getFinalPath(u),h=await(t=="PUT"?Ch:Hr)(s.fetch,`${s.url}/object/${d}`,i,me({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=me({upsert:t0.upsert},n),d=me(me({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Ch(s.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const s=me({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Hr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),a=o.searchParams.get("token");if(!a)throw new Du("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Hr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async copy(t,e,r){var n=this;try{return{data:{path:(await Hr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,r){var n=this;try{let s=n._getFinalPath(t),i=await Hr(n.fetch,`${n.url}/object/sign/${s}`,me({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,r){var n=this;try{const s=await Hr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>me(me({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(t),o=()=>Ka(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new OR(o,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:Eh(await Ka(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await jR(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Xe(n)&&n instanceof Sh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}async remove(t){var e=this;try{return{data:await xm(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const s=me(me(me({},PR),e),{},{prefix:t||""});return{data:await Hr(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async listV2(t,e){var r=this;try{const n=me({},t);return{data:await Hr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Sb="2.89.0",Eb={"X-Client-Info":`storage-js/${Sb}`};var AR=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=me(me({},Eb),e),this.fetch=wm(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Ka(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Ka(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Hr(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await Ch(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await xm(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},IR=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=me(me({},Eb),e),this.fetch=wm(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Ka(e.fetch,s,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await xm(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!_R(t))throw new Du("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new yR({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const bm={"X-Client-Info":`storage-js/${Sb}`,"Content-Type":"application/json"};var Cb=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function gr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Id=class extends Cb{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},DR=class extends Cb{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const _m=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),LR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},r0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),MR=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";e(new Id(r0(i),n,o))}).catch(()=>{const i=n+"";e(new Id(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";e(new Id(s.statusText||`HTTP ${n} error`,n,i))}}else e(new DR(r0(t),t))},$R=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(LR(n)?(s.headers=me({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,me(me({},s),r)):s};async function UR(t,e,r,n,s,i){return new Promise((o,a)=>{t(r,$R(e,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>MR(l,a,n))})}async function vr(t,e,r,n,s){return UR(t,"POST",e,n,s,r)}var FR=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=me(me({},bm),e),this.fetch=_m(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await vr(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await vr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await vr(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await vr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}}},BR=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=me(me({},bm),e),this.fetch=_m(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await vr(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await vr(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await vr(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await vr(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await vr(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}},zR=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=me(me({},bm),e),this.fetch=_m(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await vr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await vr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await vr(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await vr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}}},WR=class extends zR{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new HR(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},HR=class extends FR{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,me(me({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,me(me({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new VR(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},VR=class extends BR{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,me(me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,me(me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,me(me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,me(me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,me(me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},qR=class extends AR{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new RR(this.url,this.headers,t,this.fetch)}get vectors(){return new WR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new IR(this.url+"/iceberg",this.headers,this.fetch)}};const kb="2.89.0",Li=30*1e3,kh=3,Dd=kh*Li,KR="http://localhost:9999",GR="supabase.auth.token",QR={"X-Client-Info":`gotrue-js/${kb}`},Th="X-Supabase-Api-Version",Tb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},YR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JR=10*60*1e3;class Ga extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class XR extends Ga{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function ZR(t){return te(t)&&t.name==="AuthApiError"}class Vs extends Ga{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Wn extends Ga{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class dr extends Wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function e5(t){return te(t)&&t.name==="AuthSessionMissingError"}class ki extends Wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zl extends Wn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wl extends Wn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function t5(t){return te(t)&&t.name==="AuthImplicitGrantRedirectError"}class n0 extends Wn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class r5 extends Wn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jh extends Wn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ld(t){return te(t)&&t.name==="AuthRetryableFetchError"}class s0 extends Wn{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Nh extends Wn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),i0=` 	
\r=`.split(""),n5=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<i0.length;e+=1)t[i0[e].charCodeAt(0)]=-2;for(let e=0;e<Jc.length;e+=1)t[Jc[e].charCodeAt(0)]=e;return t})();function o0(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Jc[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Jc[n]),e.queuedBits-=6}}function jb(t,e,r){const n=n5[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function a0(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{o5(o,n,r)};for(let o=0;o<t.length;o+=1)jb(t.charCodeAt(o),s,i);return e.join("")}function s5(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function i5(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}s5(n,e)}}function o5(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function io(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)jb(t.charCodeAt(s),r,n);return new Uint8Array(e)}function a5(t){const e=[];return i5(t,r=>e.push(r)),new Uint8Array(e)}function Qs(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>o0(s,r,n)),o0(null,r,n),e.join("")}function l5(t){return Math.round(Date.now()/1e3)+t}function c5(){return Symbol("auth-callback")}const jt=()=>typeof window<"u"&&typeof document<"u",$s={tested:!1,writable:!1},Nb=()=>{if(!jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($s.tested)return $s.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),$s.tested=!0,$s.writable=!0}catch{$s.tested=!0,$s.writable=!1}return $s.writable};function u5(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Ob=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),d5=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Mi=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Us=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},kt=async(t,e)=>{await t.removeItem(e)};class Lu{constructor(){this.promise=new Lu.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Lu.promiseConstructor=Promise;function Md(t){const e=t.split(".");if(e.length!==3)throw new Nh("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!YR.test(e[n]))throw new Nh("JWT not in base64url format");return{header:JSON.parse(a0(e[0])),payload:JSON.parse(a0(e[1])),signature:io(e[2]),raw:{header:e[0],payload:e[1]}}}async function f5(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function h5(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function p5(t){return("0"+t.toString(16)).substr(-2)}function m5(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,p5).join("")}async function g5(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function v5(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await g5(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ti(t,e,r=!1){const n=m5();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Mi(t,`${e}-code-verifier`,s);const i=await v5(n);return[i,n===i?"plain":"s256"]}const y5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w5(t){const e=t.headers.get(Th);if(!e||!e.match(y5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function x5(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function b5(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ji(t){if(!_5.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $d(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function S5(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function l0(t){return JSON.parse(JSON.stringify(t))}const Ws=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),E5=[502,503,504];async function c0(t){var e;if(!d5(t))throw new jh(Ws(t),0);if(E5.includes(t.status))throw new jh(Ws(t),t.status);let r;try{r=await t.json()}catch(i){throw new Vs(Ws(i),i)}let n;const s=w5(t);if(s&&s.getTime()>=Tb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new s0(Ws(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new dr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new s0(Ws(r),t.status,r.weak_password.reasons);throw new XR(Ws(r),t.status||500,n)}const C5=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function pe(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Th]||(i[Th]=Tb["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await k5(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function k5(t,e,r,n,s,i){const o=C5(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new jh(Ws(l),0)}if(a.ok||await c0(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await c0(l)}}function Fr(t){var e;let r=null;N5(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=l5(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function u0(t){const e=Fr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function os(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function T5(t){return{data:t,error:null}}function j5(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=Lo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function d0(t){return t}function N5(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ud=["global","local","others"];class O5{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Ob(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Ud[0]){if(Ud.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ud.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:os})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Lo(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:j5,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:os})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:d0});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(te(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ji(e);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:os})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ji(e);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:os})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ji(e);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:os})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ji(e.userId);try{const{data:r,error:n}=await pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ji(e.userId),ji(e.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:d0});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(te(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}}function f0(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ni={debug:!!(globalThis&&Nb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Pb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class P5 extends Pb{}async function R5(t,e,r){Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new P5(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ni.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function A5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rb(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function I5(t){return parseInt(t,16)}function D5(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function L5(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=Rb(t.address),w=d?`${d}://${n}`:n,g=t.statement?`${t.statement}
`:"",b=`${w} wants you to sign in with your Ethereum account:
${m}

${g}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),u){let v=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);v+=`
- ${x}`}y+=v}return`${b}
${y}`}class ut extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Xc extends ut{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function M5({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ut({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Ab(o)){if(i.rp.id!==o)return new ut({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function $5({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ut({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Ab(n)){if(r.rpId!==n)return new ut({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class U5{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const F5=new U5;function B5(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Lo(t,["challenge","user","excludeCredentials"]),i=io(e).buffer,o=Object.assign(Object.assign({},r),{id:io(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:io(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function z5(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Lo(t,["challenge","allowCredentials"]),s=io(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:io(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function W5(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Qs(new Uint8Array(t.response.attestationObject)),clientDataJSON:Qs(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function H5(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Qs(new Uint8Array(s.authenticatorData)),clientDataJSON:Qs(new Uint8Array(s.clientDataJSON)),signature:Qs(new Uint8Array(s.signature)),userHandle:s.userHandle?Qs(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ab(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function h0(){var t,e;return!!(jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function V5(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xc("Browser returned unexpected credential type",e)}:{data:null,error:new Xc("Empty credential response",e)}}catch(e){return{data:null,error:M5({error:e,options:t})}}}async function q5(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xc("Browser returned unexpected credential type",e)}:{data:null,error:new Xc("Empty credential response",e)}}catch(e){return{data:null,error:$5({error:e,options:t})}}}const K5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},G5={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zc(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=Zc(a,o):n[i]=Zc(o)}else n[i]=o}return n}function Q5(t,e){return Zc(K5,t,e||{})}function Y5(t,e){return Zc(G5,t,e||{})}class J5{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const l=s??F5.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Q5(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await V5({publicKey:u,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=Y5(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await q5(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return te(o)?{data:null,error:o}:{data:null,error:new Vs("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ga("rpId is required for WebAuthn authentication")};try{if(!h0())return{data:null,error:new Vs("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return te(o)?{data:null,error:o}:{data:null,error:new Vs("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ga("rpId is required for WebAuthn registration")};try{if(!h0())return{data:null,error:new Vs("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return te(o)?{data:null,error:o}:{data:null,error:new Vs("Unexpected error in register",o)}}}}A5();const X5={url:KR,storageKey:GR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function p0(t,e,r){return await r()}const Oi={};class Qa{get jwks(){var e,r;return(r=(e=Oi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Oi[this.storageKey]=Object.assign(Object.assign({},Oi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Oi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Oi[this.storageKey]=Object.assign(Object.assign({},Oi[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},X5),e);if(this.storageKey=i.storageKey,this.instanceID=(r=Qa.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qa.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&jt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new O5({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ob(i.fetch),this.lock=i.lock||p0,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&jt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=R5:this.lock=p0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new J5(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Nb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=f0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=f0(this.memoryStorage)),jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${kb}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(jt()&&(r=u5(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),jt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),t5(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return te(r)?this._returnResult({error:r}):this._returnResult({error:new Vs("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Fr}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await Ti(this.storage,this.storageKey)),i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:w},xform:Fr})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Fr})}else throw new zl("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await kt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await kt(this.storage,`${this.storageKey}-code-verifier`),te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:u0})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:u0})}else throw new zl("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new ki;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,o,a,l,u,d,h,f;let m,w;if("message"in e)m=e.message,w=e.signature;else{const{chain:g,wallet:b,statement:y,options:v}=e;let x;if(jt())if(typeof b=="object")x=b;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")x=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const _=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),S=await x.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=Rb(S[0]);let k=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const L=await x.request({method:"eth_chainId"});k=I5(L)}const j={domain:_.host,address:E,statement:y,uri:_.href,version:"1",chainId:k,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=L5(j),w=await x.request({method:"personal_sign",params:[D5(m),E]})}try{const{data:g,error:b}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:w},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Fr});if(b)throw b;if(!g||!g.session||!g.user){const y=new ki;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(te(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var r,n,s,i,o,a,l,u,d,h,f,m;let w,g;if("message"in e)w=e.message,g=e.signature;else{const{chain:b,wallet:y,statement:v,options:x}=e;let _;if(jt())if(typeof y=="object")_=y;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const S=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let k;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")k=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)k=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)w=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(w),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=E}}try{const{data:b,error:y}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Qs(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Fr});if(y)throw y;if(!b||!b.session||!b.user){const v=new ki;return this._returnResult({data:{user:null,session:null},error:v})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:y})}catch(b){if(te(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await Us(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new r5;const{data:i,error:o}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Fr});if(await kt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new ki;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await kt(this.storage,`${this.storageKey}-code-verifier`),te(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Fr}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new ki;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ti(this.storage,this.storageKey));const{error:h}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new zl("You must provide either an email or phone number.")}catch(a){if(await kt(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Fr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(te(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ti(this.storage,this.storageKey));const u=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:T5});return!((i=u.data)===null||i===void 0)&&i.url&&jt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await kt(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new dr;const{error:s}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(te(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new zl("You must provide either an email or phone number and a type")}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Dd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Us(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=$d()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=S5(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:os}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dr}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:os})})}catch(r){if(te(r))return e5(r)&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new dr;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ti(this.storage,this.storageKey));const{data:u,error:d}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:os});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await kt(this.storage,`${this.storageKey}-code-verifier`),te(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Md(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(te(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new dr;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!jt())throw new Wl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new n0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new n0("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new Wl("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const m=f-d;m*1e3<=Li&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const w=f-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(n){if(te(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Us(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ZR(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=c5(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ti(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await kt(this.storage,`${this.storageKey}-code-verifier`),te(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return jt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(te(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:d}=e,h=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fr}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new ki}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await kt(this.storage,`${this.storageKey}-code-verifier`),te(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await h5(async s=>(s>0&&await f5(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ld(i)&&Date.now()+o-n<Li})}catch(n){if(this._debug(r,"error",n),te(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),jt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Us(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Us(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Mi(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:$d()}else if(s&&!s.user&&!s.user){const o=await Us(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await kt(this.storage,this.storageKey+"-user"),await Mi(this.storage,this.storageKey,s)):s.user=$d()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Dd;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Dd}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ld(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new dr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Lu;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new dr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),te(i)){const o={data:null,error:i};return Ld(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await kt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Mi(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=l0(s);await Mi(this.storage,this.storageKey,i)}else{const s=l0(r);await Mi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await kt(this.storage,this.storageKey),await kt(this.storage,this.storageKey+"-code-verifier"),await kt(this.storage,this.storageKey+"-user"),this.userStorage&&await kt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Li);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Li);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Li}ms, refresh threshold is ${kh} ticks`),s<=kh&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Pb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ti(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?W5(e.webauthn.credential_response):H5(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:B5(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:z5(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Md(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new dr})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new dr});const o=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&jt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new dr});const o=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&jt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new dr})})}catch(e){if(te(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new dr})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+JR>s)return n;const{data:i,error:o}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:m,error:w}=await this.getSession();if(w||!m.session)return this._returnResult({data:null,error:w});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Md(n);r!=null&&r.allowExpired||x5(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=b5(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,a5(`${a}.${l}`)))throw new Nh("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}}Qa.nextInstanceID={};const Z5=Qa,eA="2.89.0";let na="";typeof Deno<"u"?na="deno":typeof document<"u"?na="web":typeof navigator<"u"&&navigator.product==="ReactNative"?na="react-native":na="node";const tA={"X-Client-Info":`supabase-js-${na}/${eA}`},rA={headers:tA},nA={schema:"public"},sA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iA={};function Ya(t){"@babel/helpers - typeof";return Ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(t)}function oA(t,e){if(Ya(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ya(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aA(t){var e=oA(t,"string");return Ya(e)=="symbol"?e:e+""}function lA(t,e,r){return(e=aA(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m0(Object(r),!0).forEach(function(n){lA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m0(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const cA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uA=()=>Headers,dA=(t,e,r)=>{const n=cA(r),s=uA();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,nt(nt({},o),{},{headers:u}))}};function fA(t){return t.endsWith("/")?t:t+"/"}function hA(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:h}=e,f={db:nt(nt({},l),s),auth:nt(nt({},u),i),realtime:nt(nt({},d),o),storage:{},global:nt(nt(nt({},h),a),{},{headers:nt(nt({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function pA(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var mA=class extends Z5{constructor(t){super(t)}},gA=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const i=pA(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:nA,realtime:iA,auth:nt(nt({},sA),{},{storageKey:o}),global:rA},l=hA(r??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=dA(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(nt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new QP(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new qR(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new HP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mA({url:this.authUrl.href,headers:nt(nt({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new fR(this.realtimeUrl.href,nt(nt({},t),{},{params:nt(nt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const vA=(t,e,r)=>new gA(t,e,r);function yA(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}yA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wA="https://nvuukgeobhrrwttbiaif.supabase.co",xA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52dXVrZ2VvYmhycnd0dGJpYWlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzOTM0MDIsImV4cCI6MjA4MTk2OTQwMn0.XoAFIsxESUJVd8Zrjw0kMytmccJZV0Tn0x5YwjTKvNk",ee=vA(wA,xA,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Ib=p.createContext(void 0),bA=({children:t})=>{const[e,r]=p.useState(null),[n,s]=p.useState(null),[i,o]=p.useState(null),[a,l]=p.useState(!0),[u,d]=p.useState(!1);yi();const h=async y=>{const{data:v,error:x}=await ee.from("profiles").select("*").eq("user_id",y).single();v&&!x&&o(v)},f=async y=>{const{data:v,error:x}=await ee.from("user_roles").select("role").eq("user_id",y).eq("role","admin").single();d(!!v&&!x)};p.useEffect(()=>{const{data:{subscription:y}}=ee.auth.onAuthStateChange((v,x)=>{s(x),r((x==null?void 0:x.user)??null),x!=null&&x.user?setTimeout(()=>{h(x.user.id),f(x.user.id)},0):(o(null),d(!1))});return ee.auth.getSession().then(({data:{session:v}})=>{s(v),r((v==null?void 0:v.user)??null),v!=null&&v.user&&(h(v.user.id),f(v.user.id)),l(!1)}),()=>y.unsubscribe()},[]);const m=y=>{const v=y.trim().split(" ");return v.length>=2?(v[0][0]+v[v.length-1][0]).toUpperCase():v[0].substring(0,2).toUpperCase()},w=async(y,v,x,_)=>{const{data:S}=await ee.from("profiles").select("username").eq("username",y).single();if(S)return{error:{message:"Username already taken"}};const E=`${y.toLowerCase().replace(/[^a-z0-9]/g,"")}@chessgambit.local`,{data:k,error:j}=await ee.auth.signUp({email:E,password:v,options:{emailRedirectTo:`${window.location.origin}/`,data:{username:y,full_name:x}}});if(j)return{error:j};if(k.user){const L=m(x),{error:M}=await ee.from("profiles").insert({user_id:k.user.id,username:y,full_name:x,avatar_url:_||null,avatar_initials:L});if(M)return{error:M};await ee.from("user_roles").insert({user_id:k.user.id,role:"player"})}return{error:null}},g=async(y,v)=>{const{data:x}=await ee.from("profiles").select("user_id").eq("username",y).single();if(!x)return{error:{message:"Username not found"}};const _=`${y.toLowerCase().replace(/[^a-z0-9]/g,"")}@chessgambit.local`,{error:S}=await ee.auth.signInWithPassword({email:_,password:v});return{error:S}},b=async()=>{await ee.auth.signOut(),r(null),s(null),o(null),d(!1)};return c.jsx(Ib.Provider,{value:{user:e,session:n,profile:i,loading:a,signUp:w,signIn:g,signOut:b,isAdmin:u},children:t})},bi=()=>{const t=p.useContext(Ib);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Sm=tm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),be=p.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const o=n?n2:"button";return c.jsx(o,{className:Se(Sm({variant:e,size:r,className:t})),ref:i,...s})});be.displayName="Button";const g0="christmas-gambit-theme",_A=()=>{const[t,e]=p.useState(()=>{const n=localStorage.getItem(g0);return n!==null?n==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});p.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem(g0,t?"dark":"light")},[t]);const r=()=>{e(n=>!n)};return c.jsx(be,{variant:"ghost",size:"icon",onClick:r,className:"relative overflow-hidden transition-all duration-300",children:t?c.jsx(sT,{className:"h-5 w-5 text-neon-cyan animate-scale-in"}):c.jsx(lT,{className:"h-5 w-5 text-accent animate-scale-in"})})},SA=()=>{const{user:t,profile:e,signOut:r}=bi(),n=fl(),s=async()=>{await r(),n("/")};return c.jsx("nav",{className:"sticky top-0 z-40 w-full border-b border-border bg-background/80 backdrop-blur-md",children:c.jsx("div",{className:"container mx-auto px-4",children:c.jsxs("div",{className:"flex h-16 items-center justify-between",children:[c.jsxs(Yr,{to:"/",className:"flex items-center gap-3 group",children:[c.jsxs("div",{className:"relative",children:[c.jsx(An,{className:"h-8 w-8 text-primary group-hover:animate-float transition-all"}),c.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:""})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-display text-lg font-bold tracking-wide text-foreground",children:"Christmas Gambit Cup"}),c.jsx("span",{className:"text-xs text-muted-foreground font-gamer-body",children:"DPSBE 2K25 "})]})]}),c.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[c.jsxs(Yr,{to:"/practice",className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors font-gamer-body",children:[c.jsx(ih,{className:"h-4 w-4"}),"Practice"]}),c.jsxs(Yr,{to:"/standings",className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors font-gamer-body",children:[c.jsx($n,{className:"h-4 w-4"}),"Standings"]}),c.jsxs(Yr,{to:"/champions",className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors font-gamer-body",children:[c.jsx(An,{className:"h-4 w-4"}),"Champions"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(_A,{}),t?c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Yr,{to:"/profile",children:c.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",children:[e!=null&&e.avatar_url?c.jsx("img",{src:e.avatar_url,alt:e.username,className:"h-6 w-6 rounded-full object-cover"}):e!=null&&e.avatar_initials?c.jsx("div",{className:"h-6 w-6 rounded-full bg-primary flex items-center justify-center text-primary-foreground text-xs font-bold",children:e.avatar_initials}):c.jsx(c1,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:e==null?void 0:e.username})]})}),c.jsxs(be,{variant:"outline",size:"sm",onClick:s,className:"gap-2",children:[c.jsx(tT,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]}):c.jsx(Yr,{to:"/auth",children:c.jsxs(be,{variant:"default",size:"sm",className:"gap-2",children:[c.jsx(eT,{className:"h-4 w-4"}),"Sign In"]})})]})]})})})},EA=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!1);return p.useEffect(()=>{const s=()=>{n(document.documentElement.classList.contains("dark"))};s();const i=new MutationObserver(s);return i.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>i.disconnect()},[]),p.useEffect(()=>{if(r){e([]);return}const s=["","","","",""],i=Array.from({length:30},(o,a)=>({id:a,left:Math.random()*100,size:Math.random()*.8+.5,duration:Math.random()*8+8,delay:Math.random()*10,symbol:s[Math.floor(Math.random()*s.length)]}));e(i)},[r]),r?null:c.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-50",children:t.map(s=>c.jsx("span",{className:"snowflake",style:{left:`${s.left}%`,fontSize:`${s.size}em`,animationDuration:`${s.duration}s`,animationDelay:`${s.delay}s`},children:s.symbol},s.id))})},Fe=p.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Se("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Fe.displayName="Card";const Bt=p.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Se("flex flex-col space-y-1.5 p-6",t),...e}));Bt.displayName="CardHeader";const zt=p.forwardRef(({className:t,...e},r)=>c.jsx("h3",{ref:r,className:Se("text-2xl font-semibold leading-none tracking-tight",t),...e}));zt.displayName="CardTitle";const Ja=p.forwardRef(({className:t,...e},r)=>c.jsx("p",{ref:r,className:Se("text-sm text-muted-foreground",t),...e}));Ja.displayName="CardDescription";const We=p.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Se("p-6 pt-0",t),...e}));We.displayName="CardContent";const CA=p.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Se("flex items-center p-6 pt-0",t),...e}));CA.displayName="CardFooter";const kA=()=>{const{user:t}=bi();return c.jsxs("div",{className:"min-h-screen",children:[c.jsxs("section",{className:"relative py-20 md:py-32 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-secondary/10"}),c.jsx("div",{className:"container mx-auto px-4 relative z-10",children:c.jsxs("div",{className:"text-center max-w-4xl mx-auto animate-fade-in-up",children:[c.jsx("div",{className:"flex justify-center mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(An,{className:"h-24 w-24 text-primary trophy-shine"}),c.jsx("span",{className:"absolute -top-4 -right-4 text-4xl animate-float",children:""}),c.jsx("span",{className:"absolute -bottom-2 -left-4 text-3xl animate-float",style:{animationDelay:"0.5s"},children:""})]})}),c.jsx("h1",{className:"font-display text-4xl md:text-6xl lg:text-7xl font-bold mb-6 bg-clip-text text-transparent bg-christmas-gradient dark:bg-neon-gradient",children:"Christmas Gambit Cup"}),c.jsx("p",{className:"font-gamer text-2xl md:text-3xl text-accent dark:text-neon-cyan mb-4",children:" DPSBE 2K25 "}),c.jsx("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto font-gamer-body",children:"The ultimate DPSBE chess tournament. Compete, strategize, and claim your place among champions."}),c.jsx("div",{className:"candy-divider w-48 mx-auto mb-8 dark:hidden"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t?c.jsx(Yr,{to:"/profile",children:c.jsxs(be,{size:"lg",className:"gap-2 text-lg px-8",children:[c.jsx(u1,{className:"h-5 w-5"}),"My Profile"]})}):c.jsx(Yr,{to:"/auth",children:c.jsxs(be,{size:"lg",className:"gap-2 text-lg px-8 animate-glow-pulse",children:[c.jsx($a,{className:"h-5 w-5"}),"Join Tournament"]})}),c.jsx(Yr,{to:"/standings",children:c.jsxs(be,{variant:"outline",size:"lg",className:"gap-2 text-lg px-8",children:[c.jsx($n,{className:"h-5 w-5"}),"View Standings"]})})]})]})})]}),c.jsx("section",{className:"py-16 bg-card/50",children:c.jsx("div",{className:"container mx-auto px-4",children:c.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[c.jsx(Fe,{className:"card-hover border-2 group",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:c.jsx($a,{className:"h-8 w-8 text-primary"})}),c.jsx("h3",{className:"font-display text-xl font-bold mb-2",children:"Live Games"}),c.jsx("p",{className:"text-muted-foreground font-gamer-body",children:"Play real-time chess matches with automatic time controls and result tracking."})]})}),c.jsx(Fe,{className:"card-hover border-2 group",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsx("div",{className:"h-16 w-16 rounded-full bg-secondary/20 flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:c.jsx($n,{className:"h-8 w-8 text-secondary dark:text-neon-purple"})}),c.jsx("h3",{className:"font-display text-xl font-bold mb-2",children:"Multiple Formats"}),c.jsx("p",{className:"text-muted-foreground font-gamer-body",children:"Swiss, Knockouts, Round Robin, Arena  choose your battle style."})]})}),c.jsx(Fe,{className:"card-hover border-2 group",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsx("div",{className:"h-16 w-16 rounded-full bg-accent/20 flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:c.jsx(G2,{className:"h-8 w-8 text-accent dark:text-neon-magenta"})}),c.jsx("h3",{className:"font-display text-xl font-bold mb-2",children:"Auto Pairings"}),c.jsx("p",{className:"text-muted-foreground font-gamer-body",children:"Automatic matchmaking, standings updates, and tournament progression."})]})})]})})}),c.jsx("section",{className:"py-20",children:c.jsxs("div",{className:"container mx-auto px-4 text-center",children:[c.jsx("h2",{className:"font-display text-3xl md:text-4xl font-bold mb-4",children:"Ready to Make Your Move?"}),c.jsx("p",{className:"text-muted-foreground mb-8 font-gamer-body text-lg",children:"Join the tournament and compete for the Christmas Gambit Cup!"}),c.jsx(Yr,{to:t?"/profile":"/auth",children:c.jsxs(be,{size:"lg",className:"gap-2",children:["Get Started ",c.jsx(Y2,{className:"h-5 w-5"})]})})]})}),c.jsx("footer",{className:"py-8 border-t border-border",children:c.jsx("div",{className:"container mx-auto px-4 text-center text-muted-foreground font-gamer-body",children:c.jsx("p",{children:" Christmas Gambit Cup  DPSBE 2K25 "})})})]})},Jr=p.forwardRef(({className:t,type:e,...r},n)=>c.jsx("input",{type:e,className:Se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Jr.displayName="Input";var TA="Label",Db=p.forwardRef((t,e)=>c.jsx(ke.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Db.displayName=TA;var Lb=Db;const jA=tm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),mr=p.forwardRef(({className:t,...e},r)=>c.jsx(Lb,{ref:r,className:Se(jA(),t),...e}));mr.displayName=Lb.displayName;var NA=p.createContext(void 0);function Em(t){const e=p.useContext(NA);return t||e||"ltr"}var Fd="rovingFocusGroup.onEntryFocus",OA={bubbles:!1,cancelable:!0},pl="RovingFocusGroup",[Oh,Mb,PA]=Jp(pl),[RA,$b]=zn(pl,[PA]),[AA,IA]=RA(pl),Ub=p.forwardRef((t,e)=>c.jsx(Oh.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(Oh.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(DA,{...t,ref:e})})}));Ub.displayName=pl;var DA=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=p.useRef(null),m=Ue(e,f),w=Em(i),[g,b]=Co({prop:o,defaultProp:a??null,onChange:l,caller:pl}),[y,v]=p.useState(!1),x=Dr(u),_=Mb(r),S=p.useRef(!1),[E,k]=p.useState(0);return p.useEffect(()=>{const j=f.current;if(j)return j.addEventListener(Fd,x),()=>j.removeEventListener(Fd,x)},[x]),c.jsx(AA,{scope:r,orientation:n,dir:w,loop:s,currentTabStopId:g,onItemFocus:p.useCallback(j=>b(j),[b]),onItemShiftTab:p.useCallback(()=>v(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(j=>j+1),[]),onFocusableItemRemove:p.useCallback(()=>k(j=>j-1),[]),children:c.jsx(ke.div,{tabIndex:y||E===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:ue(t.onMouseDown,()=>{S.current=!0}),onFocus:ue(t.onFocus,j=>{const L=!S.current;if(j.target===j.currentTarget&&L&&!y){const M=new CustomEvent(Fd,OA);if(j.currentTarget.dispatchEvent(M),!M.defaultPrevented){const X=_().filter($=>$.focusable),U=X.find($=>$.active),V=X.find($=>$.id===g),W=[U,V,...X].filter(Boolean).map($=>$.ref.current);zb(W,d)}}S.current=!1}),onBlur:ue(t.onBlur,()=>v(!1))})})}),Fb="RovingFocusGroupItem",Bb=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=Ss(),u=i||l,d=IA(Fb,r),h=d.currentTabStopId===u,f=Mb(r),{onFocusableItemAdd:m,onFocusableItemRemove:w,currentTabStopId:g}=d;return p.useEffect(()=>{if(n)return m(),()=>w()},[n,m,w]),c.jsx(Oh.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:c.jsx(ke.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:ue(t.onMouseDown,b=>{n?d.onItemFocus(u):b.preventDefault()}),onFocus:ue(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ue(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const y=$A(b,d.orientation,d.dir);if(y!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=f().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const _=x.indexOf(b.currentTarget);x=d.loop?UA(x,_+1):x.slice(_+1)}setTimeout(()=>zb(x))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});Bb.displayName=Fb;var LA={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function MA(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function $A(t,e,r){const n=MA(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return LA[n]}function zb(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function UA(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var FA=Ub,BA=Bb,Mu="Tabs",[zA,TM]=zn(Mu,[$b]),Wb=$b(),[WA,Cm]=zA(Mu),Hb=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,d=Em(a),[h,f]=Co({prop:n,onChange:s,defaultProp:i??"",caller:Mu});return c.jsx(WA,{scope:r,baseId:Ss(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:l,children:c.jsx(ke.div,{dir:d,"data-orientation":o,...u,ref:e})})});Hb.displayName=Mu;var Vb="TabsList",qb=p.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,i=Cm(Vb,r),o=Wb(r);return c.jsx(FA,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:c.jsx(ke.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});qb.displayName=Vb;var Kb="TabsTrigger",Gb=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=t,o=Cm(Kb,r),a=Wb(r),l=Jb(o.baseId,n),u=Xb(o.baseId,n),d=n===o.value;return c.jsx(BA,{asChild:!0,...a,focusable:!s,active:d,children:c.jsx(ke.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:ue(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:ue(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:ue(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(n)})})})});Gb.displayName=Kb;var Qb="TabsContent",Yb=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=t,a=Cm(Qb,r),l=Jb(a.baseId,n),u=Xb(a.baseId,n),d=n===a.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),c.jsx(wi,{present:s||d,children:({present:f})=>c.jsx(ke.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});Yb.displayName=Qb;function Jb(t,e){return`${t}-trigger-${e}`}function Xb(t,e){return`${t}-content-${e}`}var HA=Hb,Zb=qb,e_=Gb,t_=Yb;const VA=HA,r_=p.forwardRef(({className:t,...e},r)=>c.jsx(Zb,{ref:r,className:Se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));r_.displayName=Zb.displayName;const Ph=p.forwardRef(({className:t,...e},r)=>c.jsx(e_,{ref:r,className:Se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Ph.displayName=e_.displayName;const Rh=p.forwardRef(({className:t,...e},r)=>c.jsx(t_,{ref:r,className:Se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Rh.displayName=t_.displayName;const qA=()=>{const[t,e]=p.useState(!1),[r,n]=p.useState(!1),[s,i]=p.useState(null),[o,a]=p.useState(null),l=p.useRef(null),[u,d]=p.useState(""),[h,f]=p.useState(""),[m,w]=p.useState(""),[g,b]=p.useState(""),[y,v]=p.useState(""),[x,_]=p.useState(""),[S,E]=p.useState("idle"),[k,j]=p.useState(null),{signIn:L,signUp:M,user:X}=bi(),{toast:U}=yi(),V=fl();if(X)return V("/"),null;p.useEffect(()=>{if(m.length<3){E("idle"),j(m.length>0?"Username must be at least 3 characters":null);return}if(!/^[a-zA-Z0-9_]+$/.test(m)){E("idle"),j("Username can only contain letters, numbers, and underscores");return}j(null),E("checking");const C=setTimeout(async()=>{const{data:F}=await ee.from("profiles").select("username").eq("username",m).maybeSingle();F?(E("taken"),j("This username is already taken")):(E("available"),j(null))},500);return()=>clearTimeout(C)},[m]);const O=T=>{var F;const C=(F=T.target.files)==null?void 0:F[0];if(C){a(C);const K=new FileReader;K.onloadend=()=>{i(K.result)},K.readAsDataURL(C)}},W=async T=>{T.preventDefault(),e(!0);const{error:C}=await L(u,h);C?U({variant:"destructive",title:"Sign in failed",description:C.message||"Invalid username or password"}):(U({title:"Welcome back!",description:"You have successfully signed in."}),V("/")),e(!1)},$=async T=>{if(T.preventDefault(),y!==x){U({variant:"destructive",title:"Passwords don't match",description:"Please make sure your passwords match."});return}if(y.length<6){U({variant:"destructive",title:"Password too short",description:"Password must be at least 6 characters."});return}if(m.length<3||S==="taken"||k){U({variant:"destructive",title:"Invalid username",description:k||"Please choose a valid unique username."});return}e(!0);let C;if(o){const K=`${Date.now()}`,R=o.name.split(".").pop(),G=`temp/${K}.${R}`,{error:J}=await ee.storage.from("avatars").upload(G,o,{upsert:!0});if(!J){const{data:oe}=ee.storage.from("avatars").getPublicUrl(G);C=oe.publicUrl}}const{error:F}=await M(m,y,g,C);F?U({variant:"destructive",title:"Sign up failed",description:F.message||"Could not create account"}):(U({title:"Account created!",description:"Welcome to the Christmas Gambit Cup!"}),V("/")),e(!1)},q=T=>{var F;const C=T.trim().split(" ");return C.length>=2?(C[0][0]+C[C.length-1][0]).toUpperCase():((F=C[0])==null?void 0:F.substring(0,2).toUpperCase())||""};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(An,{className:"h-16 w-16 text-primary animate-float"}),c.jsx("span",{className:"absolute -top-2 -right-2 text-2xl",children:""})]})}),c.jsx("h1",{className:"font-display text-3xl font-bold text-foreground",children:"Christmas Gambit Cup"}),c.jsx("p",{className:"text-muted-foreground mt-2 font-gamer-body",children:"2K25 School Chess Tournament"})]}),c.jsx(Fe,{className:"border-2 shadow-lg card-hover",children:c.jsxs(VA,{defaultValue:"signin",className:"w-full",children:[c.jsxs(r_,{className:"grid w-full grid-cols-2",children:[c.jsx(Ph,{value:"signin",children:"Sign In"}),c.jsx(Ph,{value:"signup",children:"Sign Up"})]}),c.jsxs(Rh,{value:"signin",children:[c.jsxs(Bt,{children:[c.jsx(zt,{className:"font-display",children:"Welcome Back"}),c.jsx(Ja,{children:"Enter your credentials to continue"})]}),c.jsx(We,{children:c.jsxs("form",{onSubmit:W,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{htmlFor:"signin-username",children:"Username"}),c.jsx(Jr,{id:"signin-username",placeholder:"Enter your username",value:u,onChange:T=>d(T.target.value),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{htmlFor:"signin-password",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Jr,{id:"signin-password",type:r?"text":"password",placeholder:"Enter your password",value:h,onChange:T=>f(T.target.value),required:!0}),c.jsx(be,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>n(!r),children:r?c.jsx(ah,{className:"h-4 w-4"}):c.jsx(Ma,{className:"h-4 w-4"})})]})]}),c.jsx(be,{type:"submit",className:"w-full",disabled:t,children:t?"Signing in...":"Sign In"})]})})]}),c.jsxs(Rh,{value:"signup",children:[c.jsxs(Bt,{children:[c.jsx(zt,{className:"font-display",children:"Join the Tournament"}),c.jsx(Ja,{children:"Create your player account"})]}),c.jsx(We,{children:c.jsxs("form",{onSubmit:$,className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"relative h-24 w-24 rounded-full border-2 border-dashed border-border flex items-center justify-center cursor-pointer hover:border-primary transition-colors overflow-hidden bg-muted",onClick:()=>{var T;return(T=l.current)==null?void 0:T.click()},children:[s?c.jsx("img",{src:s,alt:"Avatar",className:"h-full w-full object-cover"}):g?c.jsx("span",{className:"text-2xl font-bold text-primary",children:q(g)}):c.jsx(c1,{className:"h-10 w-10 text-muted-foreground"}),c.jsx("div",{className:"absolute inset-0 bg-background/60 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:c.jsx(uT,{className:"h-6 w-6"})})]}),c.jsx("input",{ref:l,type:"file",accept:"image/*",className:"hidden",onChange:O}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Click to upload profile picture (optional)"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{htmlFor:"signup-username",children:"Username *"}),c.jsxs("div",{className:"relative",children:[c.jsx(Jr,{id:"signup-username",placeholder:"Choose a unique username",value:m,onChange:T=>w(T.target.value.replace(/[^a-zA-Z0-9_]/g,"")),required:!0,minLength:3,maxLength:20,className:S==="taken"?"border-destructive pr-10":S==="available"?"border-green-500 pr-10":"pr-10"}),c.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[S==="checking"&&c.jsx(sr,{className:"h-4 w-4 animate-spin text-muted-foreground"}),S==="available"&&c.jsx(i1,{className:"h-4 w-4 text-green-500"}),S==="taken"&&c.jsx(Cu,{className:"h-4 w-4 text-destructive"})]})]}),k&&c.jsx("p",{className:"text-xs text-destructive",children:k}),S==="available"&&c.jsx("p",{className:"text-xs text-green-500",children:"Username is available!"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{htmlFor:"signup-fullname",children:"Full Name *"}),c.jsx(Jr,{id:"signup-fullname",placeholder:"Your real name",value:g,onChange:T=>b(T.target.value),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{htmlFor:"signup-password",children:"Password *"}),c.jsxs("div",{className:"relative",children:[c.jsx(Jr,{id:"signup-password",type:r?"text":"password",placeholder:"Create a password",value:y,onChange:T=>v(T.target.value),required:!0,minLength:6}),c.jsx(be,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>n(!r),children:r?c.jsx(ah,{className:"h-4 w-4"}):c.jsx(Ma,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{htmlFor:"signup-confirm",children:"Confirm Password *"}),c.jsx(Jr,{id:"signup-confirm",type:"password",placeholder:"Confirm your password",value:x,onChange:T=>_(T.target.value),required:!0})]}),c.jsx(be,{type:"submit",className:"w-full",disabled:t,children:t?"Creating account...":"Create Account"})]})})]})]})})]})})},KA={sm:"h-8 w-8 text-xs",md:"h-12 w-12 text-sm",lg:"h-20 w-20 text-xl",xl:"h-32 w-32 text-3xl"},GA={sm:"h-2.5 w-2.5 right-0 bottom-0",md:"h-3 w-3 right-0 bottom-0",lg:"h-4 w-4 right-1 bottom-1",xl:"h-5 w-5 right-2 bottom-2"},en=({avatarUrl:t,initials:e,name:r,size:n="md",className:s,isOnline:i,showOnlineIndicator:o=!1})=>{const a=e||(r?QA(r):"??");return c.jsxs("div",{className:"relative inline-block",children:[c.jsx("div",{className:Se("rounded-full flex items-center justify-center font-bold bg-primary text-primary-foreground overflow-hidden ring-2 ring-border",KA[n],s),children:t?c.jsx("img",{src:t,alt:r||"Player",className:"h-full w-full object-cover"}):c.jsx("span",{children:a})}),o&&c.jsx("span",{className:Se("absolute rounded-full border-2 border-background",GA[n],i?"bg-green-500":"bg-muted-foreground/50")})]})};function QA(t){var r;const e=t.trim().split(" ");return e.length>=2?(e[0][0]+e[e.length-1][0]).toUpperCase():((r=e[0])==null?void 0:r.substring(0,2).toUpperCase())||"??"}const YA=()=>{const{user:t,profile:e,loading:r}=bi(),[n,s]=p.useState(!1),[i,o]=p.useState(""),[a,l]=p.useState(!1),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,w]=p.useState(null),[g,b]=p.useState(!1),[y,v]=p.useState(null),[x,_]=p.useState([]),S=p.useRef(null),{toast:E}=yi(),k=fl();p.useEffect(()=>{!r&&!t&&k("/auth")},[t,r,k]),p.useEffect(()=>{e&&(o(e.full_name),f(e.avatar_url))},[e]),p.useEffect(()=>{j()},[e]);const j=async()=>{const{data:O}=await ee.from("tournaments").select("*").in("status",["registration","in_progress"]).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(O&&(w(O),e)){const{data:W}=await ee.from("tournament_players").select("id").eq("tournament_id",O.id).eq("player_id",e.id).maybeSingle();if(b(!!W),O.status==="in_progress"){const{data:$}=await ee.from("games").select("id").eq("tournament_id",O.id).in("result",["pending","in_progress"]).or(`white_player_id.eq.${e.id},black_player_id.eq.${e.id}`).limit(1).maybeSingle();$&&v($.id)}}e&&L()},L=async()=>{if(!e)return;const{data:O}=await ee.from("games").select("id, result, round, white_player_id, black_player_id, ended_at").or(`white_player_id.eq.${e.id},black_player_id.eq.${e.id}`).not("result","in",'("pending","in_progress")').order("ended_at",{ascending:!1}).limit(10);if(O&&O.length>0){const W=await Promise.all(O.map(async $=>{const q=$.white_player_id===e.id?$.black_player_id:$.white_player_id,{data:T}=await ee.from("profiles").select("username, avatar_url, avatar_initials").eq("id",q).single();return{...$,opponent_username:(T==null?void 0:T.username)||"Unknown",opponent_avatar_url:(T==null?void 0:T.avatar_url)||null,opponent_avatar_initials:(T==null?void 0:T.avatar_initials)||null,played_as:$.white_player_id===e.id?"white":"black"}}));_(W)}},M=O=>{var $;const W=($=O.target.files)==null?void 0:$[0];if(W){d(W);const q=new FileReader;q.onloadend=()=>f(q.result),q.readAsDataURL(W)}},X=async()=>{if(!e||!t)return;l(!0);let O=e.avatar_url;if(u){const $=u.name.split(".").pop(),q=`${t.id}/${Date.now()}.${$}`,{error:T}=await ee.storage.from("avatars").upload(q,u,{upsert:!0});if(!T){const{data:C}=ee.storage.from("avatars").getPublicUrl(q);O=C.publicUrl}}const{error:W}=await ee.from("profiles").update({full_name:i,avatar_url:O,avatar_initials:V(i)}).eq("id",e.id);W?E({variant:"destructive",title:"Failed to update profile",description:W.message}):(E({title:"Profile updated!"}),s(!1),window.location.reload()),l(!1)},U=async()=>{if(!m||!e)return;l(!0);const{error:O}=await ee.from("tournament_players").insert({tournament_id:m.id,player_id:e.id});O?E({variant:"destructive",title:"Registration failed",description:O.message}):(E({title:"Registered!",description:"You're in the tournament!"}),b(!0)),l(!1)},V=O=>{var $;const W=O.trim().split(" ");return W.length>=2?(W[0][0]+W[W.length-1][0]).toUpperCase():(($=W[0])==null?void 0:$.substring(0,2).toUpperCase())||""};return r?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(sr,{className:"h-8 w-8 animate-spin text-primary"})}):e?c.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs(Fe,{className:"border-2",children:[c.jsx(Bt,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(zt,{className:"font-display",children:"Player Profile"}),c.jsxs(be,{variant:"outline",size:"sm",onClick:()=>s(!n),children:[c.jsx(iT,{className:"h-4 w-4 mr-2"}),n?"Cancel":"Edit"]})]})}),c.jsx(We,{children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(en,{avatarUrl:h,initials:e.avatar_initials,name:e.full_name,size:"xl"}),n&&c.jsx("button",{className:"absolute bottom-0 right-0 p-2 bg-primary text-primary-foreground rounded-full hover:bg-primary/90 transition-colors",onClick:()=>{var O;return(O=S.current)==null?void 0:O.click()},children:c.jsx(Q2,{className:"h-4 w-4"})})]}),c.jsx("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:M})]}),c.jsx("div",{className:"flex-1 space-y-4",children:n?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{children:"Full Name"}),c.jsx(Jr,{value:i,onChange:O=>o(O.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{children:"Username"}),c.jsx(Jr,{value:e.username,disabled:!0,className:"bg-muted"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Username cannot be changed"})]}),c.jsxs(be,{onClick:X,disabled:a,children:[a?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):null,"Save Changes"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Username"}),c.jsx("p",{className:"font-bold text-xl",children:e.username})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Full Name"}),c.jsx("p",{className:"font-medium",children:e.full_name})]})]})})]})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsx(Fe,{className:"card-hover",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsx($a,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),c.jsx("p",{className:"text-2xl font-bold",children:e.games_played}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Games Played"})]})}),c.jsx(Fe,{className:"card-hover",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsx($n,{className:"h-8 w-8 mx-auto mb-2 text-accent"}),c.jsx("p",{className:"text-2xl font-bold",children:e.games_won}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Wins"})]})}),c.jsx(Fe,{className:"card-hover",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsx(mv,{className:"h-8 w-8 mx-auto mb-2 text-secondary"}),c.jsx("p",{className:"text-2xl font-bold",children:e.games_drawn}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Draws"})]})}),c.jsx(Fe,{className:"card-hover",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsx(Eu,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),c.jsx("p",{className:"text-2xl font-bold",children:Number(e.score).toFixed(1)}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Score"})]})})]}),m&&c.jsxs(Fe,{className:"border-2 border-primary/20",children:[c.jsxs(Bt,{children:[c.jsxs(zt,{className:"flex items-center gap-2",children:[c.jsx($n,{className:"h-5 w-5 text-primary"}),m.name]}),c.jsxs(Ja,{children:["Format: ",m.format.replace(/_/g," "),"  Time Control: ",m.time_control]})]}),c.jsx(We,{children:m.status==="registration"?g?c.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg text-center",children:[c.jsx("p",{className:"text-secondary dark:text-neon-cyan font-bold",children:" You are registered!"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Waiting for tournament to start..."})]}):c.jsxs(be,{onClick:U,disabled:a,className:"w-full",children:[a?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx($a,{className:"h-4 w-4 mr-2"}),"Register for Tournament"]}):c.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg text-center space-y-3",children:[c.jsx("p",{className:"font-bold",children:"Tournament in progress"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Round Active"}),y?c.jsxs(be,{onClick:()=>k(`/game/${y}`),className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",children:[c.jsx(rm,{className:"h-4 w-4 mr-2"}),"Play Now"]}):c.jsx("p",{className:"text-sm text-muted-foreground",children:"No active game found"})]})})]}),x.length>0&&c.jsxs(Fe,{className:"border-2",children:[c.jsx(Bt,{children:c.jsxs(zt,{className:"flex items-center gap-2",children:[c.jsx(Z2,{className:"h-5 w-5 text-primary"}),"Recent Games"]})}),c.jsx(We,{children:c.jsx("div",{className:"space-y-2",children:x.map(O=>{const W=O.played_as==="white"&&O.result==="white_wins"||O.played_as==="black"&&O.result==="black_wins",$=O.played_as==="white"&&O.result==="black_wins"||O.played_as==="black"&&O.result==="white_wins",q=O.result==="draw";return c.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:scale-[1.01] transition-all ${W?"bg-green-500/10 border-green-500/30":$?"bg-red-500/10 border-red-500/30":"bg-muted border-muted-foreground/20"}`,onClick:()=>k(`/game/${O.id}`),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(en,{avatarUrl:O.opponent_avatar_url,initials:O.opponent_avatar_initials,name:O.opponent_username,size:"sm"}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium",children:["vs ",O.opponent_username]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Round ",O.round,"  ",O.played_as==="white"?" White":" Black"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[W&&c.jsx(An,{className:"h-5 w-5 text-green-500"}),$&&c.jsx(mv,{className:"h-5 w-5 text-red-500"}),q&&c.jsx(nT,{className:"h-5 w-5 text-muted-foreground"}),c.jsx("span",{className:`font-bold ${W?"text-green-500":$?"text-red-500":"text-muted-foreground"}`,children:W?"Won":$?"Lost":"Draw"})]})]},O.id)})})})]})]})}):null},JA=(t="online-users")=>{const{profile:e}=bi(),[r,n]=p.useState([]);return p.useEffect(()=>{if(!e)return;const i=ee.channel(t,{config:{presence:{key:e.id}}});return i.on("presence",{event:"sync"},()=>{const o=i.presenceState(),a=[];Object.values(o).forEach(l=>{l&&l[0]&&a.push(l[0])}),n(a)}).subscribe(async o=>{o==="SUBSCRIBED"&&await i.track({id:e.id,username:e.username,online_at:new Date().toISOString()})}),()=>{i.unsubscribe()}},[e,t]),{onlineUsers:r,isUserOnline:i=>r.some(o=>o.id===i)}},XA=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[s,i]=p.useState("Christmas Gambit Cup 2K25"),{isUserOnline:o}=JA();p.useEffect(()=>{a();const d=ee.channel("standings").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},()=>{a()}).subscribe();return()=>{ee.removeChannel(d)}},[]);const a=async()=>{const{data:d}=await ee.from("tournaments").select("id, name").in("status",["registration","in_progress","completed"]).order("created_at",{ascending:!1}).limit(1).maybeSingle();d&&i(d.name);const{data:h}=await ee.from("profiles").select("id, username, full_name, avatar_url, avatar_initials, score, games_played, games_won, rating").order("score",{ascending:!1,nullsFirst:!1}).order("games_won",{ascending:!1,nullsFirst:!1});h&&e(h),n(!1)},l=d=>d===0?c.jsx($n,{className:"h-6 w-6 text-yellow-500 trophy-shine"}):d===1?c.jsx(l1,{className:"h-6 w-6 text-gray-400"}):d===2?c.jsx(Eu,{className:"h-6 w-6 text-amber-700"}):c.jsx("span",{className:"w-6 h-6 flex items-center justify-center font-bold text-muted-foreground",children:d+1}),u=d=>d===0?"bg-gradient-to-r from-yellow-500/20 to-amber-500/20 border-yellow-500/30":d===1?"bg-gradient-to-r from-gray-400/20 to-slate-400/20 border-gray-400/30":d===2?"bg-gradient-to-r from-amber-700/20 to-orange-700/20 border-amber-700/30":"";return c.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"font-display text-3xl md:text-4xl font-bold mb-2",children:"Tournament Standings"}),c.jsx("p",{className:"text-muted-foreground font-gamer-body",children:s})]}),c.jsxs(Fe,{className:"border-2",children:[c.jsx(Bt,{children:c.jsxs(zt,{className:"flex items-center gap-2",children:[c.jsx($n,{className:"h-5 w-5 text-primary"}),"Current Rankings"]})}),c.jsx(We,{children:r?c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading standings..."}):t.length===0?c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No players yet."}):c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"grid grid-cols-12 gap-2 px-4 py-2 text-sm font-medium text-muted-foreground border-b",children:[c.jsx("div",{className:"col-span-1",children:"#"}),c.jsx("div",{className:"col-span-5",children:"Player"}),c.jsx("div",{className:"col-span-2 text-center",children:"Rating"}),c.jsx("div",{className:"col-span-2 text-center",children:"Score"}),c.jsx("div",{className:"col-span-2 text-center",children:"W/L"})]}),t.map((d,h)=>c.jsxs("div",{className:`grid grid-cols-12 gap-2 items-center px-4 py-3 rounded-lg border transition-all hover:scale-[1.01] ${u(h)}`,children:[c.jsx("div",{className:"col-span-1",children:l(h)}),c.jsxs("div",{className:"col-span-5 flex items-center gap-3",children:[c.jsx(en,{avatarUrl:d.avatar_url,initials:d.avatar_initials,name:d.full_name,size:"sm",showOnlineIndicator:!0,isOnline:o(d.id)}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:d.username}),c.jsx("p",{className:"text-xs text-muted-foreground",children:d.full_name})]})]}),c.jsx("div",{className:"col-span-2 text-center",children:c.jsx("span",{className:"font-bold text-primary",children:d.rating||1200})}),c.jsx("div",{className:"col-span-2 text-center",children:c.jsx("span",{className:"font-bold text-lg",children:Number(d.score||0).toFixed(1)})}),c.jsxs("div",{className:"col-span-2 text-center text-sm",children:[c.jsx("span",{className:"text-green-500",children:d.games_won||0}),c.jsx("span",{className:"text-muted-foreground",children:"/"}),c.jsx("span",{className:"text-red-500",children:(d.games_played||0)-(d.games_won||0)})]})]},d.id))]})})]})]})})},ZA=()=>{const[t,e]=p.useState(null),[r,n]=p.useState(!0);p.useEffect(()=>{s()},[]);const s=async()=>{const{data:i}=await ee.from("champions").select(`
        id,
        published,
        first_place:first_place_id (id, username, full_name, avatar_url, avatar_initials),
        second_place:second_place_id (id, username, full_name, avatar_url, avatar_initials),
        third_place:third_place_id (id, username, full_name, avatar_url, avatar_initials),
        tournament:tournament_id (name)
      `).eq("published",!0).order("created_at",{ascending:!1}).limit(1).maybeSingle();i&&e(i),n(!1)};return r?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:c.jsxs("div",{className:"text-center",children:[c.jsx(An,{className:"h-16 w-16 mx-auto text-primary animate-float"}),c.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading champions..."})]})}):t?c.jsxs("div",{className:"min-h-screen bg-background py-12 px-4 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-secondary/5"}),c.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:50}).map((i,o)=>c.jsx("div",{className:"absolute w-3 h-3 rounded-full",style:{left:`${Math.random()*100}%`,top:`-${Math.random()*20}%`,backgroundColor:["#FFD700","#C41E3A","#228B22","#00D4FF","#8B5CF6"][Math.floor(Math.random()*5)],animation:`confetti-fall ${5+Math.random()*5}s linear infinite`,animationDelay:`${Math.random()*5}s`}},o))}),c.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[c.jsxs("div",{className:"text-center mb-12 animate-fade-in-up",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx(An,{className:"h-20 w-20 text-accent trophy-shine"})}),c.jsx("h1",{className:"font-display text-4xl md:text-5xl font-bold mb-2 bg-clip-text text-transparent bg-christmas-gradient dark:bg-neon-gradient",children:"Christmas Gambit Cup 2K25"}),c.jsx("p",{className:"text-xl text-muted-foreground font-gamer-body",children:"Champions"})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-end",children:[c.jsx("div",{className:"order-2 md:order-1 animate-fade-in-up",style:{animationDelay:"0.2s"},children:t.second_place&&c.jsx(Fe,{className:"border-2 border-gray-400/30 card-hover",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsxs("div",{className:"relative inline-block mb-4",children:[c.jsx(en,{avatarUrl:t.second_place.avatar_url,initials:t.second_place.avatar_initials,name:t.second_place.full_name,size:"lg",className:"ring-4 ring-gray-400"}),c.jsx("div",{className:"absolute -bottom-2 -right-2 bg-gray-400 rounded-full p-2",children:c.jsx(l1,{className:"h-5 w-5 text-white"})})]}),c.jsx("h3",{className:"font-display text-xl font-bold",children:t.second_place.username}),c.jsx("p",{className:"text-muted-foreground",children:t.second_place.full_name}),c.jsxs("div",{className:"mt-4 py-2 bg-gray-400/20 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-gray-400",children:""}),c.jsx("p",{className:"text-sm font-medium",children:"Runner-up"})]})]})})}),c.jsx("div",{className:"order-1 md:order-2 animate-fade-in-up",children:t.first_place&&c.jsxs(Fe,{className:"border-4 border-yellow-500/50 shadow-xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/10 via-transparent to-amber-500/10"}),c.jsxs(We,{className:"pt-8 pb-6 text-center relative",children:[c.jsxs("div",{className:"relative inline-block mb-4",children:[c.jsx(en,{avatarUrl:t.first_place.avatar_url,initials:t.first_place.avatar_initials,name:t.first_place.full_name,size:"xl",className:"ring-4 ring-yellow-500 trophy-shine"}),c.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:c.jsx(An,{className:"h-10 w-10 text-yellow-500 trophy-shine"})})]}),c.jsx("h3",{className:"font-display text-2xl font-bold",children:t.first_place.username}),c.jsx("p",{className:"text-muted-foreground",children:t.first_place.full_name}),c.jsxs("div",{className:"mt-4 py-3 bg-yellow-500/20 rounded-lg",children:[c.jsx("p",{className:"text-3xl font-bold",children:""}),c.jsx("p",{className:"text-lg font-bold text-yellow-600 dark:text-yellow-400",children:"CHAMPION"})]})]})]})}),c.jsx("div",{className:"order-3 animate-fade-in-up",style:{animationDelay:"0.4s"},children:t.third_place&&c.jsx(Fe,{className:"border-2 border-amber-700/30 card-hover",children:c.jsxs(We,{className:"pt-6 text-center",children:[c.jsxs("div",{className:"relative inline-block mb-4",children:[c.jsx(en,{avatarUrl:t.third_place.avatar_url,initials:t.third_place.avatar_initials,name:t.third_place.full_name,size:"lg",className:"ring-4 ring-amber-700"}),c.jsx("div",{className:"absolute -bottom-2 -right-2 bg-amber-700 rounded-full p-2",children:c.jsx(Eu,{className:"h-5 w-5 text-white"})})]}),c.jsx("h3",{className:"font-display text-xl font-bold",children:t.third_place.username}),c.jsx("p",{className:"text-muted-foreground",children:t.third_place.full_name}),c.jsxs("div",{className:"mt-4 py-2 bg-amber-700/20 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-amber-700",children:""}),c.jsx("p",{className:"text-sm font-medium",children:"Third Place"})]})]})})})]}),c.jsxs("div",{className:"text-center mt-12",children:[c.jsx("div",{className:"candy-divider w-48 mx-auto mb-4 dark:hidden"}),c.jsx("p",{className:"text-muted-foreground font-gamer-body",children:" Congratulations to all participants! "})]})]})]}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:c.jsxs("div",{className:"text-center max-w-md",children:[c.jsx($n,{className:"h-20 w-20 mx-auto text-muted-foreground mb-4"}),c.jsx("h1",{className:"font-display text-2xl font-bold mb-2",children:"No Champions Yet"}),c.jsx("p",{className:"text-muted-foreground",children:"The tournament hasn't concluded yet. Check back after the final games!"})]})})},eI=()=>{const{profile:t}=bi(),[e,r]=p.useState([]),[n,s]=p.useState(!0);p.useEffect(()=>{i();const a=ee.channel("games-list").on("postgres_changes",{event:"*",schema:"public",table:"games"},()=>{i()}).subscribe();return()=>{ee.removeChannel(a)}},[]);const i=async()=>{const{data:a}=await ee.from("tournaments").select("id").in("status",["in_progress","completed"]).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(a){const{data:l}=await ee.from("games").select(`
          id,
          round,
          result,
          white_player_id,
          black_player_id,
          white_player:white_player_id (username, avatar_url, avatar_initials),
          black_player:black_player_id (username, avatar_url, avatar_initials)
        `).eq("tournament_id",a.id).order("round",{ascending:!1}).order("created_at",{ascending:!1});l&&r(l)}s(!1)},o=(a,l,u)=>a==="pending"?c.jsx("span",{className:"text-muted-foreground",children:"Pending"}):a==="in_progress"?c.jsx("span",{className:"text-primary",children:"Live"}):a==="draw"?c.jsx("span",{className:"text-muted-foreground",children:"Draw"}):a==="white_wins"&&l?c.jsx("span",{className:"text-green-500",children:"Won"}):a==="black_wins"&&u?c.jsx("span",{className:"text-green-500",children:"Won"}):a==="white_wins"&&u?c.jsx("span",{className:"text-destructive",children:"Lost"}):a==="black_wins"&&l?c.jsx("span",{className:"text-destructive",children:"Lost"}):c.jsx("span",{className:"capitalize",children:a.replace(/_/g," ")});return c.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"font-display text-3xl md:text-4xl font-bold mb-2",children:"Games"}),c.jsx("p",{className:"text-muted-foreground font-gamer-body",children:"Active and completed matches"})]}),c.jsxs(Fe,{className:"border-2",children:[c.jsx(Bt,{children:c.jsxs(zt,{className:"flex items-center gap-2",children:[c.jsx($a,{className:"h-5 w-5 text-primary"}),"Match List"]})}),c.jsx(We,{children:n?c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading games..."}):e.length===0?c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No games yet. The tournament hasn't started."}):c.jsx("div",{className:"space-y-3",children:e.map(a=>{var h,f,m,w,g,b;const l=(t==null?void 0:t.id)===a.white_player_id,u=(t==null?void 0:t.id)===a.black_player_id,d=l||u;return c.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border transition-all ${d?"border-primary/30 bg-primary/5":""} ${a.result==="in_progress"?"ring-2 ring-primary":""}`,children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Round"}),c.jsx("p",{className:"font-bold",children:a.round})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(en,{avatarUrl:(h=a.white_player)==null?void 0:h.avatar_url,initials:(f=a.white_player)==null?void 0:f.avatar_initials,size:"sm"}),c.jsx("span",{className:`font-medium ${l?"text-primary font-bold":""}`,children:(m=a.white_player)==null?void 0:m.username})]}),c.jsx("span",{className:"text-muted-foreground",children:"vs"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(en,{avatarUrl:(w=a.black_player)==null?void 0:w.avatar_url,initials:(g=a.black_player)==null?void 0:g.avatar_initials,size:"sm"}),c.jsx("span",{className:`font-medium ${u?"text-primary font-bold":""}`,children:(b=a.black_player)==null?void 0:b.username})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"text-right",children:o(a.result,l,u)}),c.jsx(Yr,{to:`/game/${a.id}`,children:c.jsx(be,{size:"sm",variant:a.result==="in_progress"&&d?"default":"outline",children:a.result==="in_progress"?d?c.jsxs(c.Fragment,{children:[c.jsx(oh,{className:"h-4 w-4 mr-1"})," Play"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ma,{className:"h-4 w-4 mr-1"})," Watch"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ma,{className:"h-4 w-4 mr-1"})," View"]})})})]})]},a.id)})})})]})]})})};function tI(t){return t!==null?{comment:t,variations:[]}:{variations:[]}}function rI(t,e,r,n,s){const i={move:t,variations:s};return e&&(i.suffix=e),r&&(i.nag=r),n!==null&&(i.comment=n),i}function nI(...t){const[e,...r]=t;let n=e;for(const s of r)s!==null&&(n.variations=[s,...s.variations],s.variations=[],n=s);return e}function sI(t,e){if(e.marker&&e.marker.comment){let r=e.root;for(;;){const n=r.variations[0];if(!n){r.comment=e.marker.comment;break}r=n}}return{headers:t,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function iI(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function jo(t,e,r,n){var s=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(s,jo.prototype),s.expected=e,s.found=r,s.location=n,s.name="SyntaxError",s}iI(jo,Error);function Bd(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,r+=r.repeat(e),t+r.slice(0,e))}jo.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var r=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){r=t[n].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+i.line+":"+i.column;if(r){var a=this.location.end,l=Bd("",i.line.toString().length," "),u=r[s.line-1],d=s.line===a.line?a.column:u.length+1,h=d-s.column||1;e+=`
 --> `+o+`
`+l+` |
`+i.line+" | "+u+`
`+l+" | "+Bd("",s.column-1," ")+Bd("",h,"^")}else e+=`
 at `+o}return e};jo.buildMessage=function(t,e){var r={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var d=u.parts.map(function(h){return Array.isArray(h)?i(h[0])+"-"+i(h[1]):i(h)});return"["+(u.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function n(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function i(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function o(u){return r[u.type](u)}function a(u){var d=u.map(o),h,f;if(d.sort(),d.length>0){for(h=1,f=1;h<d.length;h++)d[h-1]!==d[h]&&(d[f]=d[h],f++);d.length=f}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function l(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+a(t)+" but "+l(e)+" found."};function oI(t,e){e=e!==void 0?e:{};var r={},n=e.grammarSource,s={pgn:Hm},i=Hm,o="[",a='"',l="]",u=".",d="O-O-O",h="O-O",f="0-0-0",m="0-0",w="$",g="{",b="}",y=";",v="(",x=")",_="1-0",S="0-1",E="1/2-1/2",k="*",j=/^[a-zA-Z]/,L=/^[^"]/,M=/^[0-9]/,X=/^[.]/,U=/^[a-zA-Z1-8\-=]/,V=/^[+#]/,O=/^[!?]/,W=/^[^}]/,$=/^[^\r\n]/,q=/^[ \t\r\n]/,T=Ge("tag pair"),C=Ae("[",!1),F=Ae('"',!1),K=Ae("]",!1),R=Ge("tag name"),G=$e([["a","z"],["A","Z"]],!1,!1),J=Ge("tag value"),oe=$e(['"'],!0,!1),de=Ge("move number"),D=$e([["0","9"]],!1,!1),ne=Ae(".",!1),we=$e(["."],!1,!1),ae=Ge("standard algebraic notation"),re=Ae("O-O-O",!1),le=Ae("O-O",!1),Be=Ae("0-0-0",!1),yt=Ae("0-0",!1),It=$e([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),ht=$e(["+","#"],!1,!1),cr=Ge("suffix annotation"),Ht=$e(["!","?"],!1,!1),Q=Ge("NAG"),fe=Ae("$",!1),he=Ge("brace comment"),je=Ae("{",!1),Je=$e(["}"],!0,!1),Zt=Ae("}",!1),at=Ge("rest of line comment"),Ie=Ae(";",!1),wt=$e(["\r",`
`],!0,!1),on=Ge("variation"),Sn=Ae("(",!1),Vt=Ae(")",!1),Lr=Ge("game termination marker"),Mr=Ae("1-0",!1),er=Ae("0-1",!1),lt=Ae("1/2-1/2",!1),ur=Ae("*",!1),tr=Ge("whitespace"),an=$e([" ","	","\r",`
`],!1,!1),$o=function(N,A){return sI(N,A)},Si=function(N){return Object.fromEntries(N)},qn=function(N,A){return[N,A]},Uo=function(N,A){return{root:N,marker:A}},Ls=function(N,A){return nI(tI(N),...A.flat())},Er=function(N,A,I,ie,ce){return rI(N,A,I,ie,ce)},Fo=function(N){return N},ge=function(N){return N.replace(/[\r\n]+/g," ")},Oe=function(N){return N.trim()},Re=function(N){return N},Et=function(N,A){return{result:N,comment:A}},P=e.peg$currPos|0,Ct=[{line:1,column:1}],it=P,xt=e.peg$maxFailExpected||[],z=e.peg$silentFails|0,Me;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');i=s[e.startRule]}function Ae(N,A){return{type:"literal",text:N,ignoreCase:A}}function $e(N,A,I){return{type:"class",parts:N,inverted:A,ignoreCase:I}}function ln(){return{type:"end"}}function Ge(N){return{type:"other",description:N}}function ml(N){var A=Ct[N],I;if(A)return A;if(N>=Ct.length)I=Ct.length-1;else for(I=N;!Ct[--I];);for(A=Ct[I],A={line:A.line,column:A.column};I<N;)t.charCodeAt(I)===10?(A.line++,A.column=1):A.column++,I++;return Ct[N]=A,A}function Wm(N,A,I){var ie=ml(N),ce=ml(A),De={source:n,start:{offset:N,line:ie.line,column:ie.column},end:{offset:A,line:ce.line,column:ce.column}};return De}function se(N){P<it||(P>it&&(it=P,xt=[]),xt.push(N))}function dE(N,A,I){return new jo(jo.buildMessage(N,A),N,A,I)}function Hm(){var N,A,I;return N=P,A=fE(),I=mE(),N=$o(A,I),N}function fE(){var N,A,I;for(N=P,A=[],I=Vm();I!==r;)A.push(I),I=Vm();return I=qt(),N=Si(A),N}function Vm(){var N,A,I,ie,ce,De,Ms;return z++,N=P,qt(),t.charCodeAt(P)===91?(A=o,P++):(A=r,z===0&&se(C)),A!==r?(qt(),I=hE(),I!==r?(qt(),t.charCodeAt(P)===34?(ie=a,P++):(ie=r,z===0&&se(F)),ie!==r?(ce=pE(),t.charCodeAt(P)===34?(De=a,P++):(De=r,z===0&&se(F)),De!==r?(qt(),t.charCodeAt(P)===93?(Ms=l,P++):(Ms=r,z===0&&se(K)),Ms!==r?N=qn(I,ce):(P=N,N=r)):(P=N,N=r)):(P=N,N=r)):(P=N,N=r)):(P=N,N=r),z--,N===r&&z===0&&se(T),N}function hE(){var N,A,I;if(z++,N=P,A=[],I=t.charAt(P),j.test(I)?P++:(I=r,z===0&&se(G)),I!==r)for(;I!==r;)A.push(I),I=t.charAt(P),j.test(I)?P++:(I=r,z===0&&se(G));else A=r;return A!==r?N=t.substring(N,P):N=A,z--,N===r&&(A=r,z===0&&se(R)),N}function pE(){var N,A,I;for(z++,N=P,A=[],I=t.charAt(P),L.test(I)?P++:(I=r,z===0&&se(oe));I!==r;)A.push(I),I=t.charAt(P),L.test(I)?P++:(I=r,z===0&&se(oe));return N=t.substring(N,P),z--,A=r,z===0&&se(J),N}function mE(){var N,A,I;return N=P,A=qm(),qt(),I=bE(),I===r&&(I=null),qt(),N=Uo(A,I),N}function qm(){var N,A,I,ie;for(N=P,A=Qu(),A===r&&(A=null),I=[],ie=Km();ie!==r;)I.push(ie),ie=Km();return N=Ls(A,I),N}function Km(){var N,A,I,ie,ce,De,Ms,gl;if(N=P,qt(),gE(),qt(),A=vE(),A!==r){for(I=yE(),I===r&&(I=null),ie=[],ce=Gm();ce!==r;)ie.push(ce),ce=Gm();for(ce=qt(),De=Qu(),De===r&&(De=null),Ms=[],gl=Qm();gl!==r;)Ms.push(gl),gl=Qm();N=Er(A,I,ie,De,Ms)}else P=N,N=r;return N}function gE(){var N,A,I,ie,ce,De;for(z++,N=P,A=[],I=t.charAt(P),M.test(I)?P++:(I=r,z===0&&se(D));I!==r;)A.push(I),I=t.charAt(P),M.test(I)?P++:(I=r,z===0&&se(D));if(t.charCodeAt(P)===46?(I=u,P++):(I=r,z===0&&se(ne)),I!==r){for(ie=qt(),ce=[],De=t.charAt(P),X.test(De)?P++:(De=r,z===0&&se(we));De!==r;)ce.push(De),De=t.charAt(P),X.test(De)?P++:(De=r,z===0&&se(we));A=[A,I,ie,ce],N=A}else P=N,N=r;return z--,N===r&&(A=r,z===0&&se(de)),N}function vE(){var N,A,I,ie,ce,De;if(z++,N=P,A=P,t.substr(P,5)===d?(I=d,P+=5):(I=r,z===0&&se(re)),I===r&&(t.substr(P,3)===h?(I=h,P+=3):(I=r,z===0&&se(le)),I===r&&(t.substr(P,5)===f?(I=f,P+=5):(I=r,z===0&&se(Be)),I===r&&(t.substr(P,3)===m?(I=m,P+=3):(I=r,z===0&&se(yt)),I===r))))if(I=P,ie=t.charAt(P),j.test(ie)?P++:(ie=r,z===0&&se(G)),ie!==r){if(ce=[],De=t.charAt(P),U.test(De)?P++:(De=r,z===0&&se(It)),De!==r)for(;De!==r;)ce.push(De),De=t.charAt(P),U.test(De)?P++:(De=r,z===0&&se(It));else ce=r;ce!==r?(ie=[ie,ce],I=ie):(P=I,I=r)}else P=I,I=r;return I!==r?(ie=t.charAt(P),V.test(ie)?P++:(ie=r,z===0&&se(ht)),ie===r&&(ie=null),I=[I,ie],A=I):(P=A,A=r),A!==r?N=t.substring(N,P):N=A,z--,N===r&&(A=r,z===0&&se(ae)),N}function yE(){var N,A,I;for(z++,N=P,A=[],I=t.charAt(P),O.test(I)?P++:(I=r,z===0&&se(Ht));I!==r;)A.push(I),A.length>=2?I=r:(I=t.charAt(P),O.test(I)?P++:(I=r,z===0&&se(Ht)));return A.length<1?(P=N,N=r):N=A,z--,N===r&&(A=r,z===0&&se(cr)),N}function Gm(){var N,A,I,ie,ce;if(z++,N=P,qt(),t.charCodeAt(P)===36?(A=w,P++):(A=r,z===0&&se(fe)),A!==r){if(I=P,ie=[],ce=t.charAt(P),M.test(ce)?P++:(ce=r,z===0&&se(D)),ce!==r)for(;ce!==r;)ie.push(ce),ce=t.charAt(P),M.test(ce)?P++:(ce=r,z===0&&se(D));else ie=r;ie!==r?I=t.substring(I,P):I=ie,I!==r?N=Fo(I):(P=N,N=r)}else P=N,N=r;return z--,N===r&&z===0&&se(Q),N}function Qu(){var N;return N=wE(),N===r&&(N=xE()),N}function wE(){var N,A,I,ie,ce;if(z++,N=P,t.charCodeAt(P)===123?(A=g,P++):(A=r,z===0&&se(je)),A!==r){for(I=P,ie=[],ce=t.charAt(P),W.test(ce)?P++:(ce=r,z===0&&se(Je));ce!==r;)ie.push(ce),ce=t.charAt(P),W.test(ce)?P++:(ce=r,z===0&&se(Je));I=t.substring(I,P),t.charCodeAt(P)===125?(ie=b,P++):(ie=r,z===0&&se(Zt)),ie!==r?N=ge(I):(P=N,N=r)}else P=N,N=r;return z--,N===r&&(A=r,z===0&&se(he)),N}function xE(){var N,A,I,ie,ce;if(z++,N=P,t.charCodeAt(P)===59?(A=y,P++):(A=r,z===0&&se(Ie)),A!==r){for(I=P,ie=[],ce=t.charAt(P),$.test(ce)?P++:(ce=r,z===0&&se(wt));ce!==r;)ie.push(ce),ce=t.charAt(P),$.test(ce)?P++:(ce=r,z===0&&se(wt));I=t.substring(I,P),N=Oe(I)}else P=N,N=r;return z--,N===r&&(A=r,z===0&&se(at)),N}function Qm(){var N,A,I,ie;return z++,N=P,qt(),t.charCodeAt(P)===40?(A=v,P++):(A=r,z===0&&se(Sn)),A!==r?(I=qm(),I!==r?(qt(),t.charCodeAt(P)===41?(ie=x,P++):(ie=r,z===0&&se(Vt)),ie!==r?N=Re(I):(P=N,N=r)):(P=N,N=r)):(P=N,N=r),z--,N===r&&z===0&&se(on),N}function bE(){var N,A,I;return z++,N=P,t.substr(P,3)===_?(A=_,P+=3):(A=r,z===0&&se(Mr)),A===r&&(t.substr(P,3)===S?(A=S,P+=3):(A=r,z===0&&se(er)),A===r&&(t.substr(P,7)===E?(A=E,P+=7):(A=r,z===0&&se(lt)),A===r&&(t.charCodeAt(P)===42?(A=k,P++):(A=r,z===0&&se(ur))))),A!==r?(qt(),I=Qu(),I===r&&(I=null),N=Et(A,I)):(P=N,N=r),z--,N===r&&(A=r,z===0&&se(Lr)),N}function qt(){var N,A;for(z++,N=[],A=t.charAt(P),q.test(A)?P++:(A=r,z===0&&se(an));A!==r;)N.push(A),A=t.charAt(P),q.test(A)?P++:(A=r,z===0&&se(an));return z--,A=r,z===0&&se(tr),N}if(Me=i(),e.peg$library)return{peg$result:Me,peg$currPos:P,peg$FAILED:r,peg$maxFailExpected:xt,peg$maxFailPos:it};if(Me!==r&&P===t.length)return Me;throw Me!==r&&P<t.length&&se(ln()),dE(xt,it<t.length?t.charAt(it):null,it<t.length?Wm(it,it+1):Wm(it,it))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const hc=0xffffffffffffffffn;function zd(t,e){return(t<<e|t>>64n-e)&0xffffffffffffffffn}function v0(t,e){return t*e&hc}function aI(t){return function(){let e=BigInt(t&hc),r=BigInt(t>>64n&hc);const n=v0(zd(v0(e,5n),7n),9n);return r^=e,e=(zd(e,24n)^r^r<<16n)&hc,r=zd(r,37n),t=r<<64n|e,n}}const $u=aI(0xa187eb39cdcaed8f31c4b365b102e01en),lI=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>$u()))),cI=Array.from({length:8},()=>$u()),uI=Array.from({length:16},()=>$u()),Wd=$u(),$t="w",fr="b",ct="p",Ah="n",pc="b",sa="r",ns="q",mt="k",Hd="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Hl{constructor(e,r){Qe(this,"color");Qe(this,"from");Qe(this,"to");Qe(this,"piece");Qe(this,"captured");Qe(this,"promotion");Qe(this,"flags");Qe(this,"san");Qe(this,"lan");Qe(this,"before");Qe(this,"after");const{color:n,piece:s,from:i,to:o,flags:a,captured:l,promotion:u}=r,d=bt(i),h=bt(o);this.color=n,this.piece=s,this.from=d,this.to=h,this.san=e._moveToSan(r,e._moves({legal:!0})),this.lan=d+h,this.before=e.fen(),e._makeMove(r),this.after=e.fen(),e._undoMove(),this.flags="";for(const f in ye)ye[f]&a&&(this.flags+=Fs[f]);l&&(this.captured=l),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(Fs.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Fs.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Fs.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Fs.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Fs.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Fs.BIG_PAWN)>-1}}const Tt=-1,Fs={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},ye={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Ih={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},dI={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},fI={...Ih,...dI},ve={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Vd={b:[16,32,17,15],w:[-16,-32,-17,-15]},y0={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},hI=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],pI=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],mI={p:1,n:2,b:4,r:8,q:16,k:32},gI="pnbrqkPNBRQK",w0=[Ah,pc,sa,ns],vI=7,yI=6,wI=1,xI=0,Vl={[mt]:ye.KSIDE_CASTLE,[ns]:ye.QSIDE_CASTLE},Yn={w:[{square:ve.a1,flag:ye.QSIDE_CASTLE},{square:ve.h1,flag:ye.KSIDE_CASTLE}],b:[{square:ve.a8,flag:ye.QSIDE_CASTLE},{square:ve.h8,flag:ye.KSIDE_CASTLE}]},bI={b:wI,w:yI},qd="--";function si(t){return t>>4}function Xa(t){return t&15}function n_(t){return"0123456789".indexOf(t)!==-1}function bt(t){const e=Xa(t),r=si(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(r,r+1)}function Jo(t){return t===$t?fr:$t}function _I(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const r=parseInt(e[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=e[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let a=0,l=!1;for(let u=0;u<s[o].length;u++)if(n_(s[o][u])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(s[o][u],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of i){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function SI(t,e){const r=t.from,n=t.to,s=t.piece;let i=0,o=0,a=0;for(let l=0,u=e.length;l<u;l++){const d=e[l].from,h=e[l].to,f=e[l].piece;s===f&&r!==d&&n===h&&(i++,si(r)===si(d)&&o++,Xa(r)===Xa(d)&&a++)}return i>0?o>0&&a>0?bt(r):a>0?bt(r).charAt(1):bt(r).charAt(0):""}function Jn(t,e,r,n,s,i=void 0,o=ye.NORMAL){const a=si(n);if(s===ct&&(a===vI||a===xI))for(let l=0;l<w0.length;l++){const u=w0[l];t.push({color:e,from:r,to:n,piece:s,captured:i,promotion:u,flags:o|ye.PROMOTION})}else t.push({color:e,from:r,to:n,piece:s,captured:i,flags:o})}function x0(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:ct:(e=e.toLowerCase(),e==="o"?mt:e)}function Kd(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class pn{constructor(e=Hd,{skipValidation:r=!1}={}){Qe(this,"_board",new Array(128));Qe(this,"_turn",$t);Qe(this,"_header",{});Qe(this,"_kings",{w:Tt,b:Tt});Qe(this,"_epSquare",-1);Qe(this,"_halfMoves",0);Qe(this,"_moveNumber",0);Qe(this,"_history",[]);Qe(this,"_comments",{});Qe(this,"_castling",{w:0,b:0});Qe(this,"_hash",0n);Qe(this,"_positionCount",new Map);this.load(e,{skipValidation:r})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Tt,b:Tt},this._turn=$t,this._castling={w:0,b:0},this._epSquare=Tt,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...fI},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:r=!1,preserveHeaders:n=!1}={}){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const a=["-","-","0","1"];e=s.concat(a.slice(-(6-s.length))).join(" ")}if(s=e.split(/\s+/),!r){const{ok:a,error:l}=_I(e);if(!a)throw new Error(l)}const i=s[0];let o=0;this.clear({preserveHeaders:n});for(let a=0;a<i.length;a++){const l=i.charAt(a);if(l==="/")o+=8;else if(n_(l))o+=parseInt(l,10);else{const u=l<"a"?$t:fr;this._put({type:l.toLowerCase(),color:u},bt(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=ye.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=ye.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=ye.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=ye.QSIDE_CASTLE),this._epSquare=s[3]==="-"?Tt:ve[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){var o,a;let r=0,n="";for(let l=ve.a8;l<=ve.h1;l++){if(this._board[l]){r>0&&(n+=r,r=0);const{color:u,type:d}=this._board[l];n+=u===$t?d.toUpperCase():d.toLowerCase()}else r++;l+1&136&&(r>0&&(n+=r),l!==ve.h1&&(n+="/"),r=0,l+=8)}let s="";this._castling[$t]&ye.KSIDE_CASTLE&&(s+="K"),this._castling[$t]&ye.QSIDE_CASTLE&&(s+="Q"),this._castling[fr]&ye.KSIDE_CASTLE&&(s+="k"),this._castling[fr]&ye.QSIDE_CASTLE&&(s+="q"),s=s||"-";let i="-";if(this._epSquare!==Tt)if(e)i=bt(this._epSquare);else{const l=this._epSquare+(this._turn===$t?16:-16),u=[l+1,l-1];for(const d of u){if(d&136)continue;const h=this._turn;if(((o=this._board[d])==null?void 0:o.color)===h&&((a=this._board[d])==null?void 0:a.type)===ct){this._makeMove({color:h,from:d,to:this._epSquare,piece:ct,captured:ct,flags:ye.EP_CAPTURE});const f=!this._isKingAttacked(h);if(this._undoMove(),f){i=bt(this._epSquare);break}}}}return[n,this._turn,s,i,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:r,type:n}=this._board[e],s={w:0,b:1}[r],i={p:0,n:1,b:2,r:3,q:4,k:5}[n];return lI[s][i][e]}_epKey(){return this._epSquare===Tt?0n:cI[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return uI[e]}_computeHash(){let e=0n;for(let r=ve.a8;r<=ve.h1;r++){if(r&136){r+=7;continue}this._board[r]&&(e^=this._pieceKey(r))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Wd),e}_updateSetup(e){this._history.length>0||(e!==Hd?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Hd)}get(e){return this._board[ve[e]]}findPiece(e){var n;const r=[];for(let s=ve.a8;s<=ve.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((n=this._board[s])==null?void 0:n.color)!==e.color||this._board[s].color===e.color&&this._board[s].type===e.type&&r.push(bt(s))}return r}put({type:e,color:r},n){return this._put({type:e,color:r},n)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,r){this._hash^=this._pieceKey(e),this._board[e]=r,this._hash^=this._pieceKey(e)}_put({type:e,color:r},n){if(gI.indexOf(e.toLowerCase())===-1||!(n in ve))return!1;const s=ve[n];if(e==mt&&!(this._kings[r]==Tt||this._kings[r]==s))return!1;const i=this._board[s];return i&&i.type===mt&&(this._kings[i.color]=Tt),this._set(s,{type:e,color:r}),e===mt&&(this._kings[r]=s),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const r=this.get(e);return this._clear(ve[e]),r&&r.type===mt&&(this._kings[r.color]=Tt),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),r}_updateCastlingRights(){var n,s,i,o,a,l,u,d,h,f,m,w;this._hash^=this._castlingKey();const e=((n=this._board[ve.e1])==null?void 0:n.type)===mt&&((s=this._board[ve.e1])==null?void 0:s.color)===$t,r=((i=this._board[ve.e8])==null?void 0:i.type)===mt&&((o=this._board[ve.e8])==null?void 0:o.color)===fr;(!e||((a=this._board[ve.a1])==null?void 0:a.type)!==sa||((l=this._board[ve.a1])==null?void 0:l.color)!==$t)&&(this._castling.w&=-65),(!e||((u=this._board[ve.h1])==null?void 0:u.type)!==sa||((d=this._board[ve.h1])==null?void 0:d.color)!==$t)&&(this._castling.w&=-33),(!r||((h=this._board[ve.a8])==null?void 0:h.type)!==sa||((f=this._board[ve.a8])==null?void 0:f.color)!==fr)&&(this._castling.b&=-65),(!r||((m=this._board[ve.h8])==null?void 0:m.type)!==sa||((w=this._board[ve.h8])==null?void 0:w.color)!==fr)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var i,o;if(this._epSquare===Tt)return;const e=this._epSquare+(this._turn===$t?-16:16),r=this._epSquare+(this._turn===$t?16:-16),n=[r+1,r-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((i=this._board[r])==null?void 0:i.color)!==Jo(this._turn)||((o=this._board[r])==null?void 0:o.type)!==ct){this._hash^=this._epKey(),this._epSquare=Tt;return}const s=a=>{var l,u;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((u=this._board[a])==null?void 0:u.type)===ct};n.some(s)||(this._hash^=this._epKey(),this._epSquare=Tt)}_attacked(e,r,n){const s=[];for(let i=ve.a8;i<=ve.h1;i++){if(i&136){i+=7;continue}if(this._board[i]===void 0||this._board[i].color!==e)continue;const o=this._board[i],a=i-r;if(a===0)continue;const l=a+119;if(hI[l]&mI[o.type]){if(o.type===ct){if(a>0&&o.color===$t||a<=0&&o.color===fr)if(n)s.push(bt(i));else return!0;continue}if(o.type==="n"||o.type==="k")if(n){s.push(bt(i));continue}else return!0;const u=pI[l];let d=i+u,h=!1;for(;d!==r;){if(this._board[d]!=null){h=!0;break}d+=u}if(!h)if(n){s.push(bt(i));continue}else return!0}}return n?s:!1}attackers(e,r){return r?this._attacked(r,ve[e],!0):this._attacked(this._turn,ve[e],!0)}_isKingAttacked(e){const r=this._kings[e];return r===-1?!1:this._attacked(Jo(e),r)}hash(){return this._hash.toString(16)}isAttacked(e,r){return this._attacked(r,ve[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},r=[];let n=0,s=0;for(let i=ve.a8;i<=ve.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const o=this._board[i];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===pc&&r.push(s),n++)}if(n===2)return!0;if(n===3&&(e[pc]===1||e[Ah]===1))return!0;if(n===e[pc]+2){let i=0;const o=r.length;for(let a=0;a<o;a++)i+=r[a];if(i===0||i===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:r=void 0,piece:n=void 0}={}){const s=this._moves({square:r,piece:n});return e?s.map(i=>new Hl(this,i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:e=!0,piece:r=void 0,square:n=void 0}={}){var m;const s=n?n.toLowerCase():void 0,i=r==null?void 0:r.toLowerCase(),o=[],a=this._turn,l=Jo(a);let u=ve.a8,d=ve.h1,h=!1;if(s)if(s in ve)u=d=ve[s],h=!0;else return[];for(let w=u;w<=d;w++){if(w&136){w+=7;continue}if(!this._board[w]||this._board[w].color===l)continue;const{type:g}=this._board[w];let b;if(g===ct){if(i&&i!==g)continue;b=w+Vd[a][0],this._board[b]||(Jn(o,a,w,b,ct),b=w+Vd[a][1],bI[a]===si(w)&&!this._board[b]&&Jn(o,a,w,b,ct,void 0,ye.BIG_PAWN));for(let y=2;y<4;y++)b=w+Vd[a][y],!(b&136)&&(((m=this._board[b])==null?void 0:m.color)===l?Jn(o,a,w,b,ct,this._board[b].type,ye.CAPTURE):b===this._epSquare&&Jn(o,a,w,b,ct,ct,ye.EP_CAPTURE))}else{if(i&&i!==g)continue;for(let y=0,v=y0[g].length;y<v;y++){const x=y0[g][y];for(b=w;b+=x,!(b&136);){if(!this._board[b])Jn(o,a,w,b,g);else{if(this._board[b].color===a)break;Jn(o,a,w,b,g,this._board[b].type,ye.CAPTURE);break}if(g===Ah||g===mt)break}}}}if((i===void 0||i===mt)&&(!h||d===this._kings[a])){if(this._castling[a]&ye.KSIDE_CASTLE){const w=this._kings[a],g=w+2;!this._board[w+1]&&!this._board[g]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,w+1)&&!this._attacked(l,g)&&Jn(o,a,this._kings[a],g,mt,void 0,ye.KSIDE_CASTLE)}if(this._castling[a]&ye.QSIDE_CASTLE){const w=this._kings[a],g=w-2;!this._board[w-1]&&!this._board[w-2]&&!this._board[w-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,w-1)&&!this._attacked(l,g)&&Jn(o,a,this._kings[a],g,mt,void 0,ye.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const f=[];for(let w=0,g=o.length;w<g;w++)this._makeMove(o[w]),this._isKingAttacked(a)||f.push(o[w]),this._undoMove();return f}move(e,{strict:r=!1}={}){let n=null;if(typeof e=="string")n=this._moveFromSan(e,r);else if(e===null)n=this._moveFromSan(qd,r);else if(typeof e=="object"){const i=this._moves();for(let o=0,a=i.length;o<a;o++)if(e.from===bt(i[o].from)&&e.to===bt(i[o].to)&&(!("promotion"in i[o])||e.promotion===i[o].promotion)){n=i[o];break}}if(!n)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&n.flags&ye.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new Hl(this,n);return this._makeMove(n),this._incPositionCount(),s}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,r){this._hash^=this._pieceKey(e),this._board[r]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(r)}_makeMove(e){var s,i,o,a;const r=this._turn,n=Jo(r);if(this._push(e),e.flags&ye.NULL_MOVE){r===fr&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=Tt;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&ye.EP_CAPTURE&&(this._turn===fr?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:r})),this._board[e.to].type===mt){if(this._kings[r]=e.to,e.flags&ye.KSIDE_CASTLE){const l=e.to-1,u=e.to+1;this._movePiece(u,l)}else if(e.flags&ye.QSIDE_CASTLE){const l=e.to+1,u=e.to-2;this._movePiece(u,l)}this._castling[r]=0}if(this._castling[r]){for(let l=0,u=Yn[r].length;l<u;l++)if(e.from===Yn[r][l].square&&this._castling[r]&Yn[r][l].flag){this._castling[r]^=Yn[r][l].flag;break}}if(this._castling[n]){for(let l=0,u=Yn[n].length;l<u;l++)if(e.to===Yn[n][l].square&&this._castling[n]&Yn[n][l].flag){this._castling[n]^=Yn[n][l].flag;break}}if(this._hash^=this._castlingKey(),e.flags&ye.BIG_PAWN){let l;r===fr?l=e.to-16:l=e.to+16,!(e.to-1&136)&&((s=this._board[e.to-1])==null?void 0:s.type)===ct&&((i=this._board[e.to-1])==null?void 0:i.color)===n||!(e.to+1&136)&&((o=this._board[e.to+1])==null?void 0:o.type)===ct&&((a=this._board[e.to+1])==null?void 0:a.color)===n?(this._epSquare=l,this._hash^=this._epKey()):this._epSquare=Tt}else this._epSquare=Tt;e.piece===ct?this._halfMoves=0:e.flags&(ye.CAPTURE|ye.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,r===fr&&this._moveNumber++,this._turn=n,this._hash^=Wd}undo(){const e=this._hash,r=this._undoMove();if(r){const n=new Hl(this,r);return this._decPositionCount(e),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const r=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Wd;const n=this._turn,s=Jo(n);if(r.flags&ye.NULL_MOVE)return r;if(this._movePiece(r.to,r.from),r.piece&&(this._clear(r.from),this._set(r.from,{type:r.piece,color:n})),r.captured)if(r.flags&ye.EP_CAPTURE){let i;n===fr?i=r.to-16:i=r.to+16,this._set(i,{type:ct,color:s})}else this._set(r.to,{type:r.captured,color:s});if(r.flags&(ye.KSIDE_CASTLE|ye.QSIDE_CASTLE)){let i,o;r.flags&ye.KSIDE_CASTLE?(i=r.to+1,o=r.to-1):(i=r.to-2,o=r.to+1),this._movePiece(o,i)}return r}pgn({newline:e=`
`,maxWidth:r=0}={}){const n=[];let s=!1;for(const f in this._header)this._header[f]&&n.push(`[${f} "${this._header[f]}"]`+e),s=!0;s&&this._history.length&&n.push(e);const i=f=>{const m=this._comments[this.fen()];if(typeof m<"u"){const w=f.length>0?" ":"";f=`${f}${w}{${m}}`}return f},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(i(""));o.length>0;){l=i(l);const f=o.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const m=`${this._moveNumber}. ...`;l=l?`${l} ${m}`:m}else f.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(l.length&&a.push(i(l)),a.push(this._header.Result||"*"),r===0)return n.join("")+a.join(" ");const u=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},d=function(f,m){for(const w of m.split(" "))if(w){if(f+w.length>r){for(;u();)f--;n.push(e),f=0}n.push(w),f+=w.length,n.push(" "),f++}return u()&&f--,f};let h=0;for(let f=0;f<a.length;f++){if(h+a[f].length>r&&a[f].includes("{")){h=d(h,a[f]);continue}h+a[f].length>r&&f!==0?(n[n.length-1]===" "&&n.pop(),n.push(e),h=0):f!==0&&(n.push(" "),h++),n.push(a[f]),h+=a[f].length}return n.join("")}header(...e){for(let r=0;r<e.length;r+=2)typeof e[r]=="string"&&typeof e[r+1]=="string"&&(this._header[e[r]]=e[r+1]);return this._header}setHeader(e,r){return this._header[e]=r??Ih[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Ih[e]||null,!0):!1}getHeaders(){const e={};for(const[r,n]of Object.entries(this._header))n!==null&&(e[r]=n);return e}loadPgn(e,{strict:r=!1,newlineChar:n=`\r?
`}={}){n!==`\r?
`&&(e=e.replace(new RegExp(n,"g"),`
`));const s=oI(e);this.reset();const i=s.headers;let o="";for(const u in i)u.toLowerCase()==="fen"&&(o=i[u]),this.header(u,i[u]);if(!r)o&&this.load(o,{preserveHeaders:!0});else if(i.SetUp==="1"){if(!("FEN"in i))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(i.FEN,{preserveHeaders:!0})}let a=s.root;for(;a;){if(a.move){const u=this._moveFromSan(a.move,r);if(u==null)throw new Error(`Invalid move in PGN: ${a.move}`);this._makeMove(u),this._incPositionCount()}a.comment!==void 0&&(this._comments[this.fen()]=a.comment),a=a.variations[0]}const l=s.result;l&&Object.keys(this._header).length&&this._header.Result!==l&&this.setHeader("Result",l)}_moveToSan(e,r){let n="";if(e.flags&ye.KSIDE_CASTLE)n="O-O";else if(e.flags&ye.QSIDE_CASTLE)n="O-O-O";else{if(e.flags&ye.NULL_MOVE)return qd;if(e.piece!==ct){const s=SI(e,r);n+=e.piece.toUpperCase()+s}e.flags&(ye.CAPTURE|ye.EP_CAPTURE)&&(e.piece===ct&&(n+=bt(e.from)[0]),n+="x"),n+=bt(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,r=!1){let n=Kd(e);if(r||(n==="0-0"?n="O-O":n==="0-0-0"&&(n="O-O-O")),n==qd)return{color:this._turn,from:0,to:0,piece:"k",flags:ye.NULL_MOVE};let s=x0(n),i=this._moves({legal:!0,piece:s});for(let f=0,m=i.length;f<m;f++)if(n===Kd(this._moveToSan(i[f],i)))return i[f];if(r)return null;let o,a,l,u,d,h=!1;if(a=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],u=a[3],d=a[4],l.length==1&&(h=!0)):(a=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],u=a[3],d=a[4],l.length==1&&(h=!0))),s=x0(n),i=this._moves({legal:!0,piece:o||s}),!u)return null;for(let f=0,m=i.length;f<m;f++)if(l){if((!o||o.toLowerCase()==i[f].piece)&&ve[l]==i[f].from&&ve[u]==i[f].to&&(!d||d.toLowerCase()==i[f].promotion))return i[f];if(h){const w=bt(i[f].from);if((!o||o.toLowerCase()==i[f].piece)&&ve[u]==i[f].to&&(l==w[0]||l==w[1])&&(!d||d.toLowerCase()==i[f].promotion))return i[f]}}else if(n===Kd(this._moveToSan(i[f],i)).replace("x",""))return i[f];return null}ascii(){let e=`   +------------------------+
`;for(let r=ve.a8;r<=ve.h1;r++){if(Xa(r)===0&&(e+=" "+"87654321"[si(r)]+" |"),this._board[r]){const n=this._board[r].type,i=this._board[r].color===$t?n.toUpperCase():n.toLowerCase();e+=" "+i+" "}else e+=" . ";r+1&136&&(e+=`|
`,r+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const r=this._moves({legal:!1});let n=0;const s=this._turn;for(let i=0,o=r.length;i<o;i++)this._makeMove(r[i]),this._isKingAttacked(s)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let r=[];for(let n=ve.a8;n<=ve.h1;n++)this._board[n]==null?r.push(null):r.push({square:bt(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(r),r=[],n+=8);return e}squareColor(e){if(e in ve){const r=ve[e];return(si(r)+Xa(r))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const r=[],n=[];for(;this._history.length>0;)r.push(this._undoMove());for(;;){const s=r.pop();if(!s)break;e?n.push(new Hl(this,s)):n.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return n}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const r=this._positionCount.get(e)??0;r===1?this._positionCount.delete(e):this._positionCount.set(e,r-1)}_pruneComments(){const e=[],r={},n=s=>{s in this._comments&&(r[s]=this._comments[s])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const s=e.pop();if(!s)break;this._makeMove(s),n(this.fen())}this._comments=r}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const r=this._comments[e];return delete this._comments[e],{fen:e,comment:r}})}setCastlingRights(e,r){for(const s of[mt,ns])r[s]!==void 0&&(r[s]?this._castling[e]|=Vl[s]:this._castling[e]&=~Vl[s]);this._updateCastlingRights();const n=this.getCastlingRights(e);return(r[mt]===void 0||r[mt]===n[mt])&&(r[ns]===void 0||r[ns]===n[ns])}getCastlingRights(e){return{[mt]:(this._castling[e]&Vl[mt])!==0,[ns]:(this._castling[e]&Vl[ns])!==0}}moveNumber(){return this._moveNumber}}function EI(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}const Za="abcdefgh".split(""),mc={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},CI={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},kI={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},TI=[7,6,5,4,3,2,1,0],jI=[0,1,2,3,4,5,6,7],b0={wP:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),c.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),c.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),c.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),c.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),c.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[c.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),c.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),c.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),c.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[c.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),c.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),c.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),c.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),c.jsx("circle",{cx:"6",cy:"12",r:"2"}),c.jsx("circle",{cx:"14",cy:"9",r:"2"}),c.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),c.jsx("circle",{cx:"31",cy:"9",r:"2"}),c.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),c.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),c.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),c.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),c.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),c.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),c.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),c.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),c.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[c.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),c.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),c.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),c.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[c.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),c.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),c.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),c.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),c.jsx("circle",{cx:"6",cy:"12",r:"2"}),c.jsx("circle",{cx:"14",cy:"9",r:"2"}),c.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),c.jsx("circle",{cx:"31",cy:"9",r:"2"}),c.jsx("circle",{cx:"39",cy:"12",r:"2"}),c.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),c.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[c.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),c.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),c.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),c.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:c.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[c.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),c.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),c.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),c.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),c.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Dh(t,e,r){const n=e/8,s=t==="white"?CI:kI,i=t==="white"?TI:jI,o=s[r[0]]*n+n/2,a=i[parseInt(r[1],10)-1]*n+n/2;return{x:o,y:a}}function _0(t){let e=!1;return Object.keys(mc).forEach(r=>{t[r]!==mc[r]&&(e=!0)}),Object.keys(t).forEach(r=>{mc[r]!==t[r]&&(e=!0)}),e}function NI(t,e){const r={removed:{},added:{}};return Object.keys(t).forEach(n=>{e[n]!==t[n]&&(r.removed[n]=t[n])}),Object.keys(e).forEach(n=>{t[n]!==e[n]&&(r.added[n]=e[n])}),r}function S0(t){return t==="start"?mc:typeof t=="string"?OI(t):t}function OI(t){if(!PI(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),r={};let n=8;for(let s=0;s<8;s++){const i=e[s].split("");let o=0;for(let a=0;a<i.length;a++)if(i[a].search(/[1-8]/)!==-1){const l=parseInt(i[a],10);o=o+l}else{const l=Za[o]+n;r[l]=AI(i[a]),o=o+1}n=n-1}return r}function PI(t){t=t.replace(/ .+$/,""),t=RI(t);const e=t.split("/");if(e.length!==8)return!1;for(let r=0;r<8;r++)if(e[r].length!==8||e[r].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function RI(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function AI(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const II=(t,e=!0,r,n)=>{const[s,i]=p.useState([]),[o,a]=p.useState([]),[l,u]=p.useState();p.useEffect(()=>{Array.isArray(t)&&(d(),i(t==null?void 0:t.filter(w=>w[0]!==w[1])))},[t]),p.useEffect(()=>{r==null||r(o)},[o]);function d(){a([]),u(void 0)}const h=(w,g)=>{e&&u([w,g,n])},f=[...o,...s];return{arrows:f,newArrow:l,clearArrows:d,drawNewArrow:h,setArrows:a,onArrowDrawEnd:(w,g)=>{if(w===g||!e)return;let b;const y=[w,g,n];f.every(([x,_])=>!(x===w&&_===g))?b=[...o,y]:b=o.filter(([x,_])=>!(x===w&&_===g)),u(void 0),a(b)}}},s_=p.createContext({}),Hn=()=>p.useContext(s_),DI=p.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:r=!0,arePiecesDraggable:n=!0,arePremovesAllowed:s=!1,autoPromoteToQueen:i=!1,boardOrientation:o="white",boardWidth:a,children:l,clearPremovesOnRightClick:u=!0,customArrows:d,customArrowColor:h="rgb(255,170,0)",customBoardStyle:f,customNotationStyle:m,customDarkSquareStyle:w={backgroundColor:"#B58863"},customDropSquareStyle:g={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:b={backgroundColor:"#F0D9B5"},customPieces:y,customPremoveDarkSquareStyle:v={backgroundColor:"#A42323"},customPremoveLightSquareStyle:x={backgroundColor:"#BD2828"},customSquare:_="div",customSquareStyles:S,dropOffBoardAction:E="snapback",id:k=0,isDraggablePiece:j=()=>!0,getPositionObject:L=()=>{},onArrowsChange:M=()=>{},onDragOverSquare:X=()=>{},onMouseOutSquare:U=()=>{},onMouseOverSquare:V=()=>{},onPieceClick:O=()=>{},onPieceDragBegin:W=()=>{},onPieceDragEnd:$=()=>{},onPieceDrop:q=()=>!0,onPieceDropOffBoard:T=()=>{},onPromotionCheck:C=(re,le,Be)=>(Be==="wP"&&re[1]==="7"&&le[1]==="8"||Be==="bP"&&re[1]==="2"&&le[1]==="1")&&Math.abs(re.charCodeAt(0)-le.charCodeAt(0))<=1,onPromotionPieceSelect:F=()=>!0,onSparePieceDrop:K=()=>!0,onSquareClick:R=()=>{},onSquareRightClick:G=()=>{},position:J="start",promotionDialogVariant:oe="default",promotionToSquare:de=null,showBoardNotation:D=!0,showPromotionDialog:ne=!1,snapToCursor:we=!0},ae)=>{const[re,le]=p.useState(S0(J)),[Be,yt]=p.useState({removed:{},added:{}}),[It,ht]=p.useState(void 0),[cr,Ht]=p.useState(ne&&!i),[Q,fe]=p.useState(null),[he,je]=p.useState(de),[Je,Zt]=p.useState([]),at=p.useRef(Je),[Ie,wt]=p.useState(),[on,Sn]=p.useState(Object.assign(Object.assign({},b0),y)),[Vt,Lr]=p.useState(!1),[Mr,er]=p.useState(),[lt,ur]=p.useState(!1),[tr,an]=p.useState(null);p.useImperativeHandle(ae,()=>({clearPremoves(z=!0){Re(z)}})),p.useEffect(()=>{Sn(Object.assign(Object.assign({},b0),y))},[y]),p.useEffect(()=>{Ht(ne),je(de)},[de,ne]),p.useEffect(()=>{var z,Me,Ae;Et();const $e=S0(J),ln=NI(re,$e),Ge=((z=Object.keys(ln.added))===null||z===void 0?void 0:z.length)<=2?(Ae=(Me=Object.entries(ln.added))===null||Me===void 0?void 0:Me[0])===null||Ae===void 0?void 0:Ae[1][0]:void 0;if(lt)le($e),ur(!1),s&&ge(Ge),Mr&&clearTimeout(Mr);else if(Vt)le($e),ur(!1),s&&ge(Ge);else{_0($e)&&It!==void 0?ht(Ge):_0($e)?ht(void 0):ht("b"),yt(ln),ur(!0);const ml=setTimeout(()=>{le($e),ur(!1),s&&ge(Ge)},e);er(ml)}return Lr(!1),L($e),qn(),()=>{clearTimeout(Mr)}},[J]);const{arrows:$o,newArrow:Si,clearArrows:qn,drawNewArrow:Uo,onArrowDrawEnd:Ls}=II(d,r,M,h);function Er(z,Me,Ae,$e){if(z===Me)return;if(qn(),s&&lt||s&&(It===Ae[0]||at.current.filter(Ge=>Ge.piece[0]===Ae[0]).length>0)){const Ge=[...at.current];Ge.push({sourceSq:z,targetSq:Me,piece:Ae}),at.current=Ge,Zt([...Ge]),Et();return}if(!s&&lt)return;const ln=Object.assign({},re);Lr(!!$e),ht(Ae[0]),q.length?q(z,Me,Ae)||(Re(),Lr(!1)):(delete ln[z],ln[Me]=Ae,le(ln)),Et(),L(ln)}function Fo(z){const Me=Object.assign({},re);delete Me[z],le(Me),L(Me)}function ge(z){if(at.current.length===0)return;const Me=at.current[0];if(Me.piece[0]!==void 0&&Me.piece[0]!==z&&q.length)if(ht(Me.piece[0]),Lr(!0),q(Me.sourceSq,Me.targetSq,Me.piece)){const $e=[...at.current];$e.shift(),at.current=$e,Zt([...$e])}else Re()}function Oe(z,Me){if(!K(z,Me))return;const $e=Object.assign({},re);$e[Me]=z,le($e),L($e)}function Re(z=!0){z&&ht(void 0),at.current=[],Zt([])}function Et(){fe(null),je(null),Ht(!1)}function P(z){wt(z)}function Ct(z){if(Ie){if(Ie===z){wt(void 0),u&&Re(!1),G(z);return}}else wt(void 0)}function it(){wt(void 0)}const xt={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:n,arePremovesAllowed:s,arrows:$o,autoPromoteToQueen:i,boardOrientation:o,boardWidth:a,chessPieces:on,clearArrows:qn,clearCurrentRightClickDown:it,currentPosition:re,currentRightClickDown:Ie,customArrowColor:h,customBoardStyle:f,customDarkSquareStyle:w,customDropSquareStyle:g,customLightSquareStyle:b,customNotationStyle:m,customPremoveDarkSquareStyle:v,customPremoveLightSquareStyle:x,customSquare:_,customSquareStyles:S,deletePieceFromSquare:Fo,drawNewArrow:Uo,dropOffBoardAction:E,handleSetPosition:Er,handleSparePieceDrop:Oe,id:k,isDraggablePiece:j,isWaitingForAnimation:lt,lastPieceColour:It,lastSquareDraggedOver:tr,newArrow:Si,onArrowDrawEnd:Ls,onDragOverSquare:X,onMouseOutSquare:U,onMouseOverSquare:V,onPieceClick:O,onPieceDragBegin:W,onPieceDragEnd:$,onPieceDrop:q,onPieceDropOffBoard:T,onPromotionCheck:C,onPromotionPieceSelect:F,onRightClickDown:P,onRightClickUp:Ct,onSparePieceDrop:K,onSquareClick:R,positionDifferences:Be,premoves:Je,promoteFromSquare:Q,promoteToSquare:he,promotionDialogVariant:oe,setLastSquareDraggedOver:an,setPromoteFromSquare:fe,setPromoteToSquare:je,setShowPromoteDialog:Ht,showBoardNotation:D,showPromoteDialog:cr,snapToCursor:we};return c.jsx(s_.Provider,Object.assign({value:xt},{children:l}))});function LI({row:t,col:e}){const{boardOrientation:r,boardWidth:n,customDarkSquareStyle:s,customLightSquareStyle:i,customNotationStyle:o}=Hn(),a=i.backgroundColor,l=s.backgroundColor,u=e===0,d=t===7,h=u&&d;function f(){return r==="white"?8-t:t+1}function m(){return r==="black"?Za[7-e]:Za[e]}function w(){return c.jsxs(c.Fragment,{children:[c.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),C0(n,o))},{children:f()})),c.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),E0(n,o))},{children:m()}))]})}function g(){return c.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?l:a}),E0(n,o))},{children:m()}))}function b(){return c.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},r==="black"?{color:t%2===0?l:a}:{color:t%2===0?l:a}),C0(n,o))},{children:f()}))}return h?w():d?g():u?b():null}const E0=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),C0=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),i_=p.createContext({dragDropManager:void 0});function Cr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var k0=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Gd=function(){return Math.random().toString(36).substring(7).split("").join(".")},T0={INIT:"@@redux/INIT"+Gd(),REPLACE:"@@redux/REPLACE"+Gd(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Gd()}};function MI(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function o_(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Cr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Cr(1));return r(o_)(t,e)}if(typeof t!="function")throw new Error(Cr(2));var s=t,i=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Cr(3));return i}function h(g){if(typeof g!="function")throw new Error(Cr(4));if(l)throw new Error(Cr(5));var b=!0;return u(),a.push(g),function(){if(b){if(l)throw new Error(Cr(6));b=!1,u();var v=a.indexOf(g);a.splice(v,1),o=null}}}function f(g){if(!MI(g))throw new Error(Cr(7));if(typeof g.type>"u")throw new Error(Cr(8));if(l)throw new Error(Cr(9));try{l=!0,i=s(i,g)}finally{l=!1}for(var b=o=a,y=0;y<b.length;y++){var v=b[y];v()}return g}function m(g){if(typeof g!="function")throw new Error(Cr(10));s=g,f({type:T0.REPLACE})}function w(){var g,b=h;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Cr(11));function x(){v.next&&v.next(d())}x();var _=b(x);return{unsubscribe:_}}},g[k0]=function(){return this},g}return f({type:T0.INIT}),n={dispatch:f,subscribe:h,getState:d,replaceReducer:m},n[k0]=w,n}function _e(t,e,...r){if($I()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;n=new Error(e.replace(/%s/g,function(){return r[s++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function $I(){return typeof process<"u"&&!0}function UI(t,e,r){return e.split(".").reduce((n,s)=>n&&n[s]?n[s]:r||null,t)}function FI(t,e){return t.filter(r=>r!==e)}function a_(t){return typeof t=="object"}function BI(t,e){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};t.forEach(n),e.forEach(n);const s=[];return r.forEach((i,o)=>{i===1&&s.push(o)}),s}function zI(t,e){return t.filter(r=>e.indexOf(r)>-1)}const km="dnd-core/INIT_COORDS",Uu="dnd-core/BEGIN_DRAG",Tm="dnd-core/PUBLISH_DRAG_SOURCE",Fu="dnd-core/HOVER",Bu="dnd-core/DROP",zu="dnd-core/END_DRAG";function j0(t,e){return{type:km,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const WI={type:km,payload:{clientOffset:null,sourceClientOffset:null}};function HI(t){return function(r=[],n={publishSource:!0}){const{publishSource:s=!0,clientOffset:i,getSourceClientOffset:o}=n,a=t.getMonitor(),l=t.getRegistry();t.dispatch(j0(i)),VI(r,a,l);const u=GI(r,a);if(u==null){t.dispatch(WI);return}let d=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");qI(o),d=o(u)}t.dispatch(j0(i,d));const f=l.getSource(u).beginDrag(a,u);if(f==null)return;KI(f),l.pinSource(u);const m=l.getSourceType(u);return{type:Uu,payload:{itemType:m,item:f,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!s}}}}function VI(t,e,r){_e(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){_e(r.getSource(n),"Expected sourceIds to be registered.")})}function qI(t){_e(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function KI(t){_e(a_(t),"Item must be an object.")}function GI(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function QI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){QI(t,s,r[s])})}return t}function JI(t){return function(r={}){const n=t.getMonitor(),s=t.getRegistry();XI(n),tD(n).forEach((o,a)=>{const l=ZI(o,a,s,n),u={type:Bu,payload:{dropResult:YI({},r,l)}};t.dispatch(u)})}}function XI(t){_e(t.isDragging(),"Cannot call drop while not dragging."),_e(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function ZI(t,e,r,n){const s=r.getTarget(t);let i=s?s.drop(n,t):void 0;return eD(i),typeof i>"u"&&(i=e===0?{}:n.getDropResult()),i}function eD(t){_e(typeof t>"u"||a_(t),"Drop result must either be an object or undefined.")}function tD(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function rD(t){return function(){const r=t.getMonitor(),n=t.getRegistry();nD(r);const s=r.getSourceId();return s!=null&&(n.getSource(s,!0).endDrag(r,s),n.unpinSource()),{type:zu}}}function nD(t){_e(t.isDragging(),"Cannot call endDrag while not dragging.")}function Lh(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function sD(t){return function(r,{clientOffset:n}={}){iD(r);const s=r.slice(0),i=t.getMonitor(),o=t.getRegistry(),a=i.getItemType();return aD(s,o,a),oD(s,i,o),lD(s,i,o),{type:Fu,payload:{targetIds:s,clientOffset:n||null}}}}function iD(t){_e(Array.isArray(t),"Expected targetIds to be an array.")}function oD(t,e,r){_e(e.isDragging(),"Cannot call hover while not dragging."),_e(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const s=t[n];_e(t.lastIndexOf(s)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(s);_e(i,"Expected targetIds to be registered.")}}function aD(t,e,r){for(let n=t.length-1;n>=0;n--){const s=t[n],i=e.getTargetType(s);Lh(i,r)||t.splice(n,1)}}function lD(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function cD(t){return function(){if(t.getMonitor().isDragging())return{type:Tm}}}function uD(t){return{beginDrag:HI(t),publishDragSource:cD(t),hover:sD(t),drop:JI(t),endDrag:rD(t)}}class dD{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const a=i.apply(e,o);typeof a<"u"&&r(a)}}const s=uD(this);return Object.keys(s).reduce((i,o)=>{const a=s[o];return i[o]=n(a),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function fD(t,e){return{x:t.x+e.x,y:t.y+e.y}}function l_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function hD(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:l_(fD(e,n),r)}function pD(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:l_(e,r)}const ya=[],jm=[];ya.__IS_NONE__=!0;jm.__IS_ALL__=!0;function mD(t,e){return t===ya?!1:t===jm||typeof e>"u"?!0:zI(e,t).length>0}class gD{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;_e(typeof e=="function","listener must be a function."),_e(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),a=o.stateId;try{a===s||a===s+1&&!mD(o.dirtyHandlerIds,n)||e()}finally{s=a}};return this.store.subscribe(i)}subscribeToOffsetChange(e){_e(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const s=this.store.getState().dragOffset;s!==r&&(r=s,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return _e(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(_e(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),s=this.getItemType();return Lh(n,s)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(_e(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),s=this.getItemType();return n!==s?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),i=this.getItemType();if(i&&!Lh(s,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return n?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return hD(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return pD(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const N0=typeof global<"u"?global:self,c_=N0.MutationObserver||N0.WebKitMutationObserver;function u_(t){return function(){const r=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(r),clearInterval(n),t()}}}function vD(t){let e=1;const r=new c_(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const yD=typeof c_=="function"?vD:u_;class wD{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,s=e.length-this.index;n<s;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=yD(this.flush),this.requestErrorThrow=u_(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class xD{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class bD{create(e){const r=this.freeTasks,n=r.length?r.pop():new xD(this.onError,s=>r[r.length]=s);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const d_=new wD,_D=new bD(d_.registerPendingError);function SD(t){d_.enqueueTask(_D.create(t))}const Nm="dnd-core/ADD_SOURCE",Om="dnd-core/ADD_TARGET",Pm="dnd-core/REMOVE_SOURCE",Wu="dnd-core/REMOVE_TARGET";function ED(t){return{type:Nm,payload:{sourceId:t}}}function CD(t){return{type:Om,payload:{targetId:t}}}function kD(t){return{type:Pm,payload:{sourceId:t}}}function TD(t){return{type:Wu,payload:{targetId:t}}}function jD(t){_e(typeof t.canDrag=="function","Expected canDrag to be a function."),_e(typeof t.beginDrag=="function","Expected beginDrag to be a function."),_e(typeof t.endDrag=="function","Expected endDrag to be a function.")}function ND(t){_e(typeof t.canDrop=="function","Expected canDrop to be a function."),_e(typeof t.hover=="function","Expected hover to be a function."),_e(typeof t.drop=="function","Expected beginDrag to be a function.")}function Mh(t,e){if(e&&Array.isArray(t)){t.forEach(r=>Mh(r,!1));return}_e(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Or;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Or||(Or={}));let OD=0;function PD(){return OD++}function RD(t){const e=PD().toString();switch(t){case Or.SOURCE:return`S${e}`;case Or.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function O0(t){switch(t[0]){case"S":return Or.SOURCE;case"T":return Or.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function P0(t,e){const r=t.entries();let n=!1;do{const{done:s,value:[,i]}=r.next();if(i===e)return!0;n=!!s}while(!n);return!1}class AD{addSource(e,r){Mh(e),jD(r);const n=this.addHandler(Or.SOURCE,e,r);return this.store.dispatch(ED(n)),n}addTarget(e,r){Mh(e,!0),ND(r);const n=this.addHandler(Or.TARGET,e,r);return this.store.dispatch(CD(n)),n}containsHandler(e){return P0(this.dragSources,e)||P0(this.dropTargets,e)}getSource(e,r=!1){return _e(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return _e(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return _e(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return _e(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return O0(e)===Or.SOURCE}isTargetId(e){return O0(e)===Or.TARGET}removeSource(e){_e(this.getSource(e),"Expected an existing source."),this.store.dispatch(kD(e)),SD(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){_e(this.getTarget(e),"Expected an existing target."),this.store.dispatch(TD(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);_e(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){_e(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const s=RD(e);return this.types.set(s,r),e===Or.SOURCE?this.dragSources.set(s,n):e===Or.TARGET&&this.dropTargets.set(s,n),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const ID=(t,e)=>t===e;function DD(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function LD(t,e,r=ID){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function MD(t=ya,e){switch(e.type){case Fu:break;case Nm:case Om:case Wu:case Pm:return ya;case Uu:case Tm:case zu:case Bu:default:return jm}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,s=BI(r,n);if(!(s.length>0||!LD(r,n)))return ya;const o=n[n.length-1],a=r[r.length-1];return o!==a&&(o&&s.push(o),a&&s.push(a)),s}function $D(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){$D(t,s,r[s])})}return t}const R0={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function FD(t=R0,e){const{payload:r}=e;switch(e.type){case km:case Uu:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Fu:return DD(t.clientOffset,r.clientOffset)?t:UD({},t,{clientOffset:r.clientOffset});case zu:case Bu:return R0;default:return t}}function BD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){BD(t,s,r[s])})}return t}const zD={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function WD(t=zD,e){const{payload:r}=e;switch(e.type){case Uu:return Pi({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Tm:return Pi({},t,{isSourcePublic:!0});case Fu:return Pi({},t,{targetIds:r.targetIds});case Wu:return t.targetIds.indexOf(r.targetId)===-1?t:Pi({},t,{targetIds:FI(t.targetIds,r.targetId)});case Bu:return Pi({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case zu:return Pi({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function HD(t=0,e){switch(e.type){case Nm:case Om:return t+1;case Pm:case Wu:return t-1;default:return t}}function VD(t=0){return t+1}function qD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){qD(t,s,r[s])})}return t}function GD(t={},e){return{dirtyHandlerIds:MD(t.dirtyHandlerIds,{type:e.type,payload:KD({},e.payload,{prevTargetIds:UI(t,"dragOperation.targetIds",[])})}),dragOffset:FD(t.dragOffset,e),refCount:HD(t.refCount,e),dragOperation:WD(t.dragOperation,e),stateId:VD(t.stateId)}}function QD(t,e=void 0,r={},n=!1){const s=YD(n),i=new gD(s,new AD(s)),o=new dD(s,i),a=t(o,e,r);return o.receiveBackend(a),o}function YD(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return o_(GD,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function JD(t,e){if(t==null)return{};var r=XD(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function XD(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}let A0=0;const gc=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var ZD=p.memo(function(e){var{children:r}=e,n=JD(e,["children"]);const[s,i]=e3(n);return p.useEffect(()=>{if(i){const o=f_();return++A0,()=>{--A0===0&&(o[gc]=null)}}},[]),c.jsx(i_.Provider,{value:s,children:r})});function e3(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=t3(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function t3(t,e=f_(),r,n){const s=e;return s[gc]||(s[gc]={dragDropManager:QD(t,e,r,n)}),s[gc]}function f_(){return typeof global<"u"?global:window}var r3=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};const di=typeof window<"u"?p.useLayoutEffect:p.useEffect;function h_(t,e,r){const[n,s]=p.useState(()=>e(t)),i=p.useCallback(()=>{const o=e(t);r3(n,o)||(s(o),r&&r())},[n,t,r]);return di(i),[n,i]}function n3(t,e,r){const[n,s]=h_(t,e,r);return di(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(s,{handlerIds:[o]})},[t,s]),n}function p_(t,e,r){return n3(e,t||(()=>({})),()=>r.reconnect())}function m_(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),p.useMemo(()=>typeof t=="function"?t():t,r)}function s3(t){return p.useMemo(()=>t.hooks.dragSource(),[t])}function i3(t){return p.useMemo(()=>t.hooks.dragPreview(),[t])}let Qd=!1,Yd=!1;class o3{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){_e(!Qd,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Qd=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Qd=!1}}isDragging(){if(!this.sourceId)return!1;_e(!Yd,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Yd=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Yd=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Jd=!1;class a3{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;_e(!Jd,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Jd=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Jd=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function l3(t,e,r){const n=r.getRegistry(),s=n.addTarget(t,e);return[s,()=>n.removeTarget(s)]}function c3(t,e,r){const n=r.getRegistry(),s=n.addSource(t,e);return[s,()=>n.removeSource(s)]}function $h(t,e,r,n){let s;if(s!==void 0)return!!s;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<i.length;l++){const u=i[l];if(!a(u))return!1;const d=t[u],h=e[u];if(s=void 0,s===!1||s===void 0&&d!==h)return!1}return!0}function Uh(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function u3(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function d3(t){return(e=null,r=null)=>{if(!p.isValidElement(e)){const i=e;return t(i,r),i}const n=e;return u3(n),f3(n,r?i=>t(i,r):t)}}function g_(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const s=d3(n);e[r]=()=>s}}),e}function I0(t,e){typeof t=="function"?t(e):t.current=e}function f3(t,e){const r=t.ref;return _e(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?p.cloneElement(t,{ref:n=>{I0(r,n),I0(e,n)}}):p.cloneElement(t,{ref:e})}class h3{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!$h(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!$h(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=g_({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Uh(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Uh(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class p3{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!$h(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=g_({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Uh(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function _i(){const{dragDropManager:t}=p.useContext(i_);return _e(t!=null,"Expected drag drop context"),t}function m3(t,e){const r=_i(),n=p.useMemo(()=>new h3(r.getBackend()),[r]);return di(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),di(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function g3(){const t=_i();return p.useMemo(()=>new o3(t),[t])}class v3{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,s=this.monitor,{isDragging:i}=n;return i?i(s):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:s}=e;s&&s(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function y3(t,e,r){const n=p.useMemo(()=>new v3(t,e,r),[e,r]);return p.useEffect(()=>{n.spec=t},[t]),n}function w3(t){return p.useMemo(()=>{const e=t.type;return _e(e!=null,"spec.type must be defined"),e},[t])}function x3(t,e,r){const n=_i(),s=y3(t,e,r),i=w3(t);di(function(){if(i!=null){const[a,l]=c3(i,s,n);return e.receiveHandlerId(a),r.receiveHandlerId(a),l}},[n,e,r,s,i])}function b3(t,e){const r=m_(t,e);_e(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=g3(),s=m3(r.options,r.previewOptions);return x3(r,n,s),[p_(r.collect,n,s),s3(s),i3(s)]}function _3(t){const r=_i().getMonitor(),[n,s]=h_(r,t);return p.useEffect(()=>r.subscribeToOffsetChange(s)),p.useEffect(()=>r.subscribeToStateChange(s)),n}function S3(t){return p.useMemo(()=>t.hooks.dropTarget(),[t])}function E3(t){const e=_i(),r=p.useMemo(()=>new p3(e.getBackend()),[e]);return di(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function C3(){const t=_i();return p.useMemo(()=>new a3(t),[t])}function k3(t){const{accept:e}=t;return p.useMemo(()=>(_e(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class T3{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function j3(t,e){const r=p.useMemo(()=>new T3(t,e),[e]);return p.useEffect(()=>{r.spec=t},[t]),r}function N3(t,e,r){const n=_i(),s=j3(t,e),i=k3(t);di(function(){const[a,l]=l3(i,s,n);return e.receiveHandlerId(a),r.receiveHandlerId(a),l},[n,e,s,r,i.map(o=>o.toString()).join("|")])}function O3(t,e){const r=m_(t,e),n=C3(),s=E3(r.options);return N3(r,n,s),[p_(r.collect,n,s),S3(s)]}function v_(t){let e=null;return()=>(e==null&&(e=t()),e)}function P3(t,e){return t.filter(r=>r!==e)}function R3(t,e){const r=new Set,n=i=>r.add(i);t.forEach(n),e.forEach(n);const s=[];return r.forEach(i=>s.push(i)),s}class A3{enter(e){const r=this.entered.length,n=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=R3(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=P3(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class I3{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const s=this.config.exposeProperties[n];s!=null&&(r[n]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const y_="__NATIVE_FILE__",w_="__NATIVE_URL__",x_="__NATIVE_TEXT__",b_="__NATIVE_HTML__";var D0=Object.freeze({__proto__:null,FILE:y_,HTML:b_,TEXT:x_,URL:w_});function Xd(t,e,r){const n=e.reduce((s,i)=>s||t.getData(i),"");return n??r}const Fh={[y_]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[b_]:{exposeProperties:{html:(t,e)=>Xd(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[w_]:{exposeProperties:{urls:(t,e)=>Xd(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[x_]:{exposeProperties:{text:(t,e)=>Xd(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function D3(t,e){const r=Fh[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new I3(r);return n.loadDataTransfer(e),n}function Zd(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Fh).filter(r=>{const n=Fh[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const L3=v_(()=>/firefox/i.test(navigator.userAgent)),__=v_(()=>!!window.safari);class L0{interpolate(e){const{xs:r,ys:n,c1s:s,c2s:i,c3s:o}=this;let a=r.length-1;if(e===r[a])return n[a];let l=0,u=o.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));const m=r[d];if(m<e)l=d+1;else if(m>e)u=d-1;else return n[d]}a=Math.max(0,u);const h=e-r[a],f=h*h;return n[a]+s[a]*h+i[a]*f+o[a]*h*f}constructor(e,r){const{length:n}=e,s=[];for(let m=0;m<n;m++)s.push(m);s.sort((m,w)=>e[m]<e[w]?-1:1);const i=[],o=[];let a,l;for(let m=0;m<n-1;m++)a=e[m+1]-e[m],l=r[m+1]-r[m],i.push(a),o.push(l/a);const u=[o[0]];for(let m=0;m<i.length-1;m++){const w=o[m],g=o[m+1];if(w*g<=0)u.push(0);else{a=i[m];const b=i[m+1],y=a+b;u.push(3*y/((y+b)/w+(y+a)/g))}}u.push(o[o.length-1]);const d=[],h=[];let f;for(let m=0;m<u.length-1;m++){f=o[m];const w=u[m],g=1/i[m],b=w+u[m+1]-f-f;d.push((f-w-b)*g),h.push(b*g*g)}this.xs=e,this.ys=r,this.c1s=u,this.c2s=d,this.c3s=h}}const M3=1;function S_(t){const e=t.nodeType===M3?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function ql(t){return{x:t.clientX,y:t.clientY}}function $3(t){var e;return t.nodeName==="IMG"&&(L3()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function U3(t,e,r,n){let s=t?e.width:r,i=t?e.height:n;return __()&&t&&(i/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:i}}function F3(t,e,r,n,s){const i=$3(e),a=S_(i?t:e),l={x:r.x-a.x,y:r.y-a.y},{offsetWidth:u,offsetHeight:d}=t,{anchorX:h,anchorY:f}=n,{dragPreviewWidth:m,dragPreviewHeight:w}=U3(i,e,u,d),g=()=>{let E=new L0([0,.5,1],[l.y,l.y/d*w,l.y+w-d]).interpolate(f);return __()&&i&&(E+=(window.devicePixelRatio-1)*w),E},b=()=>new L0([0,.5,1],[l.x,l.x/u*m,l.x+m-u]).interpolate(h),{offsetX:y,offsetY:v}=s,x=y===0||y,_=v===0||v;return{x:x?y:b(),y:_?v:g()}}let B3=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}};function z3(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){z3(t,s,r[s])})}return t}class W3{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const s=o=>this.handleDragStart(o,e),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",s),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",s),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=o=>this.handleDragEnter(o,e),s=o=>this.handleDragOver(o,e),i=o=>this.handleDrop(o,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",s),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",s),r.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return M0({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return M0({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(D0).some(r=>D0[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=D3(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const i=this.sourceNodes.get(s);return i&&S_(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=ql(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=s,l=Zd(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const d=this.monitor.getSourceId(),h=this.sourceNodes.get(d),f=this.sourcePreviewNodes.get(d)||h;if(f){const{anchorX:m,anchorY:w,offsetX:g,offsetY:b}=this.getCurrentSourcePreviewNodeOptions(),x=F3(h,f,o,{anchorX:m,anchorY:w},{offsetX:g,offsetY:b});a.setDragImage(f,x.x,x.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:a}=s,l=Zd(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,i.length>0&&this.actions.hover(i,{clientOffset:ql(s)}),i.some(a=>this.monitor.canDropOnTarget(a))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=ql(s),this.scheduleHover(i),(i||[]).some(a=>this.monitor.canDropOnTarget(a))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;s.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}else Zd(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:ql(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const i=s.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(s.preventDefault(),i.dragDrop()))},this.options=new B3(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new A3(this.isNodeInDocument)}}let Kl;function H3(){return Kl||(Kl=new Image,Kl.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Kl}const V3=function(e,r,n){return new W3(e,r,n)};function $0({isPremovedPiece:t=!1,piece:e,square:r,squares:n}){const{animationDuration:s,arePiecesDraggable:i,boardWidth:o,boardOrientation:a,chessPieces:l,currentPosition:u,deletePieceFromSquare:d,dropOffBoardAction:h,id:f,isDraggablePiece:m,isWaitingForAnimation:w,onPieceClick:g,onPieceDragBegin:b,onPieceDragEnd:y,onPieceDropOffBoard:v,onPromotionCheck:x,positionDifferences:_}=Hn(),[S,E]=p.useState({opacity:1,zIndex:5,touchAction:"none",cursor:i&&m({piece:e,sourceSquare:r})?"-webkit-grab":"default"}),[{canDrag:k,isDragging:j},L,M]=b3(()=>({type:"piece",item:()=>(b(e,r),{piece:e,square:r,id:f}),end:(U,V)=>{y(e,r),!V.didDrop()&&(h==="trash"&&d(r),v==null||v(r,e))},collect:U=>({canDrag:m({piece:e,sourceSquare:r}),isDragging:!!U.isDragging()})}),[e,r,u,f]);M(H3(),{captureDraggingState:!0}),p.useEffect(()=>{E(U=>Object.assign(Object.assign({},U),{opacity:j?0:1}))},[j]),p.useEffect(()=>{var U;const V=(U=_.removed)===null||U===void 0?void 0:U[r];if(!_.added||!V)return;const O=Object.entries(_.added).find(([W,$])=>$===V||x(r,W,V));if(w&&V&&O&&!t){const W=r,$=O[0];if(W&&$){const q=o/8;E(T=>Object.assign(Object.assign({},T),{transform:`translate(${(a==="black"?-1:1)*($.charCodeAt(0)-W.charCodeAt(0))*q}px, ${(a==="black"?-1:1)*(Number(W[1])-Number($[1]))*q}px)`,transition:`transform ${s}ms`,zIndex:6}))}}},[_]),p.useEffect(()=>{const{sourceSq:U}=X();U&&E(V=>Object.assign(Object.assign({},V),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[u]),p.useEffect(()=>{E(U=>Object.assign(Object.assign({},U),{cursor:i&&m({piece:e,sourceSquare:r})?"-webkit-grab":"default"}))},[r,u,i]);function X(){return{sourceSq:n[r]}}return c.jsx("div",Object.assign({ref:i&&k?L:null,onClick:()=>g(e,r),"data-piece":e,style:S},{children:typeof l[e]=="function"?l[e]({squareWidth:o/8,isDragging:j,square:r}):c.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:o/8,height:o/8,style:{display:"block"}},{children:c.jsx("g",{children:l[e]})}))}))}function q3({square:t,squareColor:e,setSquares:r,squareHasPremove:n,children:s}){const i=p.useRef(null),{autoPromoteToQueen:o,boardWidth:a,boardOrientation:l,clearArrows:u,currentPosition:d,currentRightClickDown:h,customBoardStyle:f,customDarkSquareStyle:m,customDropSquareStyle:w,customLightSquareStyle:g,customPremoveDarkSquareStyle:b,customPremoveLightSquareStyle:y,customSquare:v,customSquareStyles:x,drawNewArrow:_,handleSetPosition:S,handleSparePieceDrop:E,isWaitingForAnimation:k,lastPieceColour:j,lastSquareDraggedOver:L,onArrowDrawEnd:M,onDragOverSquare:X,onMouseOutSquare:U,onMouseOverSquare:V,onPieceDrop:O,onPromotionCheck:W,onRightClickDown:$,onRightClickUp:q,onSquareClick:T,setLastSquareDraggedOver:C,setPromoteFromSquare:F,setPromoteToSquare:K,setShowPromoteDialog:R}=Hn(),[{isOver:G},J]=O3(()=>({accept:"piece",drop:oe,collect:D=>({isOver:!!D.isOver()})}),[t,d,O,k,j]);function oe(D){if(D.isSpare){E(D.piece,t);return}W(D.square,t,D.piece)?o?S(D.square,t,D.piece[0]==="w"?"wQ":"bQ"):(F(D.square),K(t),R(!0)):S(D.square,t,D.piece,!0)}p.useEffect(()=>{if(i.current){const{x:D,y:ne}=i.current.getBoundingClientRect();r(we=>Object.assign(Object.assign({},we),{[t]:{x:D,y:ne}}))}},[a,l]);const de=Object.assign(Object.assign(Object.assign(Object.assign({},K3(t,l,f)),e==="black"?m:g),n&&(e==="black"?b:y)),G&&w);return c.jsx("div",Object.assign({ref:J,style:de,"data-square-color":e,"data-square":t,onTouchMove:D=>{var ne;const we=D.touches[0],ae=document.elementsFromPoint(we.clientX,we.clientY),re=(ne=ae==null?void 0:ae.find(le=>le.getAttribute("data-square")))===null||ne===void 0?void 0:ne.getAttribute("data-square");re&&re!==L&&(C(re),X(re))},onMouseOver:D=>{D.buttons===2&&h&&_(h,t),!(D.relatedTarget&&D.currentTarget.contains(D.relatedTarget))&&V(t)},onMouseOut:D=>{D.relatedTarget&&D.currentTarget.contains(D.relatedTarget)||U(t)},onMouseDown:D=>{D.button===2&&$(t)},onMouseUp:D=>{D.button===2&&(h&&M(h,t),q(t))},onDragEnter:()=>X(t),onClick:()=>{const D=d[t];T(t,D),u()},onContextMenu:D=>{D.preventDefault()}},{children:typeof v=="string"?c.jsx(v,Object.assign({ref:i,style:Object.assign(Object.assign(Object.assign({},F0(a)),U0),!n&&(x==null?void 0:x[t]))},{children:s})):c.jsx(v,Object.assign({ref:i,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},F0(a)),U0),!n&&(x==null?void 0:x[t]))},{children:s}))}))}const U0={display:"flex",justifyContent:"center"},F0=t=>({width:t/8,height:t/8}),K3=(t,e,r)=>r!=null&&r.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:r.borderRadius}:{borderTopRightRadius:r.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:r.borderRadius}:{borderBottomRightRadius:r.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:r.borderRadius}:{borderTopLeftRadius:r.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:r.borderRadius}:{borderBottomLeftRadius:r.borderRadius}:{}:{};function G3(){const[t,e]=p.useState({}),{arePremovesAllowed:r,boardOrientation:n,boardWidth:s,currentPosition:i,id:o,premoves:a,showBoardNotation:l}=Hn(),u=p.useMemo(()=>{const d=[];return r?(a.forEach((h,f)=>{const{sourceSq:m,targetSq:w,piece:g}=h,b=d.find(y=>{var v;return y.piece===g&&((v=y.premovesRoute.at(-1))===null||v===void 0?void 0:v.targetSq)===m});b?b.premovesRoute.push({sourceSq:m,targetSq:w,index:f}):d.push({piece:g,premovesRoute:[{sourceSq:m,targetSq:w,index:f}]})}),d):[]},[a]);return c.jsx("div",Object.assign({"data-boardid":o},{children:[...Array(8)].map((d,h)=>c.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:s}},{children:[...Array(8)].map((f,m)=>{const w=n==="black"?Za[7-m]+(h+1):Za[m]+(8-h),g=m%2===h%2?"white":"black",b=a.find(v=>v.sourceSq===w||v.targetSq===w),y=u.filter(({premovesRoute:v})=>{var x;return((x=v.at(-1))===null||x===void 0?void 0:x.targetSq)===w}).sort((v,x)=>{var _,S;return((_=x.premovesRoute.at(-1))===null||_===void 0?void 0:_.index)-((S=v.premovesRoute.at(-1))===null||S===void 0?void 0:S.index)}).at(0);return c.jsxs(q3,Object.assign({square:w,squareColor:g,setSquares:e,squareHasPremove:!!b},{children:[!b&&i[w]&&c.jsx($0,{piece:i[w],square:w,squares:t}),y&&c.jsx($0,{isPremovedPiece:!0,piece:y.piece,square:w,squares:t}),l&&c.jsx(LI,{row:h,col:m})]}),`${m}${h}`)})}),h.toString()))}))}const Q3=()=>{const{arrows:t,newArrow:e,boardOrientation:r,boardWidth:n,customArrowColor:s}=Hn(),i=[...t,e].filter(Boolean);return c.jsx("svg",Object.assign({width:n,height:n,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:i.map((o,a)=>{const[l,u,d]=o;if(l===u)return null;const h=Dh(r,n,l),f=Dh(r,n,u);let m=n/32;const w=a===t.length;t.some(x=>x[0]!==l&&x[1]===u)&&!w&&(m=n/16);const g=f.x-h.x,b=f.y-h.y,y=Math.hypot(b,g),v={x:h.x+g*(y-m)/y,y:h.y+b*(y-m)/y};return c.jsxs(p.Fragment,{children:[c.jsx("marker",Object.assign({id:`arrowhead-${a}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:c.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:d??s})})),c.jsx("line",{x1:h.x,y1:h.y,x2:v.x,y2:v.y,opacity:w?"0.5":"0.65",stroke:d??s,strokeWidth:w?.9*n/40:n/40,markerEnd:`url(#arrowhead-${a})`})]},`${l}-${u}${w?"-active":""}`)})}))};function Y3({option:t}){const[e,r]=p.useState(!1),{boardWidth:n,chessPieces:s,customDarkSquareStyle:i,customLightSquareStyle:o,handleSetPosition:a,onPromotionPieceSelect:l,promoteFromSquare:u,promoteToSquare:d,promotionDialogVariant:h}=Hn(),f=()=>{switch(t[1]){case"Q":return i.backgroundColor;case"R":return o.backgroundColor;case"N":return h==="default"?o.backgroundColor:i.backgroundColor;case"B":return h==="default"?i.backgroundColor:o.backgroundColor}};return c.jsx("div",Object.assign({onClick:()=>{l(t,u??void 0,d??void 0)&&a(u,d,t,!0)},onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof s[t]=="function"?c.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:s[t]({squareWidth:n/8,isDragging:!1})})):c.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:n/8,height:n/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:c.jsx("g",{children:s[t]})}))}))}function J3(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:r,promoteToSquare:n}=Hn(),s=(n==null?void 0:n[1])==="1"?"b":"w",i=[`${s??"w"}Q`,`${s??"w"}R`,`${s??"w"}N`,`${s??"w"}B`],o={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},a=Dh(t,e,n||"a8");return c.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${a==null?void 0:a.y}px`,left:`${a==null?void 0:a.x}px`,zIndex:1e3},o[r]),title:"Choose promotion piece"},{children:i.map(l=>c.jsx(Y3,{option:l},l))}))}const X3={whiteKing:c.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:c.jsx("g",{children:c.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function Z3({children:t}){try{return c.jsx(c.Fragment,{children:t})}catch(e){return console.log(e),c.jsx(E_,{showError:!0})}}function E_({showError:t=!1}){return c.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[c.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:X3.whiteKing})),t&&c.jsx("h1",{children:"Something went wrong"})]}))}function e4(){const t=p.useRef(null),{boardWidth:e,clearCurrentRightClickDown:r,onPromotionPieceSelect:n,setShowPromoteDialog:s,showPromoteDialog:i,customBoardStyle:o}=Hn();return p.useEffect(()=>{function a(l){t.current&&!t.current.contains(l.target)&&r()}return document.addEventListener("mouseup",a),()=>{document.removeEventListener("mouseup",a)}},[]),e?c.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:c.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},t4(e)),o)},{children:[c.jsx(G3,{}),c.jsx(Q3,{}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{onClick:()=>{s(!1),n==null||n()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),c.jsx(J3,{})]})]}))})):c.jsx(E_,{})}const t4=t=>({cursor:"default",height:t,width:t});var Cs;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(Cs||(Cs={}));class r4{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,r,n,s;return(s=(n=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&s!==void 0?s:0}get delayMouseStart(){var e,r,n,s;return(s=(n=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&s!==void 0?s:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,r){this.args=e,this.context=r}}function n4(t,e,r,n){return Math.sqrt(Math.pow(Math.abs(r-t),2)+Math.pow(Math.abs(n-e),2))}function s4(t,e,r,n,s){if(!s)return!1;const i=Math.atan2(n-e,r-t)*180/Math.PI+180;for(let o=0;o<s.length;++o){const a=s[o];if(a&&(a.start==null||i>=a.start)&&(a.end==null||i<=a.end))return!0}return!1}const i4={Left:1,Right:2,Center:4},o4={Left:0,Center:1,Right:2};function ef(t){return t.button===void 0||t.button===o4.Left}function a4(t){return t.buttons===void 0||(t.buttons&i4.Left)===0}function C_(t){return!!t.targetTouches}const l4=1;function c4(t){const e=t.nodeType===l4?t:t.parentElement;if(!e)return;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function u4(t,e){if(t.targetTouches.length===1)return eu(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return eu(t.touches[0])}function eu(t,e){return C_(t)?u4(t,e):{x:t.clientX,y:t.clientY}}const B0=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Xo={[Cs.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Cs.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Cs.keyboard]:{keydown:"keydown"}};class wa{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(_e(!wa.isSetUp,"Cannot have two Touch backends at the same time."),wa.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(wa.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,r,n,s=!1){const i=B0?{capture:s,passive:!1}:s;this.listenerTypes.forEach(function(o){const a=Xo[o][r];a&&e.addEventListener(a,n,i)})}removeEventListener(e,r,n,s=!1){const i=B0?{capture:s,passive:!1}:s;this.listenerTypes.forEach(function(o){const a=Xo[o][r];a&&e.removeEventListener(a,n,i)})}connectDragSource(e,r){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(r,"start",n)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,r){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const s=i=>{if(!this.document||!n||!this.monitor.isDragging())return;let o;switch(i.type){case Xo.mouse.move:o={x:i.clientX,y:i.clientY};break;case Xo.touch.move:var a,l;o={x:((a=i.touches[0])===null||a===void 0?void 0:a.clientX)||0,y:((l=i.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,d=u&&r.contains(u);if(u===r||d)return this.handleMove(i,e)};return this.addEventListener(this.document.body,"move",s),this.targetNodes.set(e,r),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",s))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,r,n){this.getSourceClientOffset=s=>{const i=this.sourceNodes.get(s);return i&&c4(i)},this.handleTopMoveStartCapture=s=>{ef(s)&&(this.moveStartSourceIds=[])},this.handleMoveStart=s=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(s)},this.handleTopMoveStart=s=>{if(!ef(s))return;const i=eu(s);i&&(C_(s)&&(this.lastTargetTouchFallback=s.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=s=>{if(!ef(s))return;const i=s.type===Xo.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,s),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(s,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=s=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:i,dragOverTargetIds:o}=this,a=this.options.enableHoverOutsideTarget,l=eu(s,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&s4(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&n4(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),s.cancelable&&s.preventDefault();const d=(o||[]).map(w=>this.targetNodes.get(w)).filter(w=>!!w),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,d):this.document.elementsFromPoint(l.x,l.y),f=[];for(const w in h){if(!h.hasOwnProperty(w))continue;let g=h[w];for(g!=null&&f.push(g);g;)g=g.parentElement,g&&f.indexOf(g)===-1&&f.push(g)}const m=f.filter(w=>d.indexOf(w)>-1).map(w=>this._getDropTargetId(w)).filter(w=>!!w).filter((w,g,b)=>b.indexOf(w)===g);if(a)for(const w in this.targetNodes){const g=this.targetNodes.get(w);if(u&&g&&g.contains(u)&&m.indexOf(w)===-1){m.unshift(w);break}}m.reverse(),this.actions.hover(m,{clientOffset:l})},this._getDropTargetId=s=>{const i=this.targetNodes.keys();let o=i.next();for(;o.done===!1;){const a=o.value;if(s===this.targetNodes.get(a))return a;o=i.next()}},this.handleTopMoveEndCapture=s=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!a4(s)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}s.cancelable&&s.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=s=>{s.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new r4(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Cs.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Cs.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Cs.keyboard)}}const d4=function(e,r={},n={}){return new wa(e,r,n)},f4=p.createContext({isCustomDndProviderSet:!1}),h4=({children:t})=>c.jsx(c.Fragment,{children:t}),p4=({customDndBackend:t,customDndBackendOptions:e,children:r})=>{const[n,s]=p.useState(),[i,o]=p.useState(!1),[a,l]=p.useState(!1),{isCustomDndProviderSet:u}=p.useContext(f4);p.useEffect(()=>{l("ontouchstart"in window),o(!0),s(window)},[]);const d=u?h4:ZD;return i?n?c.jsx(d,Object.assign({backend:t||(a?d4:V3),context:n,options:t?e:void 0},{children:r})):c.jsx(c.Fragment,{children:r}):null};function m4({boardContainer:t}){const{boardWidth:e,chessPieces:r,id:n,snapToCursor:s,allowDragOutsideBoard:i}=Hn(),o=_3(f=>({item:f.getItem(),clientOffset:f.getClientOffset(),sourceClientOffset:f.getSourceClientOffset(),isDragging:f.isDragging()})),{isDragging:a,item:l,clientOffset:u,sourceClientOffset:d}=o,h=p.useCallback((f,m)=>{if(!f||!m)return{display:"none"};let{x:w,y:g}=s?f:m;const b=e/8/2;if(s&&(w-=b,g-=b),!i){const{left:v,top:x}=t,_=v-b,S=x-b,E=v+e-b,k=x+e-b;w=Math.max(_,Math.min(w,E)),g=Math.max(S,Math.min(g,k))}const y=`translate(${w}px, ${g}px)`;return{transform:y,WebkitTransform:y,touchAction:"none"}},[e,i,s,t]);return a&&l.id===n?c.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:c.jsx("div",Object.assign({style:h(u,d)},{children:typeof r[l.piece]=="function"?r[l.piece]({squareWidth:e/8,isDragging:!0}):c.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:c.jsx("g",{children:r[l.piece]})}))}))})):null}const k_=p.forwardRef((t,e)=>{const{customDndBackend:r,customDndBackendOptions:n,onBoardWidthChange:s}=t,i=EI(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[o,a]=p.useState(t.boardWidth),l=p.useRef(null),u=p.useRef(null),[d,h]=p.useState({left:0,top:0}),f=p.useMemo(()=>{var m;return(m=l.current)===null||m===void 0?void 0:m.getBoundingClientRect()},[l.current]);return p.useEffect(()=>{o&&(s==null||s(o))},[o]),p.useEffect(()=>{h({left:f!=null&&f.left?f==null?void 0:f.left:0,top:f!=null&&f.top?f==null?void 0:f.top:0})},[f]),p.useEffect(()=>{var m;if(t.boardWidth===void 0&&(!((m=l.current)===null||m===void 0)&&m.offsetWidth)){const w=new ResizeObserver(()=>{var g;a((g=l.current)===null||g===void 0?void 0:g.offsetWidth)});return w.observe(l.current),()=>{w.disconnect()}}},[l.current]),c.jsx(Z3,{children:c.jsxs("div",Object.assign({ref:u,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[c.jsx("div",{ref:l,style:{width:"100%"}}),c.jsx(p4,Object.assign({customDndBackend:r,customDndBackendOptions:n},{children:o&&c.jsxs(DI,Object.assign({boardWidth:o},i,{ref:e},{children:[c.jsx(m4,{boardContainer:d}),c.jsx(e4,{})]}))}))]}))})}),T_=()=>{const t=p.useRef(null),e=p.useCallback(()=>(t.current||(t.current=new(window.AudioContext||window.webkitAudioContext)),t.current),[]),r=p.useCallback((f,m,w="sine")=>{try{const g=e(),b=g.createOscillator(),y=g.createGain();b.connect(y),y.connect(g.destination),b.frequency.value=f,b.type=w,y.gain.setValueAtTime(.3,g.currentTime),y.gain.exponentialRampToValueAtTime(.01,g.currentTime+m),b.start(g.currentTime),b.stop(g.currentTime+m)}catch{console.log("Audio not supported")}},[e]),n=p.useCallback(()=>{r(440,.1,"sine")},[r]),s=p.useCallback(()=>{r(220,.15,"square"),setTimeout(()=>r(180,.1,"square"),50)},[r]),i=p.useCallback(()=>{r(880,.1,"sine"),setTimeout(()=>r(660,.1,"sine"),100),setTimeout(()=>r(880,.15,"sine"),200)},[r]),o=p.useCallback(()=>{[0,100,200,300,400].forEach((f,m)=>{setTimeout(()=>r(440+m*110,.15,"sine"),f)})},[r]),a=p.useCallback(()=>{r(330,.08,"sine"),setTimeout(()=>r(440,.08,"sine"),80)},[r]),l=p.useCallback(()=>{[0,80,160,240].forEach((f,m)=>{setTimeout(()=>r(330+m*110,.12,"sine"),f)})},[r]),u=p.useCallback(()=>{r(262,.15,"sine"),setTimeout(()=>r(330,.15,"sine"),150),setTimeout(()=>r(392,.2,"sine"),300)},[r]),d=p.useCallback(()=>{r(880,.08,"square")},[r]),h=p.useCallback(()=>{r(440,.15,"sine"),setTimeout(()=>r(440,.15,"sine"),200)},[r]);return{playMove:n,playCapture:s,playCheck:i,playCheckmate:o,playCastle:a,playPromotion:l,playGameStart:u,playTimeWarning:d,playDraw:h}};var tf="focusScope.autoFocusOnMount",rf="focusScope.autoFocusOnUnmount",z0={bubbles:!1,cancelable:!0},g4="FocusScope",Rm=p.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),u=Dr(s),d=Dr(i),h=p.useRef(null),f=Ue(e,g=>l(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let g=function(x){if(m.paused||!a)return;const _=x.target;a.contains(_)?h.current=_:Zn(h.current,{select:!0})},b=function(x){if(m.paused||!a)return;const _=x.relatedTarget;_!==null&&(a.contains(_)||Zn(h.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&Zn(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const v=new MutationObserver(y);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),v.disconnect()}}},[n,a,m.paused]),p.useEffect(()=>{if(a){H0.add(m);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(tf,z0);a.addEventListener(tf,u),a.dispatchEvent(y),y.defaultPrevented||(v4(_4(j_(a)),{select:!0}),document.activeElement===g&&Zn(a))}return()=>{a.removeEventListener(tf,u),setTimeout(()=>{const y=new CustomEvent(rf,z0);a.addEventListener(rf,d),a.dispatchEvent(y),y.defaultPrevented||Zn(g??document.body,{select:!0}),a.removeEventListener(rf,d),H0.remove(m)},0)}}},[a,u,d,m]);const w=p.useCallback(g=>{if(!r&&!n||m.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const v=g.currentTarget,[x,_]=y4(v);x&&_?!g.shiftKey&&y===_?(g.preventDefault(),r&&Zn(x,{select:!0})):g.shiftKey&&y===x&&(g.preventDefault(),r&&Zn(_,{select:!0})):y===v&&g.preventDefault()}},[r,n,m.paused]);return c.jsx(ke.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});Rm.displayName=g4;function v4(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Zn(n,{select:e}),document.activeElement!==r)return}function y4(t){const e=j_(t),r=W0(e,t),n=W0(e.reverse(),t);return[r,n]}function j_(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function W0(t,e){for(const r of t)if(!w4(r,{upTo:e}))return r}function w4(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function x4(t){return t instanceof HTMLInputElement&&"select"in t}function Zn(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&x4(t)&&e&&t.select()}}var H0=b4();function b4(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=V0(t,e),t.unshift(e)},remove(e){var r;t=V0(t,e),(r=t[0])==null||r.resume()}}}function V0(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function _4(t){return t.filter(e=>e.tagName!=="A")}var nf=0;function N_(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??q0()),document.body.insertAdjacentElement("beforeend",t[1]??q0()),nf++,()=>{nf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),nf--}},[])}function q0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var vc="right-scroll-bar-position",yc="width-before-scroll-bar",S4="with-scroll-bars-hidden",E4="--removed-body-scroll-bar-size";function sf(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function C4(t,e){var r=p.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var k4=typeof window<"u"?p.useLayoutEffect:p.useEffect,K0=new WeakMap;function T4(t,e){var r=C4(null,function(n){return t.forEach(function(s){return sf(s,n)})});return k4(function(){var n=K0.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(a){i.has(a)||sf(a,null)}),i.forEach(function(a){s.has(a)||sf(a,o)})}K0.set(r,t)},[t]),r}function j4(t){return t}function N4(t,e){e===void 0&&(e=j4);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function O4(t){t===void 0&&(t={});var e=N4(null);return e.options=gn({async:!0,ssr:!1},t),e}var O_=function(t){var e=t.sideCar,r=Lo(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,gn({},r))};O_.isSideCarExport=!0;function P4(t,e){return t.useMedium(e),O_}var P_=O4(),of=function(){},Hu=p.forwardRef(function(t,e){var r=p.useRef(null),n=p.useState({onScrollCapture:of,onWheelCapture:of,onTouchMoveCapture:of}),s=n[0],i=n[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,w=t.noIsolation,g=t.inert,b=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,x=t.gapMode,_=Lo(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,E=T4([r,e]),k=gn(gn({},_),s);return p.createElement(p.Fragment,null,d&&p.createElement(S,{sideCar:P_,removeScrollBar:u,shards:h,noRelative:m,noIsolation:w,inert:g,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:x}),o?p.cloneElement(p.Children.only(a),gn(gn({},k),{ref:E})):p.createElement(v,gn({},k,{className:l,ref:E}),a))});Hu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hu.classNames={fullWidth:yc,zeroRight:vc};var R4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function A4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=R4();return e&&t.setAttribute("nonce",e),t}function I4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function D4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var L4=function(){var t=0,e=null;return{add:function(r){t==0&&(e=A4())&&(I4(e,r),D4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},M4=function(){var t=L4();return function(e,r){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},R_=function(){var t=M4(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},$4={left:0,top:0,right:0,gap:0},af=function(t){return parseInt(t||"",10)||0},U4=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[af(r),af(n),af(s)]},F4=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return $4;var e=U4(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},B4=R_(),oo="data-scroll-locked",z4=function(t,e,r,n){var s=t.left,i=t.top,o=t.right,a=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(S4,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(oo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vc,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(yc,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(vc," .").concat(vc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(yc," .").concat(yc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(oo,`] {
    `).concat(E4,": ").concat(a,`px;
  }
`)},G0=function(){var t=parseInt(document.body.getAttribute(oo)||"0",10);return isFinite(t)?t:0},W4=function(){p.useEffect(function(){return document.body.setAttribute(oo,(G0()+1).toString()),function(){var t=G0()-1;t<=0?document.body.removeAttribute(oo):document.body.setAttribute(oo,t.toString())}},[])},H4=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;W4();var i=p.useMemo(function(){return F4(s)},[s]);return p.createElement(B4,{styles:z4(i,!e,s,r?"":"!important")})},Bh=!1;if(typeof window<"u")try{var Gl=Object.defineProperty({},"passive",{get:function(){return Bh=!0,!0}});window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Bh=!1}var Ri=Bh?{passive:!1}:!1,V4=function(t){return t.tagName==="TEXTAREA"},A_=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!V4(t)&&r[e]==="visible")},q4=function(t){return A_(t,"overflowY")},K4=function(t){return A_(t,"overflowX")},Q0=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=I_(t,n);if(s){var i=D_(t,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},G4=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Q4=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},I_=function(t,e){return t==="v"?q4(e):K4(e)},D_=function(t,e){return t==="v"?G4(e):Q4(e)},Y4=function(t,e){return t==="h"&&e==="rtl"?-1:1},J4=function(t,e,r,n,s){var i=Y4(t,window.getComputedStyle(e).direction),o=i*n,a=r.target,l=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=D_(t,a),w=m[0],g=m[1],b=m[2],y=g-b-i*w;(w||y)&&I_(t,a)&&(h+=y,f+=w);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Ql=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Y0=function(t){return[t.deltaX,t.deltaY]},J0=function(t){return t&&"current"in t?t.current:t},X4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Z4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},eL=0,Ai=[];function tL(t){var e=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(eL++)[0],i=p.useState(R_)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=BP([t.lockRef.current],(t.shards||[]).map(J0),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=Ql(g),v=r.current,x="deltaX"in g?g.deltaX:v[0]-y[0],_="deltaY"in g?g.deltaY:v[1]-y[1],S,E=g.target,k=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&E.type==="range")return!1;var j=Q0(k,E);if(!j)return!0;if(j?S=k:(S=k==="v"?"h":"v",j=Q0(k,E)),!j)return!1;if(!n.current&&"changedTouches"in g&&(x||_)&&(n.current=S),!S)return!0;var L=n.current||S;return J4(L,b,g,L==="h"?x:_,!0)},[]),l=p.useCallback(function(g){var b=g;if(!(!Ai.length||Ai[Ai.length-1]!==i)){var y="deltaY"in b?Y0(b):Ql(b),v=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&X4(S.delta,y)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var x=(o.current.shards||[]).map(J0).filter(Boolean).filter(function(S){return S.contains(b.target)}),_=x.length>0?a(b,x[0]):!o.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),u=p.useCallback(function(g,b,y,v){var x={name:g,delta:b,target:y,should:v,shadowParent:rL(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(_){return _!==x})},1)},[]),d=p.useCallback(function(g){r.current=Ql(g),n.current=void 0},[]),h=p.useCallback(function(g){u(g.type,Y0(g),g.target,a(g,t.lockRef.current))},[]),f=p.useCallback(function(g){u(g.type,Ql(g),g.target,a(g,t.lockRef.current))},[]);p.useEffect(function(){return Ai.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ri),document.addEventListener("touchmove",l,Ri),document.addEventListener("touchstart",d,Ri),function(){Ai=Ai.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Ri),document.removeEventListener("touchmove",l,Ri),document.removeEventListener("touchstart",d,Ri)}},[]);var m=t.removeScrollBar,w=t.inert;return p.createElement(p.Fragment,null,w?p.createElement(i,{styles:Z4(s)}):null,m?p.createElement(H4,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function rL(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const nL=P4(P_,tL);var Am=p.forwardRef(function(t,e){return p.createElement(Hu,gn({},t,{ref:e,sideCar:nL}))});Am.classNames=Hu.classNames;var sL=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ii=new WeakMap,Yl=new WeakMap,Jl={},lf=0,L_=function(t){return t&&(t.host||L_(t.parentNode))},iL=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=L_(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},oL=function(t,e,r,n){var s=iL(e,Array.isArray(t)?t:[t]);Jl[r]||(Jl[r]=new WeakMap);var i=Jl[r],o=[],a=new Set,l=new Set(s),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(n),w=m!==null&&m!=="false",g=(Ii.get(f)||0)+1,b=(i.get(f)||0)+1;Ii.set(f,g),i.set(f,b),o.push(f),g===1&&w&&Yl.set(f,!0),b===1&&f.setAttribute(r,"true"),w||f.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return d(e),a.clear(),lf++,function(){o.forEach(function(h){var f=Ii.get(h)-1,m=i.get(h)-1;Ii.set(h,f),i.set(h,m),f||(Yl.has(h)||h.removeAttribute(n),Yl.delete(h)),m||h.removeAttribute(r)}),lf--,lf||(Ii=new WeakMap,Ii=new WeakMap,Yl=new WeakMap,Jl={})}},M_=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=sL(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),oL(n,s,r,"aria-hidden")):function(){return null}},Vu="Dialog",[$_,U_]=zn(Vu),[aL,sn]=$_(Vu),F_=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),l=p.useRef(null),[u,d]=Co({prop:n,defaultProp:s??!1,onChange:i,caller:Vu});return c.jsx(aL,{scope:e,triggerRef:a,contentRef:l,contentId:Ss(),titleId:Ss(),descriptionId:Ss(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};F_.displayName=Vu;var B_="DialogTrigger",z_=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=sn(B_,r),i=Ue(e,s.triggerRef);return c.jsx(ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Lm(s.open),...n,ref:i,onClick:ue(t.onClick,s.onOpenToggle)})});z_.displayName=B_;var Im="DialogPortal",[lL,W_]=$_(Im,{forceMount:void 0}),H_=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,i=sn(Im,e);return c.jsx(lL,{scope:e,forceMount:r,children:p.Children.map(n,o=>c.jsx(wi,{present:r||i.open,children:c.jsx(bu,{asChild:!0,container:s,children:o})}))})};H_.displayName=Im;var tu="DialogOverlay",V_=p.forwardRef((t,e)=>{const r=W_(tu,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=sn(tu,t.__scopeDialog);return i.modal?c.jsx(wi,{present:n||i.open,children:c.jsx(uL,{...s,ref:e})}):null});V_.displayName=tu;var cL=Eo("DialogOverlay.RemoveScroll"),uL=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=sn(tu,r);return c.jsx(Am,{as:cL,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(ke.div,{"data-state":Lm(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),fi="DialogContent",q_=p.forwardRef((t,e)=>{const r=W_(fi,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=sn(fi,t.__scopeDialog);return c.jsx(wi,{present:n||i.open,children:i.modal?c.jsx(dL,{...s,ref:e}):c.jsx(fL,{...s,ref:e})})});q_.displayName=fi;var dL=p.forwardRef((t,e)=>{const r=sn(fi,t.__scopeDialog),n=p.useRef(null),s=Ue(e,r.contentRef,n);return p.useEffect(()=>{const i=n.current;if(i)return M_(i)},[]),c.jsx(K_,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ue(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ue(t.onFocusOutside,i=>i.preventDefault())})}),fL=p.forwardRef((t,e)=>{const r=sn(fi,t.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return c.jsx(K_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),K_=p.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=sn(fi,r),l=p.useRef(null),u=Ue(e,l);return N_(),c.jsxs(c.Fragment,{children:[c.jsx(Rm,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(al,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Lm(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(pL,{titleId:a.titleId}),c.jsx(gL,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Dm="DialogTitle",G_=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=sn(Dm,r);return c.jsx(ke.h2,{id:s.titleId,...n,ref:e})});G_.displayName=Dm;var Q_="DialogDescription",Y_=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=sn(Q_,r);return c.jsx(ke.p,{id:s.descriptionId,...n,ref:e})});Y_.displayName=Q_;var J_="DialogClose",X_=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=sn(J_,r);return c.jsx(ke.button,{type:"button",...n,ref:e,onClick:ue(t.onClick,()=>s.onOpenChange(!1))})});X_.displayName=J_;function Lm(t){return t?"open":"closed"}var Z_="DialogTitleWarning",[hL,eS]=t2(Z_,{contentName:fi,titleName:Dm,docsSlug:"dialog"}),pL=({titleId:t})=>{const e=eS(Z_),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},mL="DialogDescriptionWarning",gL=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eS(mL).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},tS=F_,vL=z_,rS=H_,Mm=V_,$m=q_,Um=G_,Fm=Y_,Bm=X_;const yL=tS,wL=rS,nS=p.forwardRef(({className:t,...e},r)=>c.jsx(Mm,{ref:r,className:Se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));nS.displayName=Mm.displayName;const sS=p.forwardRef(({className:t,children:e,...r},n)=>c.jsxs(wL,{children:[c.jsx(nS,{}),c.jsxs($m,{ref:n,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,c.jsxs(Bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[c.jsx(Cu,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sS.displayName=$m.displayName;const iS=({className:t,...e})=>c.jsx("div",{className:Se("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});iS.displayName="DialogHeader";const oS=p.forwardRef(({className:t,...e},r)=>c.jsx(Um,{ref:r,className:Se("text-lg font-semibold leading-none tracking-tight",t),...e}));oS.displayName=Um.displayName;const xL=p.forwardRef(({className:t,...e},r)=>c.jsx(Fm,{ref:r,className:Se("text-sm text-muted-foreground",t),...e}));xL.displayName=Fm.displayName;const bL=[{type:"q",name:"Queen",whiteSymbol:"",blackSymbol:""},{type:"r",name:"Rook",whiteSymbol:"",blackSymbol:""},{type:"b",name:"Bishop",whiteSymbol:"",blackSymbol:""},{type:"n",name:"Knight",whiteSymbol:"",blackSymbol:""}],aS=({isOpen:t,color:e,onSelect:r})=>c.jsx(yL,{open:t,children:c.jsxs(sS,{className:"sm:max-w-md",onPointerDownOutside:n=>n.preventDefault(),children:[c.jsx(iS,{children:c.jsx(oS,{className:"text-center text-xl",children:"Choose Promotion"})}),c.jsx("div",{className:"grid grid-cols-4 gap-3 py-4",children:bL.map(n=>c.jsx(be,{variant:"outline",className:"h-20 text-5xl hover:bg-primary hover:text-primary-foreground transition-all",onClick:()=>r(n.type),children:e==="white"?n.whiteSymbol:n.blackSymbol},n.type))}),c.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Select a piece to promote your pawn"})]})}),_L=()=>{const{gameId:t}=mP(),{profile:e}=bi(),{toast:r}=yi(),n=fl(),s=T_(),[i,o]=p.useState(new pn),[a,l]=p.useState(null),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,w]=p.useState(600),[g,b]=p.useState(600),[y,v]=p.useState(!0),[x,_]=p.useState(null),[S,E]=p.useState([]),[k,j]=p.useState(null),[L,M]=p.useState(null),[X,U]=p.useState(!1),V=(e==null?void 0:e.id)===(a==null?void 0:a.white_player_id),O=(e==null?void 0:e.id)===(a==null?void 0:a.black_player_id),W=V||O,$=i.turn()==="w"&&V||i.turn()==="b"&&O,q=V?"white":"black",T=(a==null?void 0:a.white_ready)&&(a==null?void 0:a.black_ready),C=T&&(a==null?void 0:a.result)==="in_progress";p.useEffect(()=>{if(t)return F(),K()},[t]),p.useEffect(()=>{if(T&&(a==null?void 0:a.result)==="in_progress"){const Q=setInterval(()=>{i.turn()==="w"?w(fe=>{const he=Math.max(0,fe-1);return he===30&&V&&!X&&(s.playTimeWarning(),U(!0)),he}):b(fe=>{const he=Math.max(0,fe-1);return he===30&&O&&!X&&(s.playTimeWarning(),U(!0)),he})},1e3);return()=>clearInterval(Q)}},[T,a==null?void 0:a.result,i,V,O,X,s]),p.useEffect(()=>{U(!1)},[i.turn()]);const F=async()=>{if(!t)return;const{data:Q}=await ee.from("games").select("*").eq("id",t).single();if(Q){l(Q);const fe=new pn;Q.fen&&fe.load(Q.fen),o(fe),w(Q.white_time_remaining||600),b(Q.black_time_remaining||600);const{data:he}=await ee.from("profiles").select("id, username, full_name, avatar_url, avatar_initials, rating").eq("id",Q.white_player_id).single(),{data:je}=await ee.from("profiles").select("id, username, full_name, avatar_url, avatar_initials, rating").eq("id",Q.black_player_id).single();he&&d(he),je&&f(je),s.playGameStart()}v(!1)},K=()=>{const Q=ee.channel(`game-${t}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"games",filter:`id=eq.${t}`},fe=>{const he=fe.new;l(he);const je=new pn;he.fen&&je.load(he.fen),o(je),he.pgn&&s.playMove()}).subscribe();return()=>{ee.removeChannel(Q)}},R=p.useCallback(Q=>{Q.san.includes("#")?s.playCheckmate():Q.san.includes("+")?s.playCheck():Q.captured?s.playCapture():Q.flags.includes("k")||Q.flags.includes("q")?s.playCastle():Q.san.includes("=")?s.playPromotion():s.playMove()},[s]),G=p.useCallback((Q,fe)=>{const he=i.get(Q);if(!he||he.type!=="p")return!1;const je=fe[1];return he.color==="w"&&je==="8"||he.color==="b"&&je==="1"},[i]),J=p.useCallback((Q,fe,he="q")=>{if(!a)return!1;try{const je=new pn(i.fen()),Je=je.move({from:Q,to:fe,promotion:he});if(!Je)return!1;o(je),_(null),E([]),M({from:Q,to:fe}),R(Je);const Zt=je.fen(),at=je.pgn();let Ie="in_progress";return je.isCheckmate()?Ie=je.turn()==="w"?"black_wins":"white_wins":je.isDraw()&&(Ie="draw"),ee.from("games").update({fen:Zt,pgn:at,result:Ie,white_time_remaining:m,black_time_remaining:g,...Ie!=="in_progress"?{ended_at:new Date().toISOString()}:{}}).eq("id",t).then(()=>{Ie!=="in_progress"&&(le(Ie),r({title:"Game Over!",description:`Result: ${Ie.replace(/_/g," ")}`}))}),!0}catch{return!1}},[i,a,t,m,g,R,r]),oe=p.useCallback(Q=>{k&&(J(k.from,k.to,Q),j(null))},[k,J]),de=p.useCallback(Q=>i.moves({square:Q,verbose:!0}).map(he=>he.to),[i]),D=p.useCallback(Q=>{if(!$||!C||k)return;if(x&&S.includes(Q)){if(G(x,Q)){j({from:x,to:Q});return}J(x,Q);return}const fe=i.get(Q),he=V?"w":"b";fe&&fe.color===he?(_(Q),E(de(Q))):(_(null),E([]))},[i,$,C,x,S,V,k,G,J,de]),ne=p.useCallback((Q,fe)=>!$||!C||k?!1:(_(fe),E(de(fe)),!0),[$,C,k,de]),we=p.useCallback(()=>{_(null),E([])},[]),ae=p.useCallback((Q,fe)=>{if(!$||!C||k)return!1;const he=Q,je=fe;return i.moves({square:he,verbose:!0}).some(at=>at.to===je)?G(he,je)?(j({from:he,to:je}),!0):J(he,je):!1},[i,$,C,k,G,J]),re=p.useMemo(()=>{const Q={};return L&&(Q[L.from]={backgroundColor:"rgba(155, 199, 0, 0.4)"},Q[L.to]={backgroundColor:"rgba(155, 199, 0, 0.5)"}),x&&(Q[x]={backgroundColor:"rgba(255, 255, 0, 0.4)"}),S.forEach(fe=>{const he=i.get(fe);Q[fe]={...Q[fe],background:he?"radial-gradient(circle, rgba(255, 0, 0, 0.4) 85%, transparent 85%)":"radial-gradient(circle, rgba(0, 128, 0, 0.4) 25%, transparent 25%)"}}),Q},[x,S,i,L]),le=async Q=>{if(!a)return;let fe=0,he=0,je=0,Je=0;const{data:Zt}=await ee.from("profiles").select("rating").eq("id",a.white_player_id).single(),{data:at}=await ee.from("profiles").select("rating").eq("id",a.black_player_id).single(),Ie=(Zt==null?void 0:Zt.rating)||1200,wt=(at==null?void 0:at.rating)||1200,on=1/(1+Math.pow(10,(wt-Ie)/400)),Sn=1-on,Vt=32;Q==="white_wins"?(fe=1,je=Math.round(Vt*(1-on)),Je=Math.round(Vt*(0-Sn))):Q==="black_wins"?(he=1,je=Math.round(Vt*(0-on)),Je=Math.round(Vt*(1-Sn))):Q==="draw"&&(fe=.5,he=.5,je=Math.round(Vt*(.5-on)),Je=Math.round(Vt*(.5-Sn)));const{data:Lr}=await ee.from("tournament_players").select("score").eq("tournament_id",a.tournament_id).eq("player_id",a.white_player_id).single(),{data:Mr}=await ee.from("tournament_players").select("score").eq("tournament_id",a.tournament_id).eq("player_id",a.black_player_id).single();Lr&&await ee.from("tournament_players").update({score:Number(Lr.score)+fe}).eq("tournament_id",a.tournament_id).eq("player_id",a.white_player_id),Mr&&await ee.from("tournament_players").update({score:Number(Mr.score)+he}).eq("tournament_id",a.tournament_id).eq("player_id",a.black_player_id);const{data:er}=await ee.from("profiles").select("games_played, games_won, games_lost, games_drawn, score").eq("id",a.white_player_id).single(),{data:lt}=await ee.from("profiles").select("games_played, games_won, games_lost, games_drawn, score").eq("id",a.black_player_id).single();if(er){const ur=Q==="white_wins"?1:0,tr=Q==="black_wins"?1:0,an=Q==="draw"?1:0;await ee.from("profiles").update({rating:Ie+je,games_played:(er.games_played||0)+1,games_won:(er.games_won||0)+ur,games_lost:(er.games_lost||0)+tr,games_drawn:(er.games_drawn||0)+an,score:Number(er.score||0)+fe}).eq("id",a.white_player_id)}else await ee.from("profiles").update({rating:Ie+je}).eq("id",a.white_player_id);if(lt){const ur=Q==="black_wins"?1:0,tr=Q==="white_wins"?1:0,an=Q==="draw"?1:0;await ee.from("profiles").update({rating:wt+Je,games_played:(lt.games_played||0)+1,games_won:(lt.games_won||0)+ur,games_lost:(lt.games_lost||0)+tr,games_drawn:(lt.games_drawn||0)+an,score:Number(lt.score||0)+he}).eq("id",a.black_player_id)}else await ee.from("profiles").update({rating:wt+Je}).eq("id",a.black_player_id)},Be=async()=>{if(!a||!W)return;const Q=V?{white_ready:!0}:{black_ready:!0},fe=V?a.black_ready:a.white_ready&&!0;await ee.from("games").update({...Q,...fe?{result:"in_progress",started_at:new Date().toISOString()}:{}}).eq("id",t),fe?(s.playGameStart(),r({title:"Game Started!",description:"White moves first. Good luck!"})):r({title:V?"Game Started!":"Ready!",description:"Waiting for opponent..."})},yt=async()=>{if(!a||!W||!T)return;const Q=V?"black_wins":"white_wins";await ee.from("games").update({result:Q,ended_at:new Date().toISOString()}).eq("id",t),await le(Q),r({title:"You resigned",description:"Better luck next time!"})},It=async()=>{!a||!W||!C||(await ee.from("games").update({draw_offered_by:e==null?void 0:e.id}).eq("id",t),r({title:"Draw offered",description:"Waiting for opponent's response..."}))},ht=async()=>{!a||!W||!C||(await ee.from("games").update({result:"draw",ended_at:new Date().toISOString(),draw_offered_by:null}).eq("id",t),await le("draw"),r({title:"Draw accepted",description:"Game ended in a draw!"}))},cr=async()=>{!a||!W||(await ee.from("games").update({draw_offered_by:null}).eq("id",t),r({title:"Draw declined",description:"The game continues!"}))},Ht=Q=>{const fe=Math.floor(Q/60),he=Q%60;return`${fe}:${he.toString().padStart(2,"0")}`};return y?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(sr,{className:"h-8 w-8 animate-spin text-primary"})}):a?c.jsxs("div",{className:"min-h-screen bg-background p-4",children:[c.jsx(aS,{isOpen:!!k,color:q,onSelect:oe}),c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsxs(Fe,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-muted rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(en,{avatarUrl:h==null?void 0:h.avatar_url,initials:h==null?void 0:h.avatar_initials,name:h==null?void 0:h.full_name,size:"sm"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:(h==null?void 0:h.username)||"Black"}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Black  ",(h==null?void 0:h.rating)||1200]})]})]}),c.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg transition-colors ${i.turn()==="b"?g<=30?"bg-destructive text-destructive-foreground animate-pulse":"bg-primary text-primary-foreground":"bg-muted"}`,children:[c.jsx(oh,{className:"h-4 w-4"}),c.jsx("span",{className:"font-mono font-bold",children:Ht(g)})]})]}),c.jsx("div",{className:"max-w-[min(100%,400px)] mx-auto",children:c.jsx(k_,{position:i.fen(),onPieceDrop:ae,onSquareClick:D,onPieceDragBegin:ne,onPieceDragEnd:we,boardOrientation:O?"black":"white",arePiecesDraggable:W&&$&&C&&!k,customSquareStyles:re})}),c.jsxs("div",{className:"flex items-center justify-between mt-4 p-3 bg-muted rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(en,{avatarUrl:u==null?void 0:u.avatar_url,initials:u==null?void 0:u.avatar_initials,name:u==null?void 0:u.full_name,size:"sm"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:(u==null?void 0:u.username)||"White"}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["White  ",(u==null?void 0:u.rating)||1200]})]})]}),c.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg transition-colors ${i.turn()==="w"?m<=30?"bg-destructive text-destructive-foreground animate-pulse":"bg-primary text-primary-foreground":"bg-muted"}`,children:[c.jsx(oh,{className:"h-4 w-4"}),c.jsx("span",{className:"font-mono font-bold",children:Ht(m)})]})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Fe,{children:[c.jsx(Bt,{children:c.jsx(zt,{children:"Game Status"})}),c.jsxs(We,{className:"space-y-4",children:[c.jsx("div",{className:"text-center py-4 bg-muted rounded-lg",children:T?a.result==="in_progress"?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-bold text-lg",children:i.turn()==="w"?"White's Turn":"Black's Turn"}),$&&c.jsx("p",{className:"text-sm text-primary",children:"Your move!"})]}):c.jsx("p",{className:"font-bold text-lg capitalize",children:a.result.replace(/_/g," ")}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-bold text-lg",children:"Waiting to Start"}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsx("p",{className:`text-sm ${a.white_ready?"text-green-500":"text-muted-foreground"}`,children:a.white_ready?" White is ready":" White not ready"}),c.jsx("p",{className:`text-sm ${a.black_ready?"text-green-500":"text-muted-foreground"}`,children:a.black_ready?" Black is ready":" Black not ready"})]})]})}),i.isCheck()&&C&&c.jsx("div",{className:"p-3 bg-destructive/10 text-destructive rounded-lg text-center font-bold animate-pulse",children:"CHECK!"}),W&&!T&&a.result==="pending"&&c.jsxs(c.Fragment,{children:[V&&!a.white_ready&&c.jsxs(be,{className:"w-full bg-green-600 hover:bg-green-700",onClick:Be,children:[c.jsx(rm,{className:"h-4 w-4 mr-2"}),"Start Game"]}),V&&a.white_ready&&!a.black_ready&&c.jsxs("div",{className:"p-3 bg-primary/10 rounded-lg text-center",children:[c.jsx(sr,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),c.jsx("p",{className:"text-sm",children:"Waiting for Black to accept..."})]}),O&&!a.black_ready&&a.white_ready&&c.jsxs(be,{className:"w-full bg-green-600 hover:bg-green-700",onClick:Be,children:[c.jsx(X2,{className:"h-4 w-4 mr-2"}),"Accept & Start"]}),O&&!a.white_ready&&c.jsx("div",{className:"p-3 bg-muted rounded-lg text-center",children:c.jsx("p",{className:"text-sm text-muted-foreground",children:"Waiting for White to start the game..."})})]}),W&&C&&a.draw_offered_by&&a.draw_offered_by!==(e==null?void 0:e.id)&&c.jsxs("div",{className:"p-3 bg-amber-500/20 border border-amber-500/30 rounded-lg space-y-2",children:[c.jsx("p",{className:"text-sm font-medium text-center",children:"Opponent offers a draw"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(be,{variant:"outline",className:"flex-1",onClick:ht,children:[c.jsx(hv,{className:"h-4 w-4 mr-2"}),"Accept"]}),c.jsxs(be,{variant:"outline",className:"flex-1",onClick:cr,children:[c.jsx(Cu,{className:"h-4 w-4 mr-2"}),"Decline"]})]})]}),W&&C&&a.draw_offered_by===(e==null?void 0:e.id)&&c.jsxs("div",{className:"p-3 bg-muted rounded-lg text-center",children:[c.jsx(sr,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Draw offer pending..."})]}),W&&C&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(be,{variant:"secondary",className:"flex-1",onClick:It,disabled:!!a.draw_offered_by,children:[c.jsx(hv,{className:"h-4 w-4 mr-2"}),"Offer Draw"]}),c.jsxs(be,{variant:"destructive",className:"flex-1",onClick:yt,children:[c.jsx(a1,{className:"h-4 w-4 mr-2"}),"Resign"]})]}),c.jsxs(be,{variant:"outline",className:"w-full",onClick:()=>n("/standings"),children:[c.jsx(Wc,{className:"h-4 w-4 mr-2"}),"Back to Standings"]})]})]}),c.jsxs(Fe,{children:[c.jsx(Bt,{children:c.jsx(zt,{children:"Moves"})}),c.jsx(We,{children:c.jsx("div",{className:"text-sm font-mono bg-muted p-3 rounded-lg max-h-48 overflow-y-auto",children:i.history().length>0?c.jsx("div",{className:"space-y-1",children:i.history().reduce((Q,fe,he)=>(he%2===0?Q.push([fe]):Q[Q.length-1].push(fe),Q),[]).map((Q,fe)=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-muted-foreground w-6",children:[fe+1,"."]}),c.jsx("span",{className:"w-16",children:Q[0]}),c.jsx("span",{className:"w-16",children:Q[1]||""})]},fe))}):c.jsx("span",{className:"text-muted-foreground",children:"No moves yet"})})})]})]})]})})]}):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx("p",{className:"text-muted-foreground",children:"Game not found"})})};function X0(t,[e,r]){return Math.min(r,Math.max(e,t))}function SL(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var EL=[" ","Enter","ArrowUp","ArrowDown"],CL=[" ","Enter"],hi="Select",[qu,Ku,kL]=Jp(hi),[Mo,NM]=zn(hi,[kL,Nu]),Gu=Nu(),[TL,Is]=Mo(hi),[jL,NL]=Mo(hi),lS=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:w}=t,g=Gu(e),[b,y]=p.useState(null),[v,x]=p.useState(null),[_,S]=p.useState(!1),E=Em(u),[k,j]=Co({prop:n,defaultProp:s??!1,onChange:i,caller:hi}),[L,M]=Co({prop:o,defaultProp:a,onChange:l,caller:hi}),X=p.useRef(null),U=b?w||!!b.closest("form"):!0,[V,O]=p.useState(new Set),W=Array.from(V).map($=>$.props.value).join(";");return c.jsx(YN,{...g,children:c.jsxs(TL,{required:m,scope:e,trigger:b,onTriggerChange:y,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:Ss(),value:L,onValueChange:M,open:k,onOpenChange:j,dir:E,triggerPointerDownPosRef:X,disabled:f,children:[c.jsx(qu.Provider,{scope:e,children:c.jsx(jL,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback($=>{O(q=>new Set(q).add($))},[]),onNativeOptionRemove:p.useCallback($=>{O(q=>{const T=new Set(q);return T.delete($),T})},[]),children:r})}),U?c.jsxs(RS,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:L,onChange:$=>M($.target.value),disabled:f,form:w,children:[L===void 0?c.jsx("option",{value:""}):null,Array.from(V)]},W):null]})})};lS.displayName=hi;var cS="SelectTrigger",uS=p.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=Gu(r),o=Is(cS,r),a=o.disabled||n,l=Ue(e,o.onTriggerChange),u=Ku(r),d=p.useRef("touch"),[h,f,m]=IS(g=>{const b=u().filter(x=>!x.disabled),y=b.find(x=>x.value===o.value),v=DS(b,g,y);v!==void 0&&o.onValueChange(v.value)}),w=g=>{a||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return c.jsx(z1,{asChild:!0,...i,children:c.jsx(ke.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":AS(o.value)?"":void 0,...s,ref:l,onClick:ue(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&w(g)}),onPointerDown:ue(s.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(w(g),g.preventDefault())}),onKeyDown:ue(s.onKeyDown,g=>{const b=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(b&&g.key===" ")&&EL.includes(g.key)&&(w(),g.preventDefault())})})})});uS.displayName=cS;var dS="SelectValue",fS=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...a}=t,l=Is(dS,r),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=Ue(e,l.onValueNodeChange);return At(()=>{u(d)},[u,d]),c.jsx(ke.span,{...a,ref:h,style:{pointerEvents:"none"},children:AS(l.value)?c.jsx(c.Fragment,{children:o}):i})});fS.displayName=dS;var OL="SelectIcon",hS=p.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return c.jsx(ke.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});hS.displayName=OL;var PL="SelectPortal",pS=t=>c.jsx(bu,{asChild:!0,...t});pS.displayName=PL;var pi="SelectContent",mS=p.forwardRef((t,e)=>{const r=Is(pi,t.__scopeSelect),[n,s]=p.useState();if(At(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?vi.createPortal(c.jsx(gS,{scope:t.__scopeSelect,children:c.jsx(qu.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),i):null}return c.jsx(vS,{...t,ref:e})});mS.displayName=pi;var Br=10,[gS,Ds]=Mo(pi),RL="SelectContentImpl",AL=Eo("SelectContent.RemoveScroll"),vS=p.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:w,hideWhenDetached:g,avoidCollisions:b,...y}=t,v=Is(pi,r),[x,_]=p.useState(null),[S,E]=p.useState(null),k=Ue(e,D=>_(D)),[j,L]=p.useState(null),[M,X]=p.useState(null),U=Ku(r),[V,O]=p.useState(!1),W=p.useRef(!1);p.useEffect(()=>{if(x)return M_(x)},[x]),N_();const $=p.useCallback(D=>{const[ne,...we]=U().map(le=>le.ref.current),[ae]=we.slice(-1),re=document.activeElement;for(const le of D)if(le===re||(le==null||le.scrollIntoView({block:"nearest"}),le===ne&&S&&(S.scrollTop=0),le===ae&&S&&(S.scrollTop=S.scrollHeight),le==null||le.focus(),document.activeElement!==re))return},[U,S]),q=p.useCallback(()=>$([j,x]),[$,j,x]);p.useEffect(()=>{V&&q()},[V,q]);const{onOpenChange:T,triggerPointerDownPosRef:C}=v;p.useEffect(()=>{if(x){let D={x:0,y:0};const ne=ae=>{var re,le;D={x:Math.abs(Math.round(ae.pageX)-(((re=C.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(ae.pageY)-(((le=C.current)==null?void 0:le.y)??0))}},we=ae=>{D.x<=10&&D.y<=10?ae.preventDefault():x.contains(ae.target)||T(!1),document.removeEventListener("pointermove",ne),C.current=null};return C.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",we,{capture:!0})}}},[x,T,C]),p.useEffect(()=>{const D=()=>T(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[T]);const[F,K]=IS(D=>{const ne=U().filter(re=>!re.disabled),we=ne.find(re=>re.ref.current===document.activeElement),ae=DS(ne,D,we);ae&&setTimeout(()=>ae.ref.current.focus())}),R=p.useCallback((D,ne,we)=>{const ae=!W.current&&!we;(v.value!==void 0&&v.value===ne||ae)&&(L(D),ae&&(W.current=!0))},[v.value]),G=p.useCallback(()=>x==null?void 0:x.focus(),[x]),J=p.useCallback((D,ne,we)=>{const ae=!W.current&&!we;(v.value!==void 0&&v.value===ne||ae)&&X(D)},[v.value]),oe=n==="popper"?zh:yS,de=oe===zh?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:w,hideWhenDetached:g,avoidCollisions:b}:{};return c.jsx(gS,{scope:r,content:x,viewport:S,onViewportChange:E,itemRefCallback:R,selectedItem:j,onItemLeave:G,itemTextRefCallback:J,focusSelectedItem:q,selectedItemText:M,position:n,isPositioned:V,searchRef:F,children:c.jsx(Am,{as:AL,allowPinchZoom:!0,children:c.jsx(Rm,{asChild:!0,trapped:v.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:ue(s,D=>{var ne;(ne=v.trigger)==null||ne.focus({preventScroll:!0}),D.preventDefault()}),children:c.jsx(al,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:c.jsx(oe,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:D=>D.preventDefault(),...y,...de,onPlaced:()=>O(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ue(y.onKeyDown,D=>{const ne=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!ne&&D.key.length===1&&K(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let ae=U().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(D.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const re=D.target,le=ae.indexOf(re);ae=ae.slice(le+1)}setTimeout(()=>$(ae)),D.preventDefault()}})})})})})})});vS.displayName=RL;var IL="SelectItemAlignedPosition",yS=p.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Is(pi,r),o=Ds(pi,r),[a,l]=p.useState(null),[u,d]=p.useState(null),h=Ue(e,k=>d(k)),f=Ku(r),m=p.useRef(!1),w=p.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:y,focusSelectedItem:v}=o,x=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&g&&b&&y){const k=i.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),M=y.getBoundingClientRect();if(i.dir!=="rtl"){const re=M.left-j.left,le=L.left-re,Be=k.left-le,yt=k.width+Be,It=Math.max(yt,j.width),ht=window.innerWidth-Br,cr=X0(le,[Br,Math.max(Br,ht-It)]);a.style.minWidth=yt+"px",a.style.left=cr+"px"}else{const re=j.right-M.right,le=window.innerWidth-L.right-re,Be=window.innerWidth-k.right-le,yt=k.width+Be,It=Math.max(yt,j.width),ht=window.innerWidth-Br,cr=X0(le,[Br,Math.max(Br,ht-It)]);a.style.minWidth=yt+"px",a.style.right=cr+"px"}const X=f(),U=window.innerHeight-Br*2,V=g.scrollHeight,O=window.getComputedStyle(u),W=parseInt(O.borderTopWidth,10),$=parseInt(O.paddingTop,10),q=parseInt(O.borderBottomWidth,10),T=parseInt(O.paddingBottom,10),C=W+$+V+T+q,F=Math.min(b.offsetHeight*5,C),K=window.getComputedStyle(g),R=parseInt(K.paddingTop,10),G=parseInt(K.paddingBottom,10),J=k.top+k.height/2-Br,oe=U-J,de=b.offsetHeight/2,D=b.offsetTop+de,ne=W+$+D,we=C-ne;if(ne<=J){const re=X.length>0&&b===X[X.length-1].ref.current;a.style.bottom="0px";const le=u.clientHeight-g.offsetTop-g.offsetHeight,Be=Math.max(oe,de+(re?G:0)+le+q),yt=ne+Be;a.style.height=yt+"px"}else{const re=X.length>0&&b===X[0].ref.current;a.style.top="0px";const Be=Math.max(J,W+g.offsetTop+(re?R:0)+de)+we;a.style.height=Be+"px",g.scrollTop=ne-J+g.offsetTop}a.style.margin=`${Br}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=U+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,a,u,g,b,y,i.dir,n]);At(()=>x(),[x]);const[_,S]=p.useState();At(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const E=p.useCallback(k=>{k&&w.current===!0&&(x(),v==null||v(),w.current=!1)},[x,v]);return c.jsx(LL,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:E,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:c.jsx(ke.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});yS.displayName=IL;var DL="SelectPopperPosition",zh=p.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Br,...i}=t,o=Gu(r);return c.jsx(W1,{...o,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});zh.displayName=DL;var[LL,zm]=Mo(pi,{}),Wh="SelectViewport",wS=p.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=Ds(Wh,r),o=zm(Wh,r),a=Ue(e,i.onViewportChange),l=p.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),c.jsx(qu.Slot,{scope:r,children:c.jsx(ke.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ue(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(l.current-d.scrollTop);if(m>0){const w=window.innerHeight-Br*2,g=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),y=Math.max(g,b);if(y<w){const v=y+m,x=Math.min(w,v),_=v-x;h.style.height=x+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});wS.displayName=Wh;var xS="SelectGroup",[ML,$L]=Mo(xS),UL=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Ss();return c.jsx(ML,{scope:r,id:s,children:c.jsx(ke.div,{role:"group","aria-labelledby":s,...n,ref:e})})});UL.displayName=xS;var bS="SelectLabel",_S=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=$L(bS,r);return c.jsx(ke.div,{id:s.id,...n,ref:e})});_S.displayName=bS;var ru="SelectItem",[FL,SS]=Mo(ru),ES=p.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=t,a=Is(ru,r),l=Ds(ru,r),u=a.value===n,[d,h]=p.useState(i??""),[f,m]=p.useState(!1),w=Ue(e,v=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,v,n,s)}),g=Ss(),b=p.useRef("touch"),y=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(FL,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:p.useCallback(v=>{h(x=>x||((v==null?void 0:v.textContent)??"").trim())},[]),children:c.jsx(qu.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:c.jsx(ke.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:ue(o.onFocus,()=>m(!0)),onBlur:ue(o.onBlur,()=>m(!1)),onClick:ue(o.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:ue(o.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:ue(o.onPointerDown,v=>{b.current=v.pointerType}),onPointerMove:ue(o.onPointerMove,v=>{var x;b.current=v.pointerType,s?(x=l.onItemLeave)==null||x.call(l):b.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(o.onPointerLeave,v=>{var x;v.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:ue(o.onKeyDown,v=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&v.key===" "||(CL.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});ES.displayName=ru;var ia="SelectItemText",CS=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,o=Is(ia,r),a=Ds(ia,r),l=SS(ia,r),u=NL(ia,r),[d,h]=p.useState(null),f=Ue(e,y=>h(y),l.onItemTextChange,y=>{var v;return(v=a.itemTextRefCallback)==null?void 0:v.call(a,y,l.value,l.disabled)}),m=d==null?void 0:d.textContent,w=p.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return At(()=>(g(w),()=>b(w)),[g,b,w]),c.jsxs(c.Fragment,{children:[c.jsx(ke.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?vi.createPortal(i.children,o.valueNode):null]})});CS.displayName=ia;var kS="SelectItemIndicator",TS=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return SS(kS,r).isSelected?c.jsx(ke.span,{"aria-hidden":!0,...n,ref:e}):null});TS.displayName=kS;var Hh="SelectScrollUpButton",jS=p.forwardRef((t,e)=>{const r=Ds(Hh,t.__scopeSelect),n=zm(Hh,t.__scopeSelect),[s,i]=p.useState(!1),o=Ue(e,n.onScrollButtonChange);return At(()=>{if(r.viewport&&r.isPositioned){let a=function(){const u=l.scrollTop>0;i(u)};const l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),s?c.jsx(OS,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});jS.displayName=Hh;var Vh="SelectScrollDownButton",NS=p.forwardRef((t,e)=>{const r=Ds(Vh,t.__scopeSelect),n=zm(Vh,t.__scopeSelect),[s,i]=p.useState(!1),o=Ue(e,n.onScrollButtonChange);return At(()=>{if(r.viewport&&r.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),s?c.jsx(OS,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});NS.displayName=Vh;var OS=p.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=Ds("SelectScrollButton",r),o=p.useRef(null),a=Ku(r),l=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),At(()=>{var d;const u=a().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),c.jsx(ke.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ue(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ue(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ue(s.onPointerLeave,()=>{l()})})}),BL="SelectSeparator",PS=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return c.jsx(ke.div,{"aria-hidden":!0,...n,ref:e})});PS.displayName=BL;var qh="SelectArrow",zL=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Gu(r),i=Is(qh,r),o=Ds(qh,r);return i.open&&o.position==="popper"?c.jsx(H1,{...s,...n,ref:e}):null});zL.displayName=qh;var WL="SelectBubbleInput",RS=p.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=p.useRef(null),i=Ue(n,s),o=SL(e);return p.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),c.jsx(ke.select,{...r,style:{...Lx,...r.style},ref:i,defaultValue:e})});RS.displayName=WL;function AS(t){return t===""||t===void 0}function IS(t){const e=Dr(t),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(o=>{const a=r.current+o;e(a),function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function DS(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=HL(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function HL(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var VL=lS,LS=uS,qL=fS,KL=hS,GL=pS,MS=mS,QL=wS,$S=_S,US=ES,YL=CS,JL=TS,FS=jS,BS=NS,zS=PS;const Kh=VL,Gh=qL,nu=p.forwardRef(({className:t,children:e,...r},n)=>c.jsxs(LS,{ref:n,className:Se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,c.jsx(KL,{asChild:!0,children:c.jsx(o1,{className:"h-4 w-4 opacity-50"})})]}));nu.displayName=LS.displayName;const WS=p.forwardRef(({className:t,...e},r)=>c.jsx(FS,{ref:r,className:Se("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(J2,{className:"h-4 w-4"})}));WS.displayName=FS.displayName;const HS=p.forwardRef(({className:t,...e},r)=>c.jsx(BS,{ref:r,className:Se("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(o1,{className:"h-4 w-4"})}));HS.displayName=BS.displayName;const su=p.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>c.jsx(GL,{children:c.jsxs(MS,{ref:s,className:Se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[c.jsx(WS,{}),c.jsx(QL,{className:Se("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(HS,{})]})}));su.displayName=MS.displayName;const XL=p.forwardRef(({className:t,...e},r)=>c.jsx($S,{ref:r,className:Se("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));XL.displayName=$S.displayName;const Ot=p.forwardRef(({className:t,children:e,...r},n)=>c.jsxs(US,{ref:n,className:Se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(JL,{children:c.jsx(i1,{className:"h-4 w-4"})})}),c.jsx(YL,{children:e})]}));Ot.displayName=US.displayName;const ZL=p.forwardRef(({className:t,...e},r)=>c.jsx(zS,{ref:r,className:Se("-mx-1 my-1 h-px bg-muted",t),...e}));ZL.displayName=zS.displayName;const Z0=["Ooh, spicy move! ","I've seen better... in my dreams!","Bold strategy, Cotton!","That piece had a family!","Interesting... very interesting...","My grandma plays faster than this!","Chess isn't a game, it's a lifestyle! ","Someone's been watching too much Queen's Gambit!","The board is getting heated!","Plot twist incoming!"],ey=["CHECK! Your king is sweating! ","Knock knock! Who's there? CHECK!","Your king just felt that one!","Oof! That's gonna leave a mark!","The king is in trouble! DRAMA!"],ty=["RIP to that piece! ","Yoink! Mine now!","That piece just got yeeted!","Nom nom nom! ","And just like that... gone!","Savage! No mercy!"],ry=["CHECKMATE! GG EZ! ","That's all she wrote, folks!","FATALITY! ","And the crowd goes WILD!","Pack it up, we're done here!"],ny=["A draw? How... diplomatic! ","Nobody wins! Everyone gets a participation trophy!","It's a tie! How anti-climactic!"],eM=({lastMove:t,isCheck:e,isCheckmate:r,isDraw:n,moveCount:s})=>{const[i,o]=p.useState("Let the games begin! "),[a,l]=p.useState(!1),[u,d]=p.useState(!1);p.useEffect(()=>{if(s===0){o("Let the games begin! ");return}let f="";r?f=ry[Math.floor(Math.random()*ry.length)]:n?f=ny[Math.floor(Math.random()*ny.length)]:e?f=ey[Math.floor(Math.random()*ey.length)]:t&&t.includes("x")?f=ty[Math.floor(Math.random()*ty.length)]:s>0&&(f=Z0[Math.floor(Math.random()*Z0.length)]),f&&o(f)},[t,e,r,n,s]),p.useEffect(()=>{s>0&&s%5===0&&!r&&!n&&h()},[s]);const h=async()=>{if(!u){d(!0);try{const{data:f,error:m}=await ee.functions.invoke("chess-commentary",{body:{moveCount:s,lastMove:t}});f!=null&&f.commentary&&o(f.commentary)}catch{console.log("Commentary fetch failed, using local")}finally{d(!1)}}};return c.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 rounded-lg p-4 border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(rT,{className:"h-5 w-5 text-primary"}),c.jsx("span",{className:"font-semibold text-sm",children:"AI Commentator"})]}),c.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>l(!a),children:a?c.jsx(hT,{className:"h-4 w-4"}):c.jsx(fT,{className:"h-4 w-4"})})]}),c.jsx("p",{className:"text-sm font-medium animate-in fade-in slide-in-from-bottom-2 duration-300",children:i})]})},tM=()=>{const{toast:t}=yi(),e=T_(),[r,n]=p.useState(new pn),[s,i]=p.useState("intermediate"),[o,a]=p.useState("white"),[l,u]=p.useState(!1),[d,h]=p.useState("playing"),[f,m]=p.useState([]),[w,g]=p.useState(null),[b,y]=p.useState([]),[v,x]=p.useState(null),[_,S]=p.useState(null),E=p.useCallback(R=>{R.san.includes("#")?e.playCheckmate():R.san.includes("+")?e.playCheck():R.captured?e.playCapture():R.flags.includes("k")||R.flags.includes("q")?e.playCastle():R.san.includes("=")?e.playPromotion():e.playMove()},[e]),k=p.useCallback(R=>{if(R.isCheckmate()){const G=R.turn()==="w"?"black":"white";return o==="white"&&G==="white"||o==="black"&&G==="black"?(h("won"),t({title:" Congratulations!",description:"You won the game!"})):(h("lost"),t({title:"Game Over",description:"The bot won this time. Try again!"})),!0}return R.isDraw()?(h("draw"),t({title:"Draw!",description:"The game ended in a draw."}),!0):!1},[o,t]),j=p.useCallback(async R=>{if(!(k(R)||R.turn()==="w"&&o==="white"||R.turn()==="b"&&o==="black")){u(!0);try{const{data:J,error:oe}=await ee.functions.invoke("chess-bot",{body:{fen:R.fen(),difficulty:s}});if(oe){console.error("Bot error:",oe);const D=R.moves({verbose:!0});if(D.length>0){const ne=D[Math.floor(Math.random()*D.length)],we=new pn(R.fen()),ae=we.move(ne);ae&&(n(we),m(re=>[...re,ae.san]),S(ae.san),E(ae),k(we))}u(!1);return}const de=J==null?void 0:J.move;if(de){const D=new pn(R.fen());try{const ne=D.move({from:de.slice(0,2),to:de.slice(2,4),promotion:de[4]||"q"});if(ne)n(D),m(we=>[...we,ne.san]),S(ne.san),E(ne),k(D);else throw new Error("Invalid move")}catch{const ne=R.moves({verbose:!0});if(ne.length>0){const we=ne[Math.floor(Math.random()*ne.length)];D.load(R.fen());const ae=D.move(we);ae&&(n(D),m(re=>[...re,ae.san]),S(ae.san),E(ae),k(D))}}}}catch(J){console.error("Bot move error:",J)}finally{u(!1)}}},[s,o,k,E]);p.useEffect(()=>{o==="black"&&r.history().length===0&&d==="playing"&&(e.playGameStart(),j(r))},[o,r,d,j,e]);const L=p.useCallback((R,G)=>{const J=r.get(R);if(!J||J.type!=="p")return!1;const oe=G[1];return J.color==="w"&&oe==="8"||J.color==="b"&&oe==="1"},[r]),M=p.useCallback((R,G,J="q")=>{try{const oe=new pn(r.fen()),de=oe.move({from:R,to:G,promotion:J});return de?(n(oe),m(D=>[...D,de.san]),S(de.san),g(null),y([]),E(de),k(oe)||setTimeout(()=>j(oe),500),!0):!1}catch{return!1}},[r,k,j,E]),X=p.useCallback(R=>{v&&(M(v.from,v.to,R),x(null))},[v,M]),U=p.useCallback(R=>r.moves({square:R,verbose:!0}).map(J=>J.to),[r]),V=p.useCallback(R=>{if(d!=="playing"||l||v||!(r.turn()==="w"&&o==="white"||r.turn()==="b"&&o==="black"))return;if(w&&b.includes(R)){if(L(w,R)){x({from:w,to:R});return}M(w,R);return}const J=r.get(R);J&&(J.color==="w"&&o==="white"||J.color==="b"&&o==="black")?(g(R),y(U(R))):(g(null),y([]))},[r,o,d,l,w,b,v,L,M,U]),O=p.useCallback((R,G)=>d!=="playing"||l||v||!(r.turn()==="w"&&o==="white"||r.turn()==="b"&&o==="black")?!1:(g(G),y(U(G)),!0),[r,o,d,l,v,U]),W=p.useCallback(()=>{g(null),y([])},[]),$=p.useCallback((R,G)=>{if(d!=="playing"||l||v||!(r.turn()==="w"&&o==="white"||r.turn()==="b"&&o==="black"))return!1;const oe=R,de=G;return r.moves({square:oe,verbose:!0}).some(we=>we.to===de)?L(oe,de)?(x({from:oe,to:de}),!0):M(oe,de):!1},[r,o,d,l,v,L,M]),q=p.useMemo(()=>{const R={};return w&&(R[w]={backgroundColor:"rgba(255, 255, 0, 0.4)"}),b.forEach(G=>{const J=r.get(G);R[G]={background:J?"radial-gradient(circle, rgba(255, 0, 0, 0.4) 85%, transparent 85%)":"radial-gradient(circle, rgba(0, 128, 0, 0.4) 25%, transparent 25%)"}}),R},[w,b,r]),T=()=>{n(new pn),h("playing"),m([]),g(null),y([]),S(null),x(null),e.playGameStart(),o==="black"&&setTimeout(()=>{const R=new pn;j(R)},500)},C=()=>{h("lost"),t({title:"You resigned",description:"Better luck next time!"})},F=()=>{a(o==="white"?"black":"white"),T()},K={beginner:"text-green-500",intermediate:"text-yellow-500",advanced:"text-orange-500",master:"text-red-500"};return c.jsxs("div",{className:"min-h-screen bg-background p-4",children:[c.jsx(aS,{isOpen:!!v,color:o,onSelect:X}),c.jsxs("div",{className:"max-w-5xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("h1",{className:"text-3xl font-display font-bold text-foreground flex items-center justify-center gap-3",children:[c.jsx(ih,{className:"h-8 w-8 text-primary"}),"Practice vs AI Bot",c.jsx(aT,{className:"h-6 w-6 text-accent"})]}),c.jsx("p",{className:"text-muted-foreground mt-2",children:"Sharpen your skills against our AI opponent"})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsxs(Fe,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-muted rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center",children:c.jsx(ih,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:"AI Bot"}),c.jsx("p",{className:`text-xs capitalize ${K[s]}`,children:s})]})]}),l&&c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(sr,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"text-sm",children:"Thinking..."})]})]}),c.jsxs("div",{className:"relative max-w-[min(100%,400px)] mx-auto",children:[c.jsx(k_,{position:r.fen(),onPieceDrop:$,onSquareClick:V,onPieceDragBegin:O,onPieceDragEnd:W,boardOrientation:o,arePiecesDraggable:d==="playing"&&!l&&!v,customSquareStyles:q}),d!=="playing"&&c.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center",children:c.jsxs("div",{className:"text-center p-6 bg-card rounded-xl border shadow-lg",children:[c.jsxs("p",{className:"text-2xl font-bold mb-4",children:[d==="won"&&" Victory!",d==="lost"&&" Defeat",d==="draw"&&" Draw"]}),c.jsxs(be,{onClick:T,className:"gap-2",children:[c.jsx(Wc,{className:"h-4 w-4"}),"Play Again"]})]})})]}),c.jsx("div",{className:"flex items-center justify-between mt-4 p-3 bg-muted rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-accent/20 flex items-center justify-center",children:c.jsx("span",{className:"text-lg",children:""})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:"You"}),c.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:o})]})]})})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(eM,{fen:r.fen(),lastMove:_,isCheck:r.isCheck(),isCheckmate:r.isCheckmate(),isDraw:r.isDraw(),moveCount:f.length}),c.jsxs(Fe,{children:[c.jsx(Bt,{children:c.jsx(zt,{children:"Game Settings"})}),c.jsxs(We,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Difficulty"}),c.jsxs(Kh,{value:s,onValueChange:R=>i(R),disabled:d==="playing"&&f.length>0,children:[c.jsx(nu,{children:c.jsx(Gh,{})}),c.jsxs(su,{children:[c.jsx(Ot,{value:"beginner",children:" Beginner"}),c.jsx(Ot,{value:"intermediate",children:" Intermediate"}),c.jsx(Ot,{value:"advanced",children:" Advanced"}),c.jsx(Ot,{value:"master",children:" Master"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Play as"}),c.jsx(be,{variant:"outline",className:"w-full",onClick:F,disabled:d==="playing"&&f.length>0,children:o==="white"?" White":" Black"})]}),c.jsxs("div",{className:"pt-2 space-y-2",children:[c.jsxs(be,{variant:"outline",className:"w-full gap-2",onClick:T,children:[c.jsx(Wc,{className:"h-4 w-4"}),"New Game"]}),d==="playing"&&f.length>0&&c.jsxs(be,{variant:"destructive",className:"w-full gap-2",onClick:C,children:[c.jsx(a1,{className:"h-4 w-4"}),"Resign"]})]})]})]}),c.jsxs(Fe,{children:[c.jsx(Bt,{children:c.jsx(zt,{children:"Move History"})}),c.jsx(We,{children:c.jsx("div",{className:"text-sm font-mono bg-muted p-3 rounded-lg max-h-48 overflow-y-auto",children:f.length>0?c.jsx("div",{className:"flex flex-wrap gap-1",children:f.map((R,G)=>c.jsxs("span",{className:G%2===0?"text-foreground":"text-muted-foreground",children:[G%2===0&&c.jsxs("span",{className:"text-xs text-muted-foreground mr-1",children:[Math.floor(G/2)+1,"."]}),R]},G))}):c.jsx("span",{className:"text-muted-foreground",children:"No moves yet"})})})]}),r.isCheck()&&d==="playing"&&c.jsx("div",{className:"p-3 bg-destructive/10 text-destructive rounded-lg text-center font-bold animate-pulse",children:"CHECK!"})]})]})]})]})};var VS="AlertDialog",[rM,OM]=zn(VS,[U_]),Vn=U_(),qS=t=>{const{__scopeAlertDialog:e,...r}=t,n=Vn(e);return c.jsx(tS,{...n,...r,modal:!0})};qS.displayName=VS;var nM="AlertDialogTrigger",KS=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Vn(r);return c.jsx(vL,{...s,...n,ref:e})});KS.displayName=nM;var sM="AlertDialogPortal",GS=t=>{const{__scopeAlertDialog:e,...r}=t,n=Vn(e);return c.jsx(rS,{...n,...r})};GS.displayName=sM;var iM="AlertDialogOverlay",QS=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Vn(r);return c.jsx(Mm,{...s,...n,ref:e})});QS.displayName=iM;var ao="AlertDialogContent",[oM,aM]=rM(ao),lM=Px("AlertDialogContent"),YS=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,i=Vn(r),o=p.useRef(null),a=Ue(e,o),l=p.useRef(null);return c.jsx(hL,{contentName:ao,titleName:JS,docsSlug:"alert-dialog",children:c.jsx(oM,{scope:r,cancelRef:l,children:c.jsxs($m,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:ue(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c.jsx(lM,{children:n}),c.jsx(uM,{contentRef:o})]})})})});YS.displayName=ao;var JS="AlertDialogTitle",XS=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Vn(r);return c.jsx(Um,{...s,...n,ref:e})});XS.displayName=JS;var ZS="AlertDialogDescription",eE=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Vn(r);return c.jsx(Fm,{...s,...n,ref:e})});eE.displayName=ZS;var cM="AlertDialogAction",tE=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Vn(r);return c.jsx(Bm,{...s,...n,ref:e})});tE.displayName=cM;var rE="AlertDialogCancel",nE=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=aM(rE,r),i=Vn(r),o=Ue(e,s);return c.jsx(Bm,{...i,...n,ref:o})});nE.displayName=rE;var uM=({contentRef:t})=>{const e=`\`${ao}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ao}\` by passing a \`${ZS}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ao}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},dM=qS,fM=KS,hM=GS,sE=QS,iE=YS,oE=tE,aE=nE,lE=XS,cE=eE;const sy=dM,iy=fM,pM=hM,uE=p.forwardRef(({className:t,...e},r)=>c.jsx(sE,{className:Se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));uE.displayName=sE.displayName;const Qh=p.forwardRef(({className:t,...e},r)=>c.jsxs(pM,{children:[c.jsx(uE,{}),c.jsx(iE,{ref:r,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Qh.displayName=iE.displayName;const Yh=({className:t,...e})=>c.jsx("div",{className:Se("flex flex-col space-y-2 text-center sm:text-left",t),...e});Yh.displayName="AlertDialogHeader";const Jh=({className:t,...e})=>c.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Jh.displayName="AlertDialogFooter";const Xh=p.forwardRef(({className:t,...e},r)=>c.jsx(lE,{ref:r,className:Se("text-lg font-semibold",t),...e}));Xh.displayName=lE.displayName;const Zh=p.forwardRef(({className:t,...e},r)=>c.jsx(cE,{ref:r,className:Se("text-sm text-muted-foreground",t),...e}));Zh.displayName=cE.displayName;const ep=p.forwardRef(({className:t,...e},r)=>c.jsx(oE,{ref:r,className:Se(Sm(),t),...e}));ep.displayName=oE.displayName;const tp=p.forwardRef(({className:t,...e},r)=>c.jsx(aE,{ref:r,className:Se(Sm({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));tp.displayName=aE.displayName;const mM="ChristmasGambit2K25Admin",gM="Admin",vM="P@s$w0rd",yM=()=>{const[t,e]=p.useState(!1),[r,n]=p.useState(""),[s,i]=p.useState(""),[o,a]=p.useState(!1),[l,u]=p.useState(!1),[d,h]=p.useState(null),[f,m]=p.useState([]),[w,g]=p.useState([]),[b,y]=p.useState("swiss"),[v,x]=p.useState("10 | 5"),{toast:_}=yi();p.useEffect(()=>{t&&(E(),k())},[t]);const S=async(C,F={})=>{const{data:K,error:R}=await ee.functions.invoke("admin-action",{body:{action:C,data:F,adminKey:mM}});if(R)throw R;if(K!=null&&K.error)throw new Error(K.error);return K},E=async()=>{const{data:C}=await ee.from("tournaments").select("*").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(C){h(C),y(C.format),x(C.time_control);const{data:F}=await ee.from("tournament_players").select("player_id").eq("tournament_id",C.id);F&&g(F.map(K=>K.player_id))}},k=async()=>{const{data:C}=await ee.from("profiles").select("id, username, full_name, avatar_url, avatar_initials, score").order("username");C&&m(C)},j=C=>{C.preventDefault(),r===gM&&s===vM?(e(!0),_({title:"Admin access granted"})):_({variant:"destructive",title:"Invalid credentials"})},L=async()=>{u(!0);try{const C=await S("createTournament",{name:"Christmas Gambit Cup 2K25",format:b,timeControl:v});h(C),_({title:"Tournament created!"}),E()}catch(C){_({variant:"destructive",title:"Failed to create tournament",description:String(C)})}u(!1)},M=async()=>{if(d){u(!0);try{await S("updateTournament",{tournamentId:d.id,format:b,timeControl:v}),_({title:"Settings updated!"}),E()}catch(C){_({variant:"destructive",title:"Failed to update",description:String(C)})}u(!1)}},X=async()=>{if(d){u(!0);try{const C=await S("registerAllPlayers",{tournamentId:d.id});_({title:"All players registered!",description:`${C.count} players added`}),E()}catch(C){_({variant:"destructive",title:"Failed to register players",description:String(C)})}u(!1)}},U=async()=>{if(!d||w.length<2){_({variant:"destructive",title:"Need at least 2 players to start"});return}u(!0);let C=Math.ceil(Math.log2(w.length));b==="swiss"||b==="swiss_playoffs"||b==="swiss_super_league"?C=Math.ceil(Math.log2(w.length))+1:b==="round_robin_playoffs"?C=w.length-1:b==="arena"&&(C=10);try{await S("startTournament",{tournamentId:d.id,totalRounds:C}),await V(),_({title:"Tournament started!"}),E()}catch(F){_({variant:"destructive",title:"Failed to start tournament",description:String(F)})}u(!1)},V=async()=>{if(!d)return;const{data:C}=await ee.from("tournament_players").select("player_id, score").eq("tournament_id",d.id).eq("is_eliminated",!1).order("score",{ascending:!1});if(!C||C.length<2)return;const F=C.map(K=>K.player_id);for(let K=0;K<F.length-1;K+=2)await S("createGame",{tournamentId:d.id,round:(d.current_round||0)+1,whitePlayerId:F[K],blackPlayerId:F[K+1]});if(F.length%2===1){const K=F[F.length-1],R=C[C.length-1].score;await S("updatePlayerScore",{tournamentId:d.id,playerId:K,score:Number(R)+1})}},O=async()=>{var C,F,K;if(d){u(!0);try{const{data:R}=await ee.from("tournament_players").select("player_id, score").eq("tournament_id",d.id).order("score",{ascending:!1}).limit(3);R&&R.length>=1&&(await S("publishResults",{tournamentId:d.id,firstPlace:((C=R[0])==null?void 0:C.player_id)||null,secondPlace:((F=R[1])==null?void 0:F.player_id)||null,thirdPlace:((K=R[2])==null?void 0:K.player_id)||null}),_({title:"Results published!",description:"Champions page is now live!"}),E())}catch(R){_({variant:"destructive",title:"Failed to publish results",description:String(R)})}u(!1)}},W=async()=>{if(d){u(!0);try{await S("resetTournament",{tournamentId:d.id}),h(null),g([]),_({title:"Tournament reset!",description:"All data has been cleared."})}catch(C){_({variant:"destructive",title:"Failed to reset",description:String(C)})}u(!1)}},$=async()=>{u(!0);try{await S("deleteAllAccounts",{}),m([]),g([]),_({title:"All accounts deleted!",description:"All user data has been removed."})}catch(C){_({variant:"destructive",title:"Failed to delete accounts",description:String(C)})}u(!1)},q=async()=>{if(d){u(!0);try{const{data:C}=await ee.from("games").select("id").eq("tournament_id",d.id).eq("round",d.current_round||1).in("result",["pending","in_progress"]);if(C&&C.length>0){_({variant:"destructive",title:"Cannot start next round",description:`${C.length} games still pending in current round`}),u(!1);return}await S("advanceRound",{tournamentId:d.id}),await V(),_({title:"Next round started!",description:`Round ${(d.current_round||0)+1} pairings created`}),E()}catch(C){_({variant:"destructive",title:"Failed to start next round",description:String(C)})}u(!1)}},T=async()=>{if(d){u(!0);try{const{data:C}=await ee.from("tournament_players").select("player_id, score").eq("tournament_id",d.id).order("score",{ascending:!1}).limit(4);if(!C||C.length<4){_({variant:"destructive",title:"Not enough players",description:"Need at least 4 players for super league"}),u(!1);return}const F=C.map(R=>R.player_id),K=(d.current_round||0)+1;for(let R=0;R<F.length;R++)for(let G=R+1;G<F.length;G++)await S("createGame",{tournamentId:d.id,round:K,whitePlayerId:F[R],blackPlayerId:F[G]});await S("advanceRound",{tournamentId:d.id}),_({title:"Super League started!",description:"Top 4 players will face each other"}),E()}catch(C){_({variant:"destructive",title:"Failed to start super league",description:String(C)})}u(!1)}};return t?c.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(An,{className:"h-8 w-8 text-primary"}),c.jsx("h1",{className:"font-display text-2xl md:text-3xl font-bold",children:"Tournament Admin"})]}),c.jsx(be,{variant:"outline",onClick:()=>e(!1),children:"Logout"})]}),c.jsxs(Fe,{children:[c.jsx(Bt,{children:c.jsxs(zt,{className:"flex items-center gap-2",children:[c.jsx($n,{className:"h-5 w-5"}),"Tournament Status"]})}),c.jsx(We,{children:d?c.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Format"}),c.jsx("p",{className:"font-bold capitalize",children:d.format.replace(/_/g," ")})]}),c.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),c.jsx("p",{className:"font-bold capitalize",children:d.status.replace(/_/g," ")})]}),c.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Round"}),c.jsxs("p",{className:"font-bold",children:[d.current_round," / ",d.total_rounds||"?"]})]}),c.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Players"}),c.jsx("p",{className:"font-bold",children:w.length})]})]}):c.jsx("p",{className:"text-muted-foreground",children:"No tournament created yet."})})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs(Fe,{children:[c.jsx(Bt,{children:c.jsxs(zt,{className:"flex items-center gap-2",children:[c.jsx(pv,{className:"h-5 w-5"}),"Tournament Settings"]})}),c.jsxs(We,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{children:"Format"}),c.jsxs(Kh,{value:b,onValueChange:y,disabled:(d==null?void 0:d.status)==="in_progress",children:[c.jsx(nu,{children:c.jsx(Gh,{})}),c.jsxs(su,{children:[c.jsx(Ot,{value:"swiss",children:"Swiss Only"}),c.jsx(Ot,{value:"knockouts",children:"Knockouts Only"}),c.jsx(Ot,{value:"round_robin_playoffs",children:"Round Robin + Playoffs"}),c.jsx(Ot,{value:"swiss_playoffs",children:"Swiss + Playoffs"}),c.jsx(Ot,{value:"swiss_super_league",children:"Swiss + Super League"}),c.jsx(Ot,{value:"arena",children:"Arena"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{children:"Time Control"}),c.jsxs(Kh,{value:v,onValueChange:x,disabled:(d==null?void 0:d.status)==="in_progress",children:[c.jsx(nu,{children:c.jsx(Gh,{})}),c.jsxs(su,{children:[c.jsx(Ot,{value:"1 | 1",children:"1 | 1 (Bullet)"}),c.jsx(Ot,{value:"3 | 2",children:"3 | 2 (Blitz)"}),c.jsx(Ot,{value:"5 | 3",children:"5 | 3 (Blitz)"}),c.jsx(Ot,{value:"10 | 0",children:"10 | 0 (Rapid)"}),c.jsx(Ot,{value:"10 | 5",children:"10 | 5 (Rapid)"}),c.jsx(Ot,{value:"15 | 10",children:"15 | 10 (Rapid)"})]})]})]}),c.jsx("div",{className:"flex flex-col gap-2",children:d?d.status==="registration"?c.jsxs(c.Fragment,{children:[c.jsx(be,{onClick:M,disabled:l,variant:"outline",children:"Save Settings"}),c.jsxs(be,{onClick:X,disabled:l,variant:"secondary",children:[l?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx(dT,{className:"h-4 w-4 mr-2"}),"Register All Players"]}),c.jsxs(be,{onClick:U,disabled:l||w.length<2,children:[l?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx(rm,{className:"h-4 w-4 mr-2"}),"Start Tournament"]})]}):d.status==="in_progress"?c.jsxs("div",{className:"space-y-2",children:[c.jsxs(be,{onClick:q,disabled:l,className:"w-full",children:[l?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx(oT,{className:"h-4 w-4 mr-2"}),"Start Next Round"]}),(d.format==="swiss_super_league"||d.format==="swiss_playoffs")&&c.jsxs(be,{onClick:T,disabled:l,variant:"secondary",className:"w-full",children:[l?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx(pT,{className:"h-4 w-4 mr-2"}),"Start Super League / Playoffs"]}),c.jsxs(be,{onClick:O,disabled:l,variant:"outline",className:"w-full",children:[l?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx(Eu,{className:"h-4 w-4 mr-2"}),"Publish Results"]})]}):c.jsx("p",{className:"text-muted-foreground",children:"Tournament completed"}):c.jsxs(be,{onClick:L,disabled:l,className:"w-full",children:[l?c.jsx(sr,{className:"h-4 w-4 animate-spin mr-2"}):null,"Create Tournament"]})}),c.jsxs("div",{className:"pt-4 border-t border-destructive/20 space-y-2",children:[c.jsx("p",{className:"text-sm font-medium text-destructive",children:"Danger Zone"}),c.jsxs(sy,{children:[c.jsx(iy,{asChild:!0,children:c.jsxs(be,{variant:"outline",className:"w-full border-destructive/50 text-destructive hover:bg-destructive/10",disabled:l,children:[c.jsx(Wc,{className:"h-4 w-4 mr-2"}),"Reset Tournament"]})}),c.jsxs(Qh,{children:[c.jsxs(Yh,{children:[c.jsx(Xh,{children:"Reset Tournament?"}),c.jsx(Zh,{children:"This will delete the current tournament, all games, and remove all registered players. This action cannot be undone."})]}),c.jsxs(Jh,{children:[c.jsx(tp,{children:"Cancel"}),c.jsx(ep,{onClick:W,className:"bg-destructive hover:bg-destructive/90",children:"Reset Tournament"})]})]})]}),c.jsxs(sy,{children:[c.jsx(iy,{asChild:!0,children:c.jsxs(be,{variant:"outline",className:"w-full border-destructive/50 text-destructive hover:bg-destructive/10",disabled:l,children:[c.jsx(cT,{className:"h-4 w-4 mr-2"}),"Delete All Accounts"]})}),c.jsxs(Qh,{children:[c.jsxs(Yh,{children:[c.jsx(Xh,{children:"Delete All Accounts?"}),c.jsx(Zh,{children:"This will permanently delete ALL user accounts and their data. This action is IRREVERSIBLE and should only be used for complete reset."})]}),c.jsxs(Jh,{children:[c.jsx(tp,{children:"Cancel"}),c.jsx(ep,{onClick:$,className:"bg-destructive hover:bg-destructive/90",children:"Delete All Accounts"})]})]})]})]})]})]}),c.jsxs(Fe,{children:[c.jsx(Bt,{children:c.jsxs(zt,{className:"flex items-center gap-2",children:[c.jsx(u1,{className:"h-5 w-5"}),"Registered Players (",w.length,")"]})}),c.jsx(We,{children:c.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[f.filter(C=>w.includes(C.id)).map(C=>c.jsxs("div",{className:"flex items-center gap-3 p-2 bg-muted rounded-lg",children:[c.jsx(en,{avatarUrl:C.avatar_url,initials:C.avatar_initials,name:C.full_name,size:"sm"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:C.username}),c.jsx("p",{className:"text-xs text-muted-foreground",children:C.full_name})]})]},C.id)),w.length===0&&c.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No players registered yet"})]})})]})]})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:c.jsxs(Fe,{className:"w-full max-w-md border-2",children:[c.jsxs(Bt,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx(pv,{className:"h-12 w-12 text-primary"})}),c.jsx(zt,{className:"font-display",children:"Admin Access"}),c.jsx(Ja,{children:"Enter admin credentials to continue"})]}),c.jsx(We,{children:c.jsxs("form",{onSubmit:j,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{children:"Username"}),c.jsx(Jr,{value:r,onChange:C=>n(C.target.value),placeholder:"Admin username"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(mr,{children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Jr,{type:o?"text":"password",value:s,onChange:C=>i(C.target.value),placeholder:"Admin password"}),c.jsx(be,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>a(!o),children:o?c.jsx(ah,{className:"h-4 w-4"}):c.jsx(Ma,{className:"h-4 w-4"})})]})]}),c.jsx(be,{type:"submit",className:"w-full",children:"Access Dashboard"})]})})]})})},wM=()=>{const t=dl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),c.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),c.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},xM=new $O,bM=()=>c.jsx(FO,{client:xM,children:c.jsx(bA,{children:c.jsxs(pO,{children:[c.jsx(YT,{}),c.jsx(jj,{}),c.jsxs(LP,{children:[c.jsx(EA,{}),c.jsxs(Wv,{children:[c.jsx(kr,{path:"/admin",element:c.jsx(yM,{})}),c.jsx(kr,{path:"*",element:c.jsxs(c.Fragment,{children:[c.jsx(SA,{}),c.jsxs(Wv,{children:[c.jsx(kr,{path:"/",element:c.jsx(kA,{})}),c.jsx(kr,{path:"/auth",element:c.jsx(qA,{})}),c.jsx(kr,{path:"/profile",element:c.jsx(YA,{})}),c.jsx(kr,{path:"/standings",element:c.jsx(XA,{})}),c.jsx(kr,{path:"/champions",element:c.jsx(ZA,{})}),c.jsx(kr,{path:"/games",element:c.jsx(eI,{})}),c.jsx(kr,{path:"/game/:gameId",element:c.jsx(_L,{})}),c.jsx(kr,{path:"/practice",element:c.jsx(tM,{})}),c.jsx(kr,{path:"*",element:c.jsx(wM,{})})]})]})})]})]})]})})});jx(document.getElementById("root")).render(c.jsx(bM,{}));
